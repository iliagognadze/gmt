(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("uXP2"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("uXP2"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));d.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===S||e===I)return-1;if(e===S||t===I)return 1;var n=z(t),r=z(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},k=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=k(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var N,D,L,M,F,V,U,q,H,B,W=function(t){var e,n,r,i,s;Object(o.e)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},K=new RegExp("^-?(0*)\\d{1,10}$"),z=function(t){if(K.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},$=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Y=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),X="firebaseio.com",J="websocket",Z="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.e)("string"==typeof t,"typeof type must == string"),Object(o.e)("object"==typeof e,"typeof params must == object"),t===J)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new $(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||lt(Object(o.m)(t,e,i),n,r)},lt=function(t,e,n){var r=n instanceof $?new Y(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.E)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),lt(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,function(t,e){var n=new $(t);if(lt(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ft=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},mt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ft("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ct=(N="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D=0,L=[],function(t){var e,n=t===D;D=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=N.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=N.charAt(L[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),Et=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ot=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Et(S,t),r=new Et(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Et.MIN},t}(),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return new Et(I,M)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Et(t,M)},e.prototype.toString=function(){return".key"},e}(Ot),St=new Tt,It=function(t){return"number"==typeof t?"number:"+W(t):"string:"+t},xt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===F||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===F||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},jt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+It(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?W(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),At=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return new Et(I,new jt("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=U(t);return new Et(e,new jt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ot)),kt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Nt.EMPTY_NODE,this.right=null!=o?o:Nt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Nt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Nt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Nt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new kt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new kt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Dt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Dt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Mt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Pt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Pt.BLACK):(a(h,Pt.BLACK),a(h,Pt.RED))}return o}(new Lt(t.length));return new Nt(r||e,o)},Ft={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)(Ft&&At,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Ft},{".priority":At})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Nt?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==St,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Et.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Mt(s,e.getCompare()):Ft;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===Ft){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Et.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Mt(a,s.getCompare())}return Ft}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Et(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===Ft)return t;var r=n.get(e.name);return r?t.remove(new Et(e.name,r)):t}),this.indexSet_)},t}();function Ut(t,e){return x(t.name,e.name)}function qt(t,e){return x(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&xt(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return B||(B=new t(new Nt(qt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||B},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?B:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Et(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?B:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(At,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+It(this.getPriority().val())+":"),this.forEachChild(At,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Et(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Et(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Et(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Et.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Et.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bt?-1:0},t.prototype.withIndex=function(e){if(e===St||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===St||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(At),r=e.getIterator(At),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===St?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Bt=new(function(t){function e(){return t.call(this,new Nt(qt),Ht.EMPTY_NODE,Vt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function Wt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new jt(t,Wt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return R(t,function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=Wt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Wt(e))}var r=[],i=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=Wt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Et(t,n)))}}),0===r.length)return Ht.EMPTY_NODE;var s=Mt(r,Ut,function(t){return t.name},qt);if(i){var a=Mt(r,At.getCompare());return new Ht(s,Wt(e),new Vt({".priority":a},{".priority":At}))}return new Ht(s,Wt(e),Vt.Default)}Object.defineProperties(Et,{MIN:{value:new Et(S,Ht.EMPTY_NODE)},MAX:{value:new Et(I,Bt)}}),Tt.__EMPTY_NODE=Ht.EMPTY_NODE,jt.__childrenNodeConstructor=Ht,F=Bt,q=Bt,U=Wt;var Kt,zt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return Et.MAX},e.prototype.makePost=function(t,e){var n=Wt(t);return new Et(e,n)},e.prototype.toString=function(){return".value"},e}(Ot)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Wt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new Et(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,Bt);return new Et(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ot),Qt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),gt("DataSnapshot.child",1,e,!1);var n=new $(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,At)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),gt("DataSnapshot.hasChild",1,t,!1);var e=new $(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),At))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),$t=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new $t("value",this,new Qt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Jt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new $t(t.type,this,new Qt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(Kt,"Reference.ts has not been loaded"),Kt},set:function(t){Kt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===St){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===At){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof Gt||t.getIndex()===zt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Xt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Jt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Xt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Jt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(At);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=k(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new jt(a,Wt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new jt(o))),u.forEachChild(At,function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(At,function(t,e){n.remember(new $(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new $(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.e)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $(e));return new t($.Empty,n,this.revert)}return Object(o.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),pe=function(){function t(t,e){void 0===e&&(ue||(ue=new Nt(j)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return R(e,function(t,e){n=n.set(new $(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:$.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new $(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_($.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,$.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,$.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_($.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty):new t(this.source,this.path.popFront())},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new ye(this.source,$.Empty,n.value):new t(this.source,$.Empty,n)}return Object(o.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),me=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new me(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new me(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new me(Ht.EMPTY_NODE,!1,!1),new me(Ht.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(At,function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(At,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ce=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ee=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Oe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new me(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Te=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Se=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ce;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Te(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ht?c:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.e)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=e.popFront(),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=v?s.getNode().getImmediateChild(f).updateChild(g,v):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ee,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Oe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Oe(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:pe.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new $(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new $(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=pe.Empty;return a.getNode().forEachChild(St,function(t,e){u=u.set(new $(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=pe.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ee,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Oe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.e)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite($.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Ie=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.f)("Should only compare child_ events.");var n=new Et(t.childName,t.snapshotNode),r=new Et(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),xe=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Se(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),c=new me(a,o.isFullyInitialized(),r.filtersNodes()),l=new me(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Ie(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(At,function(t,e){n.push(_e.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),je=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.e)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ht?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ht.EMPTY_NODE,u=!1);var c=new be(new me(a,u,!1),new me(r,i,!1));s=new xe(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ae=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new pe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new pe(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return R(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,pe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild($.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(At,function(e,n){t.push(new Et(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Et(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new pe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return ke($.Empty,this.writeTree_,t)},t.Empty=new t(new pe(null)),t}();function ke(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.e)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ke(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Pe=function(){function t(){this.visibleWrites_=Ae.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Re(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):R(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite($.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite($.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(At,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(At,function(t,e){var r=i.childCompoundWrite(new $(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode($.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ae.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=$.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=$.relativePath(a,n),r=r.addWrite($.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(n.contains(a))u=$.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=$.relativePath(a,n)).isEmpty())r=r.addWrites($.Empty,s.children);else{var c=Object(o.D)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite($.Empty,l)}}}}}return r},t}(),Re=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ne=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=pe.Empty,this.pendingWriteTree_=new Pe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ye(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=pe.Empty;return null!=n.snap?r=r.set($.Empty,!0):R(n.children,function(t,e){r=r.set(new $(t),e)}),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ye(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=new ye(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=pe.fromObject(n),l=new ve(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=$.relativePath(o,e),u=new ge(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=$.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache($.Empty)):(u=new je,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache($.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=$.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get($.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache($.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get($.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache($.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),De=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),Me=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ve=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new qe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),qe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&_("event: "+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),He=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Be=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(He),We=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(He),Ke=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),ze="start",Ge="close",Qe=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Me.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ke(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new $e(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===ze)n.id=s,n.password=a;else{if(o!==Ge)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(X)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$e=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Ye="";function Xe(t){Ye=t}var Je=null;"undefined"!=typeof MozWebSocket?Je=MozWebSocket:"undefined"!=typeof WebSocket&&(Je=WebSocket);var Ze=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Me.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(X)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(J,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+Ye+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Je(this.connURL,[],r)}else this.mySock=new Je(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Je&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),tn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Qe,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),en=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new tn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Q(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),rn=1e3,on=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=rn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Be.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&We.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new en(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return k(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new $(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Ye.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=We.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(nn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(nn),an="repo_interrupt",un=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Me.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new on(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Me.getOrCreateReporter(this.repoInfo_,function(){return new Ve(t.stats_,t.server_)}),this.transactionsInit_(),this.infoData_=new De,this.infoSyncTree_=new Ne({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ne({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new $(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.B)(e,function(t){return Wt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Wt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.B)(e,function(t){return Wt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Wt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new $("/.info/"+t),r=Wt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then(function(n){var r=Wt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){e.log_("get for query "+Object(o.G)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Wt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,function(e,n){i=!1,s[e]=oe(t.child(e),Wt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),R(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree($.Empty,function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree($.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath($.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Wt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Wt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.s)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&R(e,function(e,n){var i=Wt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(an)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(an)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Fe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);R(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new _n(this))},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Et(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(At,function(t,e){i.matches(new Et(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ln=function(){function t(t){this.rangedFilter_=new cn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Et(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new Et(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_e.childAddedChange(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),hn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==At&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===At},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new ln(this):new cn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===At?e=n.PRIORITY_INDEX:this.index_===zt?e=n.VALUE_INDEX:this.index_===St?e=n.KEY_INDEX:(Object(o.e)(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.G)(e),this.startSet_&&(r[n.START_AT]=Object(o.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),fn=function(t){function e(e,n){if(!(e instanceof un))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,hn.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof $||(null===this.path.getFront()?yt("Reference.child",1,t,!1):gt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ft("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ft("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ct(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=fn,je.__referenceConstructor=fn;var dn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),pn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new dn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof $?e:new $(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.D)(r.node_.children,i)||new dn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new $(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});un.MAX_TRANSACTION_RETRIES_=25,un.prototype.transactionsInit_=function(){this.transactionQueueTree_=new pn},un.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new fn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Qt(a.currentInputSnapshot,new fn(this,a.path),At);a.onComplete(null,!1,l)}}else{lt("transaction failed: Data returned ",c,a.path),a.status=gn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.i)(c,".priority")?(d=Object(o.D)(c,".priority"),Object(o.e)(ut(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),d=d;var g=this.generateServerValues(),y=Wt(c,d),v=se(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},un.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},un.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===gn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},un.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.e)(c.status===gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=gn.SENT,c.retryCount++;var l=$.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new fn(n,e[s].path),c=new Qt(a,u,At);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)G(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===gn.SENT_NEEDS_ABORT?gn.NEEDS_ABORT:gn.RUN;else for(O("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},un.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},un.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===gn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=$.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===gn.RUN)if(a.retryCount>=un.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var d=Wt(f);"object"==typeof f&&null!=f&&Object(o.i)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=se(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=gn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new fn(this,t[s].path),m=new Qt(t[s].currentInputSnapshot,v,At);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)G(n[s]);this.sendReadyTransactions_()}},un.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},un.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},un.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},un.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},un.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},un.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===gn.SENT_NEEDS_ABORT||(e[s].status===gn.SENT?(Object(o.e)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=gn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.e)(e[s].status===gn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)G(n[s])}};var yn,vn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),mn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),bn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return yn||(yn=new t),yn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new mn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new mn:new vn(t,e);return mt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||E("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.D)(this.repos_,t.app.name);e&&Object(o.D)(e,t.key)===t||E("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new un(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),_n=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),bn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof un||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new fn(this.repo_,$.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):bn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof fn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);mt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),wn=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),Qe.forceAllow()},forceWebSockets:function(){Qe.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Xe(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:bn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),Cn=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var En=Object.freeze({__proto__:null,DataConnection:Cn,RealTimeConnection:en,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){bn.getInstance().forceRestClient(t)}}),On=_n.ServerValue;!function(e){Xe(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return bn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:fn,Query:Zt,Database:_n,DataSnapshot:Qt,enableLogging:b,INTERNAL:wn,ServerValue:On,TEST_ACCESS:En}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.1.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return nn}),n.d(e,"b",function(){return pu}),n.d(e,"c",function(){return cu}),n.d(e,"d",function(){return au}),n.d(e,"e",function(){return uu}),n.d(e,"f",function(){return rc}),n.d(e,"g",function(){return Gu}),n.d(e,"h",function(){return pa}),n.d(e,"i",function(){return Tu}),n.d(e,"j",function(){return qs}),n.d(e,"k",function(){return vu}),n.d(e,"l",function(){return Ks}),n.d(e,"m",function(){return wr}),n.d(e,"n",function(){return Ba}),n.d(e,"o",function(){return to}),n.d(e,"p",function(){return fn}),n.d(e,"q",function(){return en}),n.d(e,"r",function(){return vo}),n.d(e,"s",function(){return ua}),n.d(e,"t",function(){return ca}),n.d(e,"u",function(){return yu}),n.d(e,"v",function(){return Ta}),n.d(e,"w",function(){return $u}),n.d(e,"x",function(){return Oa}),n.d(e,"y",function(){return Hu}),n.d(e,"z",function(){return xu}),n.d(e,"A",function(){return dn}),n.d(e,"B",function(){return du}),n.d(e,"C",function(){return fu}),n.d(e,"D",function(){return Gs}),n.d(e,"E",function(){return zs}),n.d(e,"F",function(){return Tr}),n.d(e,"G",function(){return $s}),n.d(e,"H",function(){return gr}),n.d(e,"I",function(){return gn}),n.d(e,"J",function(){return Ju}),n.d(e,"K",function(){return _a}),n.d(e,"L",function(){return Du}),n.d(e,"M",function(){return rn}),n.d(e,"N",function(){return Xs}),n.d(e,"O",function(){return Ys}),n.d(e,"P",function(){return Ia}),n.d(e,"Q",function(){return k}),n.d(e,"R",function(){return Bu}),n.d(e,"S",function(){return Kn}),n.d(e,"T",function(){return d}),n.d(e,"U",function(){return Wn}),n.d(e,"V",function(){return ec}),n.d(e,"W",function(){return Fu}),n.d(e,"X",function(){return gu}),n.d(e,"Y",function(){return no}),n.d(e,"Z",function(){return Is}),n.d(e,"ab",function(){return dr}),n.d(e,"bb",function(){return Yn}),n.d(e,"cb",function(){return Dn}),n.d(e,"db",function(){return Mn}),n.d(e,"eb",function(){return qn}),n.d(e,"fb",function(){return Vn}),n.d(e,"gb",function(){return Fn}),n.d(e,"hb",function(){return Un}),n.d(e,"ib",function(){return Es}),n.d(e,"jb",function(){return tc}),n.d(e,"kb",function(){return Os}),n.d(e,"lb",function(){return Ts}),n.d(e,"mb",function(){return Ln}),n.d(e,"nb",function(){return L}),n.d(e,"ob",function(){return So}),n.d(e,"pb",function(){return qo}),n.d(e,"qb",function(){return Uo}),n.d(e,"rb",function(){return Cs}),n.d(e,"sb",function(){return Tt}),n.d(e,"tb",function(){return l}),n.d(e,"ub",function(){return Nn}),n.d(e,"vb",function(){return bo}),n.d(e,"wb",function(){return mt}),n.d(e,"xb",function(){return Fs}),n.d(e,"yb",function(){return ai}),n.d(e,"zb",function(){return jo}),n.d(e,"Ab",function(){return rs}),n.d(e,"Bb",function(){return nu}),n.d(e,"Cb",function(){return G}),n.d(e,"Db",function(){return tt}),n.d(e,"Eb",function(){return y}),n.d(e,"Fb",function(){return v}),n.d(e,"Gb",function(){return X}),n.d(e,"Hb",function(){return et}),n.d(e,"Ib",function(){return Ro}),n.d(e,"Jb",function(){return Fo}),n.d(e,"Kb",function(){return Mo}),n.d(e,"Lb",function(){return Lo}),n.d(e,"Mb",function(){return Vo}),n.d(e,"Nb",function(){return Xe}),n.d(e,"Ob",function(){return ms}),n.d(e,"Pb",function(){return On}),n.d(e,"Qb",function(){return Je}),n.d(e,"Rb",function(){return su}),n.d(e,"Sb",function(){return Ho}),n.d(e,"Tb",function(){return ru}),n.d(e,"Ub",function(){return pe}),n.d(e,"Vb",function(){return de}),n.d(e,"Wb",function(){return Ko}),n.d(e,"Xb",function(){return No}),n.d(e,"Yb",function(){return zo}),n.d(e,"Zb",function(){return Ha}),n.d(e,"ac",function(){return eu}),n.d(e,"bc",function(){return Po}),n.d(e,"cc",function(){return Bt}),n.d(e,"dc",function(){return yr}),n.d(e,"ec",function(){return J}),n.d(e,"fc",function(){return vs}),n.d(e,"gc",function(){return ko}),n.d(e,"hc",function(){return ou}),n.d(e,"ic",function(){return ps}),n.d(e,"jc",function(){return gs}),n.d(e,"kc",function(){return ys}),n.d(e,"lc",function(){return vr});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function m(t){return b(t,w)||b(t,E)}function b(t,e){return t.hasOwnProperty(e)?t[e]:null}function _(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(O))?t[C]:null}const w=u({"\u0275prov":u}),C=u({"\u0275inj":u}),E=u({ngInjectableDef:u}),O=u({ngInjectorDef:u});var T=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let S;function I(t){const e=S;return S=t,e}function x(t,e,n){const r=m(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&T.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${l(t)}]`)}function j(t){return{toString:t}.toString()}var A=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),k=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const P="undefined"!=typeof globalThis&&globalThis,R="undefined"!=typeof window&&window,N="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,L=P||D||R||N,M={},F=[],V=u({"\u0275cmp":u}),U=u({"\u0275dir":u}),q=u({"\u0275pipe":u}),H=u({"\u0275mod":u}),B=u({"\u0275loc":u}),W=u({"\u0275fac":u}),K=u({__NG_ELEMENT_ID__:u});let z=0;function G(t){return j(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===A.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||F,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||k.Emulated,id:"c",styles:t.styles||F,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=z++,n.inputs=Z(t.inputs,e),n.outputs=Z(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Q):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map($):null,n})}function Q(t){return nt(t)||function(t){return t[U]||null}(t)}function $(t){return function(t){return t[q]||null}(t)}const Y={};function X(t){const e={type:t.type,bootstrap:t.bootstrap||F,declarations:t.declarations||F,imports:t.imports||F,exports:t.exports||F,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&j(()=>{Y[t.id]=t.type}),e}function J(t,e){return j(()=>{const n=rt(t,!0);n.declarations=e.declarations||F,n.imports=e.imports||F,n.exports=e.exports||F})}function Z(t,e){if(null==t)return M;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const tt=G;function et(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function nt(t){return t[V]||null}function rt(t,e){const n=t[H]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const it=20,ot=10;function st(t){return Array.isArray(t)&&"object"==typeof t[1]}function at(t){return Array.isArray(t)&&!0===t[1]}function ut(t){return 0!=(8&t.flags)}function ct(t){return 2==(2&t.flags)}function lt(t){return 1==(1&t.flags)}function ht(t){return null!==t.template}function ft(t,e){return t.hasOwnProperty(W)?t[W]:null}class dt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function pt(t){return"string"==typeof t?t:null==t?"":String(t)}function gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pt(t)}function yt(t,e){const n=e?" in "+e:"";throw new dt("201",`No provider for ${gt(t)} found${n}`)}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function mt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),_t}function _t(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===M)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:M,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===M),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}mt.ngInherit=!0;const Et="http://www.w3.org/2000/svg";let Ot=void 0;function Tt(t){Ot=t}function St(t){return!!t.listen}const It={createRenderer:(t,e)=>void 0!==Ot?Ot:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function jt(t,e){return xt(e[t])}function At(t,e){return xt(e[t.index])}function kt(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return st(n)?n:n[0]}function Rt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Nt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Mt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Vt={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Vt.bindingsEnabled}function qt(){return Vt.lFrame.lView}function Ht(){return Vt.lFrame.tView}function Bt(t){Vt.lFrame.contextLView=t}function Wt(){let t=Kt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Kt(){return Vt.lFrame.currentTNode}function zt(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return Vt.lFrame.isParent}function Qt(){return Vt.isInCheckNoChangesMode}function $t(t){Vt.isInCheckNoChangesMode=t}function Yt(){return Vt.lFrame.bindingIndex++}function Xt(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Jt(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zt(e)}function Zt(t){Vt.lFrame.currentDirectiveIndex=t}function te(){return Vt.lFrame.currentQueryIndex}function ee(t){Vt.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&T.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&T.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Vt.lFrame=oe();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=oe(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return Vt.lFrame.selectedIndex}function he(t){Vt.lFrame.selectedIndex=t}function fe(){const t=Vt.lFrame;return kt(t.tView,t.selectedIndex)}function de(){Vt.lFrame.currentNamespace=Et}function pe(){Vt.lFrame.currentNamespace=null}function ge(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ye(t,e,n){be(t,e,3,n)}function ve(t,e,n,r){(3&t[2])===n&&be(t,e,n,r)}function me(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function be(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(_e(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function _e(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const we=-1;class Ce{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ee(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Te(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Oe(t){return 3===t||4===t||6===t}function Te(t){return 64===t.charCodeAt(0)}function Se(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ie(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ie(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function xe(t){return t!==we}function je(t){return 32767&t}function Ae(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ke=!0;function Pe(t){const e=ke;return ke=t,e}let Re=0;function Ne(t,e){const n=Le(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,De(r.data,t),De(e,null),De(r.blueprint,null));const i=Me(t,e),o=t.injectorIndex;if(xe(i)){const t=je(i),n=Ae(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function De(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Me(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return we;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return we}function Fe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(K)&&(r=n[K]),null==r&&(r=n[K]=Re++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Ve(t,e,n){if(n&T.Optional)return t;yt(e,"NodeInjector")}function Ue(t,e,n,r){if(n&T.Optional&&void 0===r&&(r=null),0==(n&(T.Self|T.Host))){const i=t[9],o=I(void 0);try{return i?i.get(e,r,n&T.Optional):x(e,r,n&T.Optional)}finally{I(o)}}return Ve(r,e,n)}function qe(t,e,n,r=T.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(K)?t[K]:void 0;return"number"==typeof e?e>=0?255&e:Be:e}(n);if("function"==typeof o){if(!re(e,t,r))return r&T.Host?Ve(i,n,r):Ue(e,n,r,i);try{const t=o();if(null!=t||r&T.Optional)return t;yt(n)}finally{ue()}}else if("number"==typeof o){let i=null,s=Le(t,e),a=we,u=r&T.Host?e[16][6]:null;for((-1===s||r&T.SkipSelf)&&(a=-1===s?Me(t,e):e[s+8],a!==we&&Qe(r,!1)?(i=e[1],s=je(a),e=Ae(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=We(s,e,n,i,r,u);if(t!==He)return t}a=e[s+8],a!==we&&Qe(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=je(a),e=Ae(a,e)):s=-1}}}return Ue(e,n,r,i)}const He={};function Be(){return new $e(Wt(),qt())}function We(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ke(a,s,n,null==r?ct(a)&&ke:r!=s&&0!=(3&a.type),i&T.Host&&o===a);return null!==u?ze(e,s,u,a):He}function Ke(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ht(t)&&t.type===n)return u}return null}function ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ce){const s=i;s.resolving&&function(t,e){throw new dt("200","Circular dependency in DI detected for "+t)}(gt(o[n]));const a=Pe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?I(s.injectImpl):null;re(t,r,T.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&I(u),Pe(a),s.resolving=!1,ue()}}return i}function Ge(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Qe(t,e){return!(t&T.Self||t&T.Host&&e)}class $e{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return qe(this._tNode,this._lView,t,void 0,e)}}function Ye(t){const e=t;if(g(t))return()=>{const t=Ye(p(e));return t?t():null};let n=ft(e);if(null===n){const t=_(e);n=t&&t.factory}return n||null}function Xe(t){return j(()=>{const e=t.prototype.constructor,n=e[W]||Ye(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[W]||Ye(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Je(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Oe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Wt(),t)}const Ze="__parameters__";function tn(t,e,n){return j(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ze)?t[Ze]:Object.defineProperty(t,Ze,{value:[]})[Ze];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class en{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const nn=new en("AnalyzeForEntryComponents"),rn=Function;function on(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),on(r,e)):e!==t&&e.push(r)}return e}function sn(t,e){t.forEach(t=>Array.isArray(t)?sn(t,e):e(t))}function an(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function un(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function cn(t,e,n){let r=hn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ln(t,e){const n=hn(t,e);if(n>=0)return t[1|n]}function hn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const fn=tn("Inject",t=>({token:t})),dn=tn("Optional"),pn=tn("Self"),gn=tn("SkipSelf"),yn={},vn=/\n/gm,mn="__source",bn=u({provide:String,useValue:u});let _n,wn=void 0;function Cn(t){const e=wn;return wn=t,e}function En(t,e=T.Default){if(void 0===wn)throw new Error("inject() must be called from an injection context");return null===wn?x(t,void 0,e):wn.get(t,e&T.Optional?null:void 0,e)}function On(t,e=T.Default){return(S||En)(p(t),e)}function Tn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=T.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof dn||"Optional"===i.ngMetadataName||i===dn?n|=T.Optional:i instanceof gn||"SkipSelf"===i.ngMetadataName||i===gn?n|=T.SkipSelf:i instanceof pn||"Self"===i.ngMetadataName||i===pn?n|=T.Self:t=i instanceof fn||i===fn?i.token:i}e.push(On(t,n))}else e.push(On(r))}return e}function Sn(){if(void 0===_n&&(_n=null,L.trustedTypes))try{_n=L.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return _n}function In(t){var e;return(null===(e=Sn())||void 0===e?void 0:e.createHTML(t))||t}class xn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class jn extends xn{getTypeName(){return"HTML"}}class An extends xn{getTypeName(){return"Style"}}class kn extends xn{getTypeName(){return"Script"}}class Pn extends xn{getTypeName(){return"URL"}}class Rn extends xn{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof xn?t.changingThisBreaksApplicationSecurity:t}function Dn(t,e){const n=Ln(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Ln(t){return t instanceof xn&&t.getTypeName()||null}function Mn(t){return new jn(t)}function Fn(t){return new An(t)}function Vn(t){return new kn(t)}function Un(t){return new Pn(t)}function qn(t){return new Rn(t)}let Hn=!0,Bn=!1;function Wn(){return Bn=!0,Hn}function Kn(){if(Bn)throw new Error("Cannot enable prod mode after platform setup.");Hn=!1}class zn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(In(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=In(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=In(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yn(t){return(t=String(t)).match(Qn)||t.match($n)?t:(Wn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see https://g.co/ng/security#xss)`),"unsafe:"+t)}function Xn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Jn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Zn=Xn("area,br,col,hr,img,wbr"),tr=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),er=Xn("rp,rt"),nr=Jn(er,tr),rr=Jn(Zn,Jn(tr,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jn(er,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nr),ir=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),or=Xn("srcset"),sr=Jn(ir,or,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ar=Xn("script,style,template");class ur{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!rr.hasOwnProperty(e))return this.sanitizedSomething=!0,!ar.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!sr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;ir[o]&&(s=Yn(s)),or[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Yn(t.trim())).join(", ")),this.buf.push(" ",e,'="',hr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();rr.hasOwnProperty(e)&&!Zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(hr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const cr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lr=/([^\#-~ |!])/g;function hr(t){return t.replace(/&/g,"&amp;").replace(cr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fr;function dr(t,e){let n=null;try{fr=fr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(In(""),"text/html")}catch(t){return!1}}()?new zn:new Gn(t)}(t);let r=e?String(e):"";n=fr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=fr.getInertBodyElement(r)}while(r!==o);const s=new ur,a=s.sanitizeChildren(pr(n)||n);return Wn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see https://g.co/ng/security#xss"),a}finally{if(n){const t=pr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function pr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(gr.URL,t)||"":Dn(t,"URL")?Nn(t):Yn(pt(t))}function vr(t){return function(t){var e;return(null===(e=Sn())||void 0===e?void 0:e.createScriptURL(t))||t}(t)}function mr(t){return t.ngDebugContext}function br(t){return t.ngOriginalError}function _r(t,...e){t.error(...e)}class wr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_r}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?mr(t)?mr(t):this._findContext(br(t)):null}_findOriginalError(t){let e=br(t);for(;e&&br(e);)e=br(e);return e}}function Cr(t,e){t.__ngContext__=e}const Er=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function Or(t){return t instanceof Function?t():t}var Tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Sr(t,e){return(void 0)(t,e)}function Ir(t){const e=t[3];return at(e)?e[3]:e}function xr(t){return Ar(t[13])}function jr(t){return Ar(t[4])}function Ar(t){for(;null!==t&&!at(t);)t=t[4];return t}function kr(t,e,n,r,i){if(null!=r){let o,s=!1;at(r)?o=r:st(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Fr(e,n,a):Mr(e,n,a,i||null,!0):1===t&&null!==n?Mr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ur(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&kr(e,t,r,o,i);for(let s=ot;s<n.length;s++){const i=n[s];Kr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Pr(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Rr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Nr(t,e){if(t.length<=ot)return;const n=ot+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Rr(o,r),e>0&&(t[n-1][4]=r[4]);const s=un(t,ot+e);Kr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Dr(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&Kr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Lr(t[1],t);for(;e;){let n=null;if(st(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)st(e)&&Lr(e[1],e),e=e[3];null===e&&(e=t),st(e)&&Lr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Lr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ce)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):xt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&at(e[3])){n!==e[3]&&Rr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Mr(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Fr(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function Vr(t,e,n,r,i){null!==r?Mr(t,e,n,r,i):Fr(t,e,n)}function Ur(t,e){return St(t)?t.parentNode(e):e.parentNode}function qr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===k.None||e===k.Emulated)return null}return At(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?At(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Vr(o,i,n[a],s,!1);else Vr(o,i,n,s,!1)}function Hr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return Br(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Hr(t,n);{const n=t[e.index];return at(n)?Br(-1,n):xt(n)}}if(32&n)return Sr(e,t)()||xt(t[e.index]);{const n=t[16],r=n[6],i=Ir(n),o=r.projection[e.projection];return null!=o?Hr(i,o):Hr(t,e.next)}}return null}function Br(t,e){const n=ot+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Hr(t,r)}return e[7]}function Wr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Cr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Wr(t,e,n.child,r,i,o,!1),kr(e,t,i,a,o);else if(32&u){const s=Sr(n,r);let u;for(;u=s();)kr(e,t,i,u,o);kr(e,t,i,a,o)}else 16&u?zr(t,e,r,n,i,o):kr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Kr(t,e,n,r,i,o){Wr(n,r,t.firstChild,e,i,o,!1)}function zr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)kr(e,t,i,a[u],o);else Wr(t,e,a,s[3],i,o,!0)}function Gr(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Qr(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function $r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Yr="ng-template";function Xr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==$r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Jr(t){return 4===t.type&&t.value!==Yr}function Zr(t,e,n){return e===(4!==t.type||n?t.value:Yr)}function ti(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Oe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Zr(t,u,n)||""===u&&1===e.length){if(ei(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Xr(t.attrs,c,n)){if(ei(r))return!1;s=!0}continue}const l=ni(8&r?"class":u,i,Jr(t),n);if(-1===l){if(ei(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==$r(e,c,0)||2&r&&c!==t){if(ei(r))return!1;s=!0}}}}else{if(!s&&!ei(r)&&!ei(u))return!1;if(s&&ei(u))continue;s=!1,r=u|1&r}}return ei(r)||s}function ei(t){return 0==(1&t)}function ni(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ri(t,e,n=!1){for(let r=0;r<e.length;r++)if(ti(t,e[r],n))return!0;return!1}function ii(t,e){return t?":not("+e.trim()+")":e}function oi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ei(s)||(e+=ii(o,i),i=""),r=s,o=o||!ei(r);n++}return""!==i&&(e+=ii(o,i)),e}const si={};function ai(t){ui(Ht(),qt(),le()+t,Qt())}function ui(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ye(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ve(e,r,0,n)}he(n)}function ci(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function hi(t){return 2|t}function fi(t){return(131068&t)>>2}function di(t,e){return-131069&t|e<<2}function pi(t){return 1|t}function gi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ee(i),n.contentQueries(2,e[o],o)}}}function yi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Mt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function vi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Kt(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Vt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function mi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bi(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&Qi(1,r,n);const i=t.template;null!==i&&Ci(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gi(t,e),t.staticViewQueries&&Qi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Bi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function _i(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const o=Qt();try{Mt(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ci(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ye(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ve(e,n,0,null),me(e,0)}if(function(t){for(let e=xr(t);null!==e;e=jr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=jr(e))for(let t=ot;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&_i(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&gi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ye(e,n)}else{const n=t.contentHooks;null!==n&&ve(e,n,1),me(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,o=n[++t],s=n[++t];Jt(o,i),s(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)qi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Qi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ye(e,n)}else{const n=t.viewHooks;null!==n&&ve(e,n,2),me(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ce()}}function wi(t,e,n,r){const i=e[10],o=!Qt(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&bi(t,e,r),_i(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ci(t,e,n,r,i){const o=le();try{he(-1),2&r&&e.length>it&&ui(t,e,it,Qt()),n(r,i)}finally{he(o)}}function Ei(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ne(n,e),Cr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ht(r);o&&Mi(e,n,r);const u=ze(e,t,a,n);Cr(u,e),null!==s&&Fi(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vt.lFrame.currentDirectiveIndex;try{he(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Zt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Pi(r,i)}}finally{he(-1),Zt(s)}}(t,e,n))}function Oi(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ti(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Si(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Si(t,e,n,r,i,o,s,a,u,c){const l=it+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:si);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ii(t,e,n,r){const i=Yi(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function xi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ji(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(Ji(t,n,c,r,i),ct(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):Te(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ai(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ri(n,s.selectors,!1)&&(i||(i=[]),Fe(Ne(n,e),t,s.type),ht(s)?(Ri(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Di(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=mi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Se(n.mergedAttrs,c.hostAttrs),Li(t,n,e,u,c),Ni(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Jr(e)?null:Vi(n,i);o.push(c),s=xi(n,u,s),a=xi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new dt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Se(n.mergedAttrs,n.attrs),i}function ki(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Pi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ri(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ni(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ht(e)&&(n[""]=t)}}function Di(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Li(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ft(i.type)),s=new Ce(o,ht(i),null);t.blueprint[r]=s,n[r]=s,ki(t,e,0,r,mi(t,n,i.hostVars,si),i)}function Mi(t,e,n){const r=At(e,t),i=Ti(n),o=t[10],s=Wi(t,yi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Fi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Vi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ui(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function qi(t,e){const n=Pt(e,t);if(Dt(n)){const t=n[1];80&n[2]?_i(t,n,t.template,n[8]):n[5]>0&&Hi(n)}}function Hi(t){for(let n=xr(t);null!==n;n=jr(n))for(let t=ot;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];_i(t,e,t.template,e[8])}else e[5]>0&&Hi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Dt(r)&&r[5]>0&&Hi(r)}}function Bi(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),bi(r,n,n[8])}function Wi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ki(t){for(;t;){t[2]|=64;const e=Ir(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function zi(t,e,n){const r=e[10];r.begin&&r.begin();try{_i(t,e,t.template,n)}catch(i){throw Xi(e,i),i}finally{r.end&&r.end()}}function Gi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Rt(n),i=r[1];wi(i,r,i.template,n)}}(t[8])}function Qi(t,e,n){ee(0),e(t,n)}const $i=(()=>Promise.resolve(null))();function Yi(t){return t[7]||(t[7]=[])}function Xi(t,e){const n=t[9],r=n?n.get(wr,null):null;r&&r.handleError(e)}function Ji(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Zi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const to=new en("INJECTOR",-1);class eo{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const no=new en("Set Injector scope."),ro={},io={},oo=[];let so=void 0;function ao(){return void 0===so&&(so=new eo),so}function uo(t,e=null,n=null,r){return new co(t,n,e||ao(),r)}class co{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&sn(e,n=>this.processProvider(n,t,e)),sn([t],t=>this.processInjectorType(t,[],i)),this.records.set(to,fo(void 0,this));const o=this.records.get(no);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=T.Default){this.assertNotDestroyed();const r=Cn(this);try{if(!(n&T.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof en)&&m(t);e=n&&this.injectableDefInScope(n)?fo(lo(t),ro):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&T.Self?ao():this.parent).get(t,e=n&T.Optional&&e===yn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[mn]&&i.unshift(e[mn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Cn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=_(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=_(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{sn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];sn(r,t=>this.processProvider(t,n,r||oo))}}this.injectorDefTypes.add(o),this.records.set(o,fo(r.factory,ro));const a=r.providers;if(null!=a&&!s){const e=t;sn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=go(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return po(t)?fo(void 0,t.useValue):fo(ho(t),ro)}(t);if(go(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=fo(void 0,ro,!0),e.factory=()=>Tn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ro&&(e.value=io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function lo(t){const e=m(t),n=null!==e?e.factory:ft(t);if(null!==n)return n;const r=_(t);if(null!==r)return r.factory;if(t instanceof en)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[w]||t[E]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ho(t,e,n){let r=void 0;if(go(t)){const e=p(t);return ft(e)||lo(e)}if(po(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Tn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>On(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ft(e)||lo(e);r=()=>new e(...Tn(t.deps))}var i;return r}function fo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function po(t){return null!==t&&"object"==typeof t&&bn in t}function go(t){return"function"==typeof t}const yo=function(t,e,n){return function(t,e=null,n=null,r){const i=uo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let vo=(()=>{class t{static create(t,e){return Array.isArray(t)?yo(t,e,""):yo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=yn,t.NULL=new eo,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>On(to)}),t.__NG_ELEMENT_ID__=-1,t})();function mo(t,e){ge(Rt(t)[1],Wt())}function bo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(ht(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=_o(t.inputs),e.declaredInputs=_o(t.declaredInputs),e.outputs=_o(t.outputs);const n=i.hostBindings;n&&Eo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&wo(t,o),s&&Co(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),ht(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===bo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Se(i.hostAttrs,n=Se(n,i.hostAttrs))}}(r)}function _o(t){return t===M?{}:t===F?[]:t}function wo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Co(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Eo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Oo=null;function To(){if(!Oo){const t=L.Symbol;if(t&&t.iterator)Oo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Oo=n)}}}return Oo}function So(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&To()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function jo(t,e,n,r){const i=qt();return xo(i,Yt(),e)&&(Ht(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?pt(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(fe(),i,t,e,n,r)),jo}function Ao(t,e,n,r){return xo(t,Yt(),n)?e+pt(n)+r:si}function ko(t,e,n,r,i,o,s,a){const u=qt(),c=Ht(),l=t+it,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=vi(e,t,4,s||null,Lt(c,a));Ai(e,n,l,Lt(c,u)),ge(e,l);const h=l.tViews=Si(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const f=u[11].createComment("");qr(c,u,f,h),Cr(f,u),Wi(u,u[l]=Ui(f,u,f,h)),lt(h)&&Ei(c,u,h),null!=s&&Oi(u,h,a)}function Po(t){return function(t,e){return t[e]}(Vt.lFrame.contextLView,it+t)}function Ro(t,e=T.Default){const n=qt();return null===n?On(t,e):qe(Wt(),n,p(t),e)}function No(t,e,n){const r=qt();return xo(r,Yt(),e)&&ji(Ht(),fe(),r,t,e,r[11],n,!1),No}function Do(t,e,n,r,i){const o=i?"class":"style";Ji(t,n,e.inputs[o],o,r)}function Lo(t,e,n,r){const i=qt(),o=Ht(),s=it+t,a=i[11],u=i[s]=Pr(a,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=vi(e,t,2,i,Lt(a,o));return Ai(e,n,u,Lt(a,s)),null!==u.attrs&&Zi(u,u.attrs,!1),null!==u.mergedAttrs&&Zi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&Ee(a,u,l);const h=c.classes;null!==h&&Qr(a,u,h);const f=c.styles;null!==f&&Gr(a,u,f),64!=(64&c.flags)&&qr(o,i,u,c),0===Vt.lFrame.elementDepthCount&&Cr(u,i),Vt.lFrame.elementDepthCount++,lt(c)&&(Ei(o,i,c),function(t,e,n){if(ut(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Oi(i,c)}function Mo(){let t=Wt();Gt()?Vt.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(ge(n,t),ut(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Do(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Do(n,e,qt(),e.stylesWithoutHost,!1)}function Fo(t,e,n,r){Lo(t,e,n,r),Mo()}function Vo(){return qt()}function Uo(t){return!!t&&"function"==typeof t.then}function qo(t){return!!t&&"function"==typeof t.subscribe}function Ho(t,e,n=!1,r){const i=qt(),o=Ht(),s=Wt();return function(t,e,n,r,i,o,s=!1,a){const u=lt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Yi(e);let h=!0;if(3&r.type){const f=At(r,e),d=a?a(f):M,p=d.target||f,g=l.length,y=a?t=>a(xt(t[r.index])).target:r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Wo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Wo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Wo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Ho}function Bo(t,e,n){try{return!1!==e(n)}catch(r){return Xi(t,r),!1}}function Wo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Ki(s);let a=Bo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Bo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ko(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function zo(t,e,n,r,i){const o=qt(),s=Ao(o,e,n,r);return s!==si&&ji(Ht(),fe(),o,t,s,o[11],i,!1),zo}const Go=[];function Qo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?li(o):fi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];$o(t[a],e)&&(u=!0,t[a+1]=r?pi(n):hi(n)),a=r?li(n):fi(n)}u&&(t[n+1]=r?hi(o):pi(o))}function $o(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&hn(t,e)>=0}const Yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Xo(t){return t.substring(Yo.key,Yo.keyEnd)}function Jo(t){return t.substring(Yo.value,Yo.valueEnd)}function Zo(t,e){const n=Yo.textEnd;let r=Yo.key=ts(t,e,n);return n===r?-1:(r=Yo.keyEnd=function(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=es(t,r,n),r=Yo.value=ts(t,r,n),r=Yo.valueEnd=function(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){const u=t.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=ns(t,u,s,n):e===s-4&&85===o&&82===i&&76===r&&40===u?a=s=ns(t,41,s,n):u>32&&(a=s),o=i,i=r,r=-33&u}return a}(t,r,n),es(t,r,n))}function ts(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function es(t,e,n,r){return(e=ts(t,e,n))<n&&e++,e}function ns(t,e,n,r){let i=-1,o=n;for(;o<r;){const n=t.charCodeAt(o++);if(n==e&&92!==i)return o;i=92==n&&92===i?0:n}throw new Error}function rs(t,e){return function(t,e,n,r){const i=qt(),o=Ht(),s=Xt(2);o.firstUpdatePass&&ss(o,t,s,true),e!==si&&xo(i,s,e)&&ls(o,o.data[le()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Nn(t))),t}(e),true,s)}(t,e),rs}function is(t,e){for(let n=function(t){return function(t){Yo.key=0,Yo.keyEnd=0,Yo.value=0,Yo.valueEnd=0,Yo.textEnd=t.length}(t),Zo(t,ts(t,0,Yo.textEnd))}(e);n>=0;n=Zo(e,n))cs(t,Xo(e),Jo(e))}function os(t,e){return e>=t.expandoStartIndex}function ss(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[le()],s=os(t,n);ds(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=us(n=as(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=as(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==fi(r))return t[li(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=as(null,t,e,n[1],r),n=us(n,e.attrs,r),function(t,e,n,r){t[li(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=us(r,t[o].hostAttrs,n);return us(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=li(s),u=fi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||hn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=li(t[a+1]);t[r+1]=ci(e,a),0!==e&&(t[e+1]=di(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ci(a,0),0!==a&&(t[a+1]=di(t[a+1],r)),a=r;else t[r+1]=ci(u,0),0===a?a=r:t[u+1]=di(t[u+1],r),u=r;l&&(t[r+1]=hi(t[r+1])),Qo(t,c,r,!0),Qo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&hn(o,e)>=0&&(n[r+1]=pi(n[r+1]))}(e,c,t,r,o),s=ci(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function as(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=us(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function us(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),cn(t,s,!!n||e[++o]))}return void 0===t?null:t}function cs(t,e,n){cn(t,e,Nn(n))}function ls(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];fs(1==(1&c)?hs(u,e,n,i,fi(c),s):void 0)||(fs(o)||2==(2&c)&&(o=hs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=St(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Tr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Tr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,jt(le(),n),i,o))}function hs(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===si&&(l=c?Go:void 0);let h=c?ln(l,r):u===r?l:void 0;if(o&&!fs(h)&&(h=ln(e,r)),fs(h)&&(a=h,s))return a;const f=t[i+1];i=s?li(f):fi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ln(t,r))}return a}function fs(t){return void 0!==t}function ds(t,e){return 0!=(t.flags&(e?16:32))}function ps(t,e=""){const n=qt(),r=Ht(),i=t+it,o=r.firstCreatePass?vi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return St(t)?t.createText(e):t.createTextNode(e)}(n[11],e);qr(r,n,s,o),zt(o,!1)}function gs(t){return ys("",t,""),gs}function ys(t,e,n){const r=qt(),i=Ao(r,t,e,n);return i!==si&&function(t,e,n){const r=jt(e,t);!function(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,le(),i),ys}function vs(t,e,n){(function(t,e,n,r){const i=Ht(),o=Xt(2);i.firstUpdatePass&&ss(i,null,o,r);const s=qt();if(n!==si&&xo(s,o,n)){const a=i.data[le()];if(ds(a,r)&&!os(i,o)){let t=a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),Do(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===si&&(i=Go);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let d=null,p=void 0;l===h?(u+=2,c+=2,s!==f&&(d=h,p=f)):null===h||null!==l&&l<h?(u+=2,d=l):(c+=2,d=h,p=f),null!==d&&ls(t,e,n,r,d,p,!1,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Go;const r=[],i=Nn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}})(cs,is,Ao(qt(),t,e,n),!1)}function ms(t,e,n){const r=qt();return xo(r,Yt(),e)&&ji(Ht(),fe(),r,t,e,r[11],n,!0),ms}const bs=void 0;var _s=["en",[["a","p"],["AM","PM"],bs],[["AM","PM"],bs,bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bs,"{1} 'at' {0}",bs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ws={};function Cs(t,e,n){"string"!=typeof e&&(n=e,e=t[Is.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ws[e]=t,n&&(ws[e][Is.ExtraData]=n)}function Es(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ss(e);if(n)return n;const r=e.split("-")[0];if(n=Ss(r),n)return n;if("en"===r)return _s;throw new Error(`Missing locale data for the locale "${t}".`)}function Os(t){return Es(t)[Is.CurrencyCode]||null}function Ts(t){return Es(t)[Is.PluralCase]}function Ss(t){return t in ws||(ws[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),ws[t]}var Is=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const xs="en-US";let js=xs;function As(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(js=t.toLowerCase().replace(/_/g,"-"))}function ks(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ks(t[o],e,n,r,i);else{const o=Ht(),s=qt();let a=go(t)?t:p(t.provide),u=ho(t);const c=Wt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(go(t)||!t.multi){const r=new Ce(u,i,Ro),d=Ns(a,e,i?l:l+f,h);-1===d?(Fe(Ne(c,s),o,a),Ps(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Ns(a,e,l+f,h),p=Ns(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){Fe(Ne(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ce(t,n,Ro);return o.multi=[],o.index=e,o.componentProviders=0,Rs(o,i,r&&!n),o}(i?Ls:Ds,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),Ps(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ps(o,t,d>-1?d:p,Rs(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function Ps(t,e,n,r){const i=go(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Rs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ns(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ds(t,e,n,r){return Ms(this.multi,[])}function Ls(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ms(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ms(i,o);return o}function Ms(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Fs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ht();if(r.firstCreatePass){const i=ht(t);ks(n,r.data,r.blueprint,i,!0),ks(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Vs{}class Us{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let qs=(()=>{class t{}return t.NULL=new Us,t})();function Hs(...t){}function Bs(t,e){return new Ks(At(t,e))}const Ws=function(){return Bs(Wt(),qt())};let Ks=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ws,t})();class zs{}let Gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Qs(),t})();const Qs=function(){const t=qt(),e=Pt(Wt().index,t);return function(t){return t[11]}(st(e)?e:t)};let $s=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class Ys{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Xs=new Ys("11.0.3");class Js{constructor(){}supports(t){return So(t)}create(t){return new ta(t)}}const Zs=(t,e)=>e;class ta{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Zs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ia(n,r,i)?e:n,s=ia(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!So(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[To()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ea(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ra),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ra),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ea{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class na{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ra{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new na,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ia(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class oa{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new sa}}class sa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new aa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class aa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ua=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new gn,new dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Js])}),t})(),ca=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new gn,new dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new oa])}),t})();function la(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),at(o))for(let t=ot;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&la(e[1],e,n,r)}const s=n.type;if(8&s)la(t,e,n.child,r);else if(32&s){const t=Sr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Ir(t);la(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ha{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return la(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Dr(this._lView[1],this._lView)}onDestroy(t){Ii(this._lView[1],this._lView,null,t)}markForCheck(){Ki(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){zi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){$t(!0);try{zi(t,e,n)}finally{$t(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Kr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class fa extends ha{constructor(t){super(t),this._view=t}detectChanges(){Gi(this._view)}checkNoChanges(){!function(t){$t(!0);try{Gi(t)}finally{$t(!1)}}(this._view)}get context(){return null}}const da=ga;let pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=da,t.__ChangeDetectorRef__=!0,t})();function ga(t=!1){return function(t,e,n){if(!n&&ct(t)){const n=Pt(t.index,e);return new ha(n,n)}return 47&t.type?new ha(e[16],e):null}(Wt(),qt(),t)}const ya=[new oa],va=new ua([new Js]),ma=new ca(ya),ba=function(){return Ea(Wt(),qt())};let _a=(()=>{class t{}return t.__NG_ELEMENT_ID__=ba,t})();const wa=_a,Ca=class extends wa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=yi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),bi(e,n,t),new ha(n)}};function Ea(t,e){return 4&t.type?new Ca(e,t,Bs(t,e)):null}class Oa{}class Ta{}const Sa=function(){return Pa(Wt(),qt())};let Ia=(()=>{class t{}return t.__NG_ELEMENT_ID__=Sa,t})();const xa=Ia,ja=class extends xa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Bs(this._hostTNode,this._hostLView)}get injector(){return new $e(this._hostTNode,this._hostLView)}get parentInjector(){const t=Me(this._hostTNode,this._hostLView);if(xe(t)){const e=Ae(t,this._hostLView),n=je(t);return new $e(e[1].data[n+8],e)}return new $e(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Aa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Oa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(at(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ja(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ot?(e[4]=n[i],an(n,ot+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Br(i,o),a=n[11],u=Ur(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Kr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),an(ka(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Aa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);n&&(un(ka(this._lContainer),e),Dr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);return n&&null!=un(ka(this._lContainer),e)?new ha(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Aa(t){return t[8]}function ka(t){return t[8]||(t[8]=[])}function Pa(t,e){let n;const r=e[t.index];if(at(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);Mr(n,Ur(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ui(r,e,i,t),Wi(e,n)}return new ja(n,t,e)}const Ra={};class Na extends qs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=nt(t);return new Ma(e,this.ngModule)}}function Da(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const La=new en("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Er});class Ma extends Vs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(oi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Da(this.componentDef.inputs)}get outputs(){return Da(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ra,i);return o!==Ra||r===Ra?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(zs,It),s=i.get($s,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===k.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Pr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Et:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Er,clean:$i,playerHandler:null,flags:0},f=Si(0,null,null,1,0,null,null,null,null,null),d=yi(null,f,h,l,null,null,o,a,s,i);let p,g;ie(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=vi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Zi(a,u,!0),null!==t&&(Ee(i,t,u),null!==a.classes&&Qr(i,t,a.classes),null!==a.styles&&Gr(i,t,a.styles)));const c=r.createRenderer(t,e),l=yi(n,Ti(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Fe(Ne(a,n),s,e.type),Ri(s,a),Di(a,n.length,1)),Wi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ee(a,c,["ng-version",Xs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ei(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ee(a,c,t),e&&e.length>0&&Qr(a,c,e.join(" "))}if(g=kt(f,it),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Wt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Li(t,r,e,mi(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);Cr(i,e);const o=At(r,e);return o&&Cr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Wt();e.contentQueries(1,s,t.directiveStart)}const a=Wt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),ki(n[1],a,0,a.directiveStart,a.directiveEnd,e),Pi(e,s)),s}(t,this.componentDef,d,h,[mo]),bi(f,d,null)}finally{ce()}return new Fa(this.componentType,p,Bs(g,d),d,g)}}class Fa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new fa(r),this.componentType=t}get injector(){return new $e(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Va=new Map;class Ua extends Oa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Na(this);const n=rt(t),r=t[B]||null;r&&As(r),this._bootstrapComponents=Or(n.bootstrap),this._r3Injector=uo(t,e,[{provide:Oa,useValue:this},{provide:qs,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=vo.THROW_IF_NOT_FOUND,n=T.Default){return t===vo||t===Oa||t===to?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class qa extends Ta{constructor(t){super(),this.moduleType=t,null!==rt(t)&&function(t){const e=new Set;!function t(n){const r=rt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Va.get(i),n),Va.set(i,n));const o=Or(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ua(this.moduleType,t)}}function Ha(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return xo(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===si?void 0:n}(t,s+1)}(qt(),function(){const t=Vt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}const Ba=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Wa(){return this._results[To()]()}class Ka{constructor(){this.dirty=!0,this._results=[],this.changes=new Ba,this.length=0;const t=To(),e=Ka.prototype;e[t]||(e[t]=Wa)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=on(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class za{constructor(t){this.queryList=t,this.matches=null}clone(){return new za(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ga{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ga(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==iu(t,e).matches&&this.queries[e].setDirty()}}class Qa{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class $a{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new $a(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ya{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ya(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Xa(e,i)),this.matchTNodeWithReadOption(t,e,Ke(e,t,i,!1,!1))}else n===_a?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ke(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ks||r===Ia||r===_a&&4&e.type)this.addMatch(e.index,-2);else{const n=Ke(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Xa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ja(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Bs(t,e):4&t.type?Ea(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ks?Bs(e,t):n===_a?Ea(e,t):n===Ia?Pa(e,t):void 0}(t,e,r):ze(t,t[1],n,e)}function Za(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ja(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function tu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Za(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ot;t<s.length;t++){const e=s[t];e[17]===e[3]&&tu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];tu(n[1],n,i,r)}}}}}return r}function eu(t){const e=qt(),n=Ht(),r=te();ee(r+1);const i=iu(n,r);if(t.dirty&&Nt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?tu(n,e,r,[]):Za(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function nu(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new $a),t.queries.track(new Ya(e,n))}(t,new Qa(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new Ka;Ii(t,e,n,n.destroy),null===e[19]&&(e[19]=new Ga),e[19].queries.push(new za(n))}(t,e)}(Ht(),qt(),e,n,r,0,Wt(),t)}function ru(){return t=qt(),e=te(),t[19].queries[e].queryList;var t,e}function iu(t,e){return t.queries.getByIndex(e)}function ou(t,e){return Ea(t,e)}function su(t=T.Default){const e=ga(!0);if(null!=e||t&T.Optional)return e;yt("ChangeDetectorRef")}const au=new en("Application Initializer");let uu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Hs,this.reject=Hs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Uo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(On(au,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const cu=new en("AppId"),lu={provide:cu,useFactory:function(){return`${hu()}${hu()}${hu()}`},deps:[]};function hu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fu=new en("Platform Initializer"),du=new en("Platform ID"),pu=new en("appBootstrapListener");let gu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const yu=new en("LocaleId"),vu=new en("DefaultCurrencyCode");class mu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const bu=function(t){return new qa(t)},_u=bu,wu=function(t){return Promise.resolve(bu(t))},Cu=function(t){const e=bu(t),n=Or(rt(t).declarations).reduce((t,e)=>{const n=nt(e);return n&&t.push(new Ma(n)),t},[]);return new mu(e,n)},Eu=Cu,Ou=function(t){return Promise.resolve(Cu(t))};let Tu=(()=>{class t{constructor(){this.compileModuleSync=_u,this.compileModuleAsync=wu,this.compileModuleAndAllComponentsSync=Eu,this.compileModuleAndAllComponentsAsync=Ou}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Su=(()=>Promise.resolve(0))();function Iu(t){"undefined"==typeof Zone?Su.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class xu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ba(!1),this.onMicrotaskEmpty=new Ba(!1),this.onStable=new Ba(!1),this.onError=new Ba(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ku(t),Au(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ku(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Pu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Ru(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Pu(t),e.invoke(r,i,o,s,a)}finally{Ru(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ku(t),Au(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ju,Hs,Hs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ju={};function Au(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ku(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Pu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ru(t){t._nesting--,Au(t)}class Nu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ba,this.onMicrotaskEmpty=new Ba,this.onStable=new Ba,this.onError=new Ba}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Du=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xu.assertNotInAngularZone(),Iu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Iu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(On(xu))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),Lu=(()=>{class t{constructor(){this._applications=new Map,Uu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Uu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class Mu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Fu(t){Uu=t}let Vu,Uu=new Mu;const qu=new en("AllowMultipleToken");class Hu{constructor(t,e){this.name=t,this.token=e}}function Bu(t,e,n=[]){const r="Platform: "+e,i=new en(r);return(e=[])=>{let o=Wu();if(!o||o.injector.get(qu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:no,useValue:"platform"});!function(t){if(Vu&&!Vu.destroyed&&!Vu.injector.get(qu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Vu=t.get(Ku);const e=t.get(fu,null);e&&e.forEach(t=>t())}(vo.create({providers:t,name:r}))}return function(t){const e=Wu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Wu(){return Vu&&!Vu.destroyed?Vu:null}let Ku=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Nu:("zone.js"===t?void 0:t)||new xu({enableLongStackTrace:Wn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:xu,useValue:n}];return n.run(()=>{const e=vo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(wr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Qu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Uo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(uu);return t.runInitializers(),t.donePromise.then(()=>(As(i.injector.get(yu,xs)||xs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=zu({},e);return function(t,e,n){const r=new qa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Gu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(On(vo))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function zu(t,e){return Array.isArray(e)?e.reduce(zu,t):Object.assign(Object.assign({},t),e)}let Gu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Wn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{xu.assertNotInAngularZone(),Iu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{xu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Vs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Oa),i=n.create(vo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Du,null);return o&&i.injector.get(Lu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Wn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Qu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Qu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(On(xu),On(gu),On(vo),On(wr),On(qs),On(uu))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Qu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class $u{}class Yu{}const Xu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ju=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Xu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Zu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Zu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(On(Tu),On(Yu,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Zu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const tc=function(t){return null},ec=Bu(null,"core",[{provide:du,useValue:"unknown"},{provide:Ku,deps:[vo]},{provide:Lu,deps:[]},{provide:gu,deps:[]}]),nc=[{provide:Gu,useClass:Gu,deps:[xu,gu,vo,wr,qs,uu]},{provide:La,deps:[xu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:uu,useClass:uu,deps:[[new dn,au]]},{provide:Tu,useClass:Tu,deps:[]},lu,{provide:ua,useFactory:function(){return va},deps:[]},{provide:ca,useFactory:function(){return ma},deps:[]},{provide:yu,useFactory:function(t){return As(t=t||"undefined"!=typeof $localize&&$localize.locale||xs),t},deps:[[new fn(yu),new dn,new gn]]},{provide:vu,useValue:"USD"}];let rc=(()=>{class t{constructor(t){}}return t.\u0275mod=X({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(On(Gu))},providers:nc}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return M}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return P}),n.d(e,"j",function(){return F}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return H}),n.d(e,"n",function(){return d}),n.d(e,"o",function(){return k}),n.d(e,"p",function(){return y}),n.d(e,"q",function(){return v}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return N}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return g}),n.d(e,"w",function(){return C}),n.d(e,"x",function(){return m}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return A}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return L}),n.d(e,"D",function(){return R}),n.d(e,"E",function(){return z}),n.d(e,"F",function(){return K}),n.d(e,"G",function(){return x}),n.d(e,"H",function(){return q}),n.d(e,"I",function(){return B}),n.d(e,"J",function(){return W});var r=n("uXP2"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function C(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function T(t,e){return t.replace(S,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var S=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},k=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function B(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function W(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var K=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},z=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return S}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return v}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let S=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)(u.Pb(u.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},uXP2:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("uXP2"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.l)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyB1Yx9xs09LYxf93qTdGGBARFGqRxINhCE",authDomain:"gmtfirebaseproject.firebaseapp.com",projectId:"gmtfirebaseproject",storageBucket:"gmtfirebaseproject.appspot.com",messagingSenderId:"164278019472",appId:"1:164278019472:web:21e3b68f1f187030aebf15",measurementId:"G-94S6FPJVPQ"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Pb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=Object(r.Eb)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Pb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Pb)(a).location;return new _(Object(r.Pb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(u),r.Pb(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(u),r.Pb(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(v),r.Pb(u))},t.normalizeQueryParams=y,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Eb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new C(Object(r.Pb)(v),Object(r.Pb)(u))}function O(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.lb;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.u))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),j=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.ob)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.tb)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.s),r.Ib(r.t),r.Ib(r.l),r.Ib(r.D))},t.\u0275dir=r.Db({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new P(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new P(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K),r.Ib(r.s))},t.\u0275dir=r.Db({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class P{constructor(t,e){this.record=t,this.view=e}}let R=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K))},t.\u0275dir=r.Db({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}let L=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[{provide:I,useClass:x}]}),t})();function M(t){return"server"===t}let F=(()=>{class t{}return t.\u0275prov=Object(r.Eb)({token:t,providedIn:"root",factory:()=>new V(Object(r.Pb)(a),window,Object(r.Pb)(r.m))}),t})();class V{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=U(this.window.history)||U(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function U(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new q,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=B||(B=document.querySelector("base"),B)?B.getAttribute("href"):null;return null==e?null:(n=e,H||(H=document.createElement("a")),H.setAttribute("href",n),"/"===H.pathname.charAt(0)?H.pathname:"/"+H.pathname);var n}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let H,B=null;const W=new r.q("TRANSITION_ID"),K=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[W,a,r.r],multi:!0}];class z{static init(){Object(r.W)(new z)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const G=new r.q("EventManagerPlugins");let Q=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(G),r.Pb(r.z))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class ${constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Y=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t extends Y{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Z=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(Z,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.Q.ShadowDom:return new ot(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Q),r.Pb(X),r.Pb(r.c))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(J[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=J[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=J[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.F.DashCase|r.F.Important)?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Z,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Z,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ot extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let st=(()=>{class t extends ${constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends ${constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const ft=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){q.makeCurrent(),z.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],dt=Object(r.R)(r.V,"browser",ft),pt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:G,useClass:st,multi:!0,deps:[a,r.z,r.B]},{provide:G,useClass:ht,multi:!0,deps:[a]},[],{provide:nt,useClass:nt,deps:[Q,X,r.c]},{provide:r.E,useExisting:nt},{provide:Y,useExisting:X},{provide:X,useClass:X,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:Q,useClass:Q,deps:[G,r.z]},[]];let gt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:W,useExisting:r.c},K]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Pb(t,12))},providers:pt,imports:[L,r.f]}),t})();"undefined"!=typeof window&&window;var yt=n("HDdC"),vt=n("DH7j"),mt=n("lJxs"),bt=n("XoHu"),_t=n("Cfvw");function wt(t,e){return new yt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(_t.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Ct=new r.q("NgValueAccessor"),Et={provide:Ct,useExisting:Object(r.T)(()=>Ot),multi:!0};let Ot=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.xb([Et])]}),t})();const Tt={provide:Ct,useExisting:Object(r.T)(()=>It),multi:!0},St=new r.q("CompositionEventMode");let It=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(St,8))},t.\u0275dir=r.Db({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Sb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.xb([Tt])]}),t})();function xt(t){return null==t||0===t.length}function jt(t){return null!=t&&"number"==typeof t.length}const At=new r.q("NgValidators"),kt=new r.q("NgAsyncValidators"),Pt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rt{static min(t){return e=>{if(xt(e.value)||xt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(xt(e.value)||xt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return xt(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return xt(t.value)||Pt.test(t.value)?null:{email:!0}}static minLength(t){return e=>xt(e.value)||!jt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>jt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Rt.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(xt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Nt);return 0==e.length?null:function(t){return Lt(Mt(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Nt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(vt.a)(e))return wt(e,null);if(Object(bt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return wt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return wt(t=1===t.length&&Object(vt.a)(t[0])?t[0]:t,null).pipe(Object(mt.a)(t=>e(...t)))}return wt(t,null)}(Mt(t,e).map(Dt)).pipe(Object(mt.a)(Lt))}}}function Nt(t){return null!=t}function Dt(t){const e=Object(r.qb)(t)?Object(_t.a)(t):t;return Object(r.pb)(e),e}function Lt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Mt(t,e){return e.map(e=>e(t))}function Ft(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Vt(t){return null!=t?Rt.compose(Ft(t)):null}function Ut(t){return null!=t?Rt.composeAsync(Ft(t)):null}function qt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ht(t){return t._rawValidators}function Bt(t){return t._rawAsyncValidators}let Wt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ut(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t}),t})(),Kt=(()=>{class t extends Wt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return zt(e||t)},t.\u0275dir=r.Db({type:t,features:[r.vb]}),t})();const zt=r.Nb(Kt);class Gt extends Wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qt{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let $t=(()=>{class t extends Qt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Gt,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),Yt=(()=>{class t extends Qt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Kt,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();const Xt={provide:Ct,useExisting:Object(r.T)(()=>Jt),multi:!0};let Jt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([Xt])]}),t})();const Zt={provide:Ct,useExisting:Object(r.T)(()=>ee),multi:!0};let te=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),ee=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Gt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(te),r.Ib(r.r))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([Zt])]}),t})();const ne={provide:Ct,useExisting:Object(r.T)(()=>re),multi:!0};let re=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([ne])]}),t})();const ie={provide:Ct,useExisting:Object(r.T)(()=>se),multi:!0};function oe(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let se=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=oe(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([ie])]}),t})(),ae=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(oe(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(r.D),r.Ib(se,9))},t.\u0275dir=r.Db({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const ue={provide:Ct,useExisting:Object(r.T)(()=>le),multi:!0};function ce(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let le=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([ue])]}),t})(),he=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ce(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ce(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(r.D),r.Ib(le,9))},t.\u0275dir=r.Db({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function fe(t,e){return[...e.path,t]}function de(t,e){ge(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ve(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ve(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function pe(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ge(t,e,n){const r=Ht(t);null!==e.validator?t.setValidators(qt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Bt(t);if(null!==e.asyncValidator?t.setAsyncValidators(qt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();pe(e._rawValidators,n),pe(e._rawAsyncValidators,n)}}function ye(t,e,n){if(null!==t){if(null!==e.validator){const n=Ht(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=Bt(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};pe(e._rawValidators,t),pe(e._rawAsyncValidators,t)}}function ve(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function me(t,e){ge(t,e,!1)}function be(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const _e=[Ot,re,Jt,se,le,ee];function we(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Ce(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===It?n=t:(e=t,_e.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function Ee(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Oe="VALID",Te="INVALID",Se="PENDING",Ie="DISABLED";function xe(t){return(Pe(t)?t.validators:t)||null}function je(t){return Array.isArray(t)?Vt(t):t||null}function Ae(t,e){return(Pe(e)?e.asyncValidators:t)||null}function ke(t){return Array.isArray(t)?Ut(t):t||null}function Pe(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Re{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=je(this._rawValidators),this._composedAsyncValidatorFn=ke(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Oe}get invalid(){return this.status===Te}get pending(){return this.status==Se}get disabled(){return this.status===Ie}get enabled(){return this.status!==Ie}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=je(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ke(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Se,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ie,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Oe,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Oe&&this.status!==Se||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ie:Oe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Se,this._hasOwnPendingAsyncValidator=!0;const e=Dt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof De?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Le&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Ie:this.errors?Te:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Se)?Se:this._anyControlsHaveStatus(Te)?Te:Oe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Pe(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ne extends Re{constructor(t=null,e,n){super(xe(e),Ae(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ee(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ee(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class De extends Re{constructor(t,e,n){super(xe(e),Ae(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ne?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Le extends Re{constructor(t,e,n){super(xe(e),Ae(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ne?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Me={provide:Kt,useExisting:Object(r.T)(()=>Ve)},Fe=(()=>Promise.resolve(null))();let Ve=(()=>{class t extends Kt{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new De({},Vt(t),Ut(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fe.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),de(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fe.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Ee(this._directives,t)})}addFormGroup(t){Fe.then(()=>{const e=this._findContainer(t.path),n=new De({});me(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fe.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Fe.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,we(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(At,10),r.Ib(kt,10))},t.\u0275dir=r.Db({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Sb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([Me]),r.vb]}),t})();const Ue={provide:Gt,useExisting:Object(r.T)(()=>He)},qe=(()=>Promise.resolve(null))();let He=(()=>{class t extends Gt{constructor(t,e,n,i){super(),this.control=new Ne,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Ce(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),be(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?fe(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){de(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){qe.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;qe.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Kt,9),r.Ib(At,10),r.Ib(kt,10),r.Ib(Ct,10))},t.\u0275dir=r.Db({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.xb([Ue]),r.vb,r.wb]}),t})(),Be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const We=new r.q("NgModelWithFormControlWarning"),Ke={provide:Kt,useExisting:Object(r.T)(()=>ze)};let ze=(()=>{class t extends Kt{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return de(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Ee(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);me(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);me(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,we(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),ye(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}(t.control||null,t),e&&de(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ge(this.form,this,!1),this._oldForm&&ye(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(At,10),r.Ib(kt,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Sb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([Ke]),r.vb,r.wb]}),t})();const Ge={provide:Gt,useExisting:Object(r.T)(()=>Qe)};let Qe=(()=>{class t extends Gt{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Ce(0,i)}set isDisabled(t){}ngOnChanges(e){this._added||this._setUpControl(),be(e,this.viewModel)&&(function(t,e,n,i){Object(r.U)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}(0,t,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return fe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Kt,13),r.Ib(At,10),r.Ib(kt,10),r.Ib(Ct,10),r.Ib(We,8))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.xb([Ge]),r.vb,r.wb]}),t._ngModelWarningSentOnce=!1,t})(),$e=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),Ye=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new De(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Ne(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Le(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Ne||t instanceof De||t instanceof Le?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),Xe=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[te],imports:[$e]}),t})(),Je=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:We,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Ye,te],imports:[$e]}),t})();var Ze=n("spgP"),tn=n("LRne"),en=n("7o/Q"),nn=n("D0XW");class rn{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new on(t,this.dueTime,this.scheduler))}}class on extends en.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(sn,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function sn(t){t.debouncedNext()}var an=n("pxpQ"),un=n("zx2A");function cn(t,e){return"function"==typeof e?n=>n.pipe(cn((n,r)=>Object(_t.a)(t(n,r)).pipe(Object(mt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ln(t))}class ln{constructor(t){this.project=t}call(t,e){return e.subscribe(new hn(t,this.project))}}class hn extends un.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new un.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(un.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var fn=n("zIRd"),dn=n("uXP2"),pn=n("qOnz"),gn=n("/6Yf"),yn="firebasestorage.googleapis.com",vn=function(t){function e(n,r){var i=t.call(this,wn(n),"Firebase Storage: "+r+" ("+wn(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(dn.c)(e,t),e.prototype.codeEquals=function(t){return wn(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(pn.c),mn="canceled",bn="invalid-argument",_n="unsupported-environment";function wn(t){return"storage/"+t}function Cn(){return new vn("unknown","An unknown error occurred, please check the error payload for server response.")}function En(){return new vn(mn,"User canceled the upload/download.")}function On(){return new vn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Tn(t){return new vn(bn,t)}function Sn(){return new vn("app-deleted","The Firebase app was deleted.")}function In(t){return new vn("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xn(t,e){return new vn("invalid-format","String does not match format '"+t+"': "+e)}function jn(t){throw new vn("internal-error","Internal error: "+t)}var An={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},kn=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Pn(t,e){switch(t){case An.RAW:return new kn(Rn(e));case An.BASE64:case An.BASE64URL:return new kn(Nn(t,e));case An.DATA_URL:return new kn((n=new Dn(e)).base64?Nn(An.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw xn(An.DATA_URL,"Malformed data URL.")}return Rn(e)}(n.rest),new Dn(e).contentType)}var n;throw Cn()}function Rn(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Nn(t,e){switch(t){case An.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw xn(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case An.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw xn(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw xn(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Dn=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw xn(An.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Ln="running",Mn="pausing",Fn="paused",Vn="success",Un="canceling",qn="canceled",Hn="error",Bn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Wn(t){switch(t){case Ln:case Mn:case Un:return Bn.RUNNING;case Fn:return Bn.PAUSED;case Vn:return Bn.SUCCESS;case qn:return Bn.CANCELED;case Hn:default:return Bn.ERROR}}var Kn=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),zn=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Kn.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Kn.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Kn.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw jn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw jn("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw jn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw jn("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Gn=function(){function t(){}return t.prototype.createXhrIo=function(){return new zn},t}();function Qn(t){return"string"==typeof t||t instanceof String}function $n(t){return Yn()&&t instanceof Blob}function Yn(){return"undefined"!=typeof Blob}function Xn(t,e,n,r){if(r<e)throw new vn(bn,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new vn(bn,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function Jn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Zn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Jn();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Yn())return new Blob(t);throw new vn(_n,"This browser doesn't seem to support creating Blobs")}var tr=function(){function t(t,e){var n=0,r="";$n(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if($n(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Yn()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Zn.apply(null,r))}var i=e.map(function(t){return Qn(t)?Pn(An.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),er=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new vn("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=yn.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new vn("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function nr(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function rr(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function ir(t){return"https://"+yn+"/v0"+t}function or(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function sr(t,e){return e}var ar=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||sr}}(),ur=null;function cr(){if(ur)return ur;var t=[];t.push(new ar("bucket")),t.push(new ar("generation")),t.push(new ar("metageneration")),t.push(new ar("name","fullPath",!0));var e=new ar("name");e.xform=function(t,e){return function(t){return!Qn(t)||t.length<2?t:rr(t)}(e)},t.push(e);var n=new ar("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new ar("timeCreated")),t.push(new ar("updated")),t.push(new ar("md5Hash",null,!0)),t.push(new ar("cacheControl",null,!0)),t.push(new ar("contentDisposition",null,!0)),t.push(new ar("contentEncoding",null,!0)),t.push(new ar("contentLanguage",null,!0)),t.push(new ar("contentType",null,!0)),t.push(new ar("metadata","customMetadata",!0)),ur=t}function lr(t,e,n){var r=nr(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new er(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function hr(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var fr=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function dr(t){if(!t)throw Cn()}function pr(t,e){return function(n,r){var i=lr(t,r,e);return dr(null!==i),i}}function gr(t){return function(e,n){var r;return(r=401===e.getStatus()?new vn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new vn("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new vn("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function yr(t){var e=gr(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new vn("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function vr(t,e,n){var r=ir(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new fr(r,"GET",pr(t,n),i);return o.errorHandler=yr(e),o}function mr(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var br=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function _r(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){dr(!1)}return dr(!!n&&-1!==(e||["active"]).indexOf(n)),n}var wr=262144,Cr=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),Er=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Or(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Tr=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=cr(),this._resumable=this._shouldDoResumable(this._blob),this._state=Ln,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(mn)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(Hn))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(mn)?r.completeTransitions_():(r._error=t,r._transition(Hn))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===Ln&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then(function(n){switch(e._state){case Ln:t(n);break;case Un:e._transition(qn);break;case Mn:e._transition(Fn)}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=mr(e,r,i),a={name:s.fullPath},u=ir(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=hr(s,n),h=new fr(u,"POST",function(t){var e;_r(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){dr(!1)}return dr(Qn(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=gr(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new fr(n,"POST",function(t){var e=_r(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){dr(!1)}n||dr(!1);var i=Number(n);return dr(!isNaN(i)),new br(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=gr(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=wr*this._chunkMultiplier,n=new br(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new br(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new vn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw On();var p=new fr(n,"POST",function(t,n){var i,s=_r(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?pr(e,o)(t,n):null,new br(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=gr(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition(Hn)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(Vn)):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){wr*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=vr(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition(Vn)},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=mr(e,r,i),c=hr(u,n),l=tr.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw On();var h={name:u.fullPath},f=ir(o),d=t.maxUploadRetryTime,p=new fr(f,"POST",pr(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=gr(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(Vn)},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case Un:case Mn:this._state=t,void 0!==this._request&&this._request.cancel();break;case Ln:var e=this._state===Fn;this._state=t,e&&(this._notifyObservers(),this._start());break;case Fn:this._state=t,this._notifyObservers();break;case qn:this._error=En(),this._state=t,this._notifyObservers();break;case Hn:case Vn:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Mn:this._transition(Fn);break;case Un:this._transition(qn);break;case Ln:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Wn(this._state);return new Er(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Cr(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Wn(this._state)){case Bn.SUCCESS:Or(this._resolve.bind(null,this.snapshot))();break;case Bn.CANCELED:case Bn.ERROR:Or(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Wn(this._state)){case Bn.RUNNING:case Bn.PAUSED:t.next&&Or(t.next.bind(t,this.snapshot))();break;case Bn.SUCCESS:t.complete&&Or(t.complete.bind(t))();break;case Bn.CANCELED:case Bn.ERROR:t.error&&Or(t.error.bind(t,this._error))();break;default:t.error&&Or(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===Fn||this._state===Mn;return t&&this._transition(Ln),t},t.prototype.pause=function(){var t=this._state===Ln;return t&&this._transition(Mn),t},t.prototype.cancel=function(){var t=this._state===Ln||this._state===Mn;return t&&this._transition(Un),t},t}(),Sr=function(){function t(t,e){this._service=t,this._location=e instanceof er?e:er.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new er(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return rr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new er(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw In(t)},t}();function Ir(t){var e={prefixes:[],items:[]};return xr(t,e).then(function(){return e})}function xr(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o;return Object(dn.d)(this,function(s){switch(s.label){case 0:return[4,jr(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,xr(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function jr(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i;return Object(dn.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Xn("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=ir(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new fr(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=nr(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new er(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new er(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return dr(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=gr(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}})})}function Ar(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new er(t._location.bucket,n);return new Sr(t.storage,r)}var kr=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Pr=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new kr(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new kr(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new kr(t,i,i._ref))}:{next:e.next?function(t){return e.next(new kr(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Rr=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new Nr(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new Nr(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Nr=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Ar(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Pr(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new Tr(t,new tr(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=An.RAW),this._throwIfRoot("putString"),new Pr(function(t,e,n,r){void 0===n&&(n=An.RAW),t._throwIfRoot("putString");var i=Pn(n,e),o=Object(dn.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new Tr(t,new tr(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return Ir(this._delegate).then(function(e){return new Rr(e,t.storage)})},t.prototype.list=function(t){var e=this;return jr(this._delegate,t).then(function(t){return new Rr(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=vr(t.storage,t._location,cr()),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r;return Object(dn.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=ir(e.fullServerUrl()),o=hr(n,r),s=t.maxOperationRetryTime,a=new fr(i,"PATCH",pr(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=yr(e),a}(t.storage,t._location,e,cr()),[2,t.storage.makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=ir(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new fr(r,"GET",function(t,e){return function(n,r){var i=lr(t,r,e);return dr(null!==i),function(t,e){var n=nr(e);if(null===n)return null;if(!Qn(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return ir("/b/"+i(t.bucket)+"/o/"+i(n))+or({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=yr(e),o}(t.storage,t._location,cr()),[2,t.storage.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new vn("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=ir(e.fullServerUrl()),r=new fr(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=yr(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw In(t)},t}(),Dr=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Lr=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=Cn()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Sn():En():new vn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Mr(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Mr(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Kn.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Mr(s,n))}else{var a=n.getErrorCode()===Kn.ABORT;e(!1,new Mr(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(dn.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(dn.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Mr=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Fr(t){return/^[A-Za-z]+:\/\//.test(t)}function Vr(t,e){if(t instanceof Br){var n=t;if(null==n._bucket)throw new vn("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Sr(n,n._bucket);return null!=e?Vr(r,e):r}if(void 0!==e){if(e.includes(".."))throw Tn('`path` param cannot contain ".."');return Ar(t,e)}return t}function Ur(t,e){if(e&&Fr(e)){if(t instanceof Br)return new Sr(t,e);throw Tn("To use ref(service, url), the first argument must be a Storage instance.")}return Vr(t,e)}var qr,Hr,Br=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?er.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:er.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Xn("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Xn("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(dn.b)(this,void 0,void 0,function(){var t,e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new Sr(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new Dr(Sn());var r=function(t,e,n,r){var i=or(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==fn.a?fn.a.SDK_VERSION:"AppManager")}(s),new Lr(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}(),Wr=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Fr(t))throw Tn("ref() expected a child path but got a URL, use refFromURL instead.");return new Nr(Ur(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Fr(t))throw Tn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{er.makeFromUrl(t)}catch(e){throw Tn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nr(Ur(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Kr(t){const e=function(t){return new yt.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=nn.a){return n=>n.lift(new rn(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(mt.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function zr(t,e,n){return{getDownloadURL:()=>Object(tn.a)(void 0).pipe(Object(an.b)(e.outsideAngular),cn(()=>t.getDownloadURL()),n),getMetadata:()=>Object(tn.a)(void 0).pipe(Object(an.b)(e.outsideAngular),cn(()=>t.getMetadata()),n),delete:()=>Object(_t.a)(t.delete()),child:r=>zr(t.child(r),e,n),updateMetadata:e=>Object(_t.a)(t.updateMetadata(e)),put:(e,n)=>Kr(t.put(e,n)),putString:(e,n,r)=>Kr(t.putString(e,n,r)),listAll:()=>Object(_t.a)(t.listAll())}}Hr={TaskState:Bn,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:An,Storage:Br,Reference:Nr},(qr=fn.a).INTERNAL.registerComponent(new gn.a("storage",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Wr(n,new Br(n,r,new Gn,e))},"PUBLIC").setServiceProps(Hr).setMultipleInstances(!0)),qr.registerVersion("@firebase/storage","0.4.2");const Gr=new r.q("angularfire2.storageBucket"),Qr=new r.q("angularfire2.storage.maxUploadRetryTime"),$r=new r.q("angularfire2.storage.maxOperationRetryTime");let Yr=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Ze.d(i),this.keepUnstableUntilFirst=Object(Ze.h)(this.schedulers);const a=Object(Ze.g)(t,i,e);this.storage=Object(Ze.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return zr(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return zr(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return zr(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ze.c),r.Pb(Ze.b,8),r.Pb(Gr,8),r.Pb(r.B),r.Pb(r.z),r.Pb(Qr,8),r.Pb($r,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ze.c),Object(r.Pb)(Ze.b,8),Object(r.Pb)(Gr,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(Qr,8),Object(r.Pb)($r,8))},token:t,providedIn:"any"}),t})(),Xr=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),Jr=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Yr],imports:[Xr]}),t})();var Zr=n("bHdf");function ti(){return Object(Zr.a)(1)}function ei(...t){return ti()(Object(tn.a)(...t))}var ni=n("z+Ro");function ri(...t){const e=t[t.length-1];return Object(ni.a)(e)?(t.pop(),n=>ei(t,n,e)):e=>ei(t,e)}function ii(){return t=>t.lift(new oi)}class oi{call(t,e){return e.subscribe(new si(t))}}class si extends en.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function ai(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ui(t,e,n))}}class ui{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ci(t,this.accumulator,this.seed,this.hasSeed))}}class ci extends en.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function li(t,e){return n=>n.lift(new hi(t,e))}class hi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new fi(t,this.compare,this.keySelector))}}class fi extends en.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function di(t,e){return function(n){return n.lift(new pi(t,e))}}class pi{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new gi(t,this.predicate,this.thisArg))}}class gi extends en.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var yi=n("Jgta"),vi=n("q/0M"),mi=function(t,e){return(mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function bi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var _i,wi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ci=Ci||{},Ei=wi||self;function Oi(){}function Ti(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Si(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ii="closure_uid_"+(1e9*Math.random()>>>0),xi=0;function ji(t,e,n){return t.call.apply(t.bind,arguments)}function Ai(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ki(t,e,n){return(ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ji:Ai).apply(null,arguments)}function Pi(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ri(){return Date.now()}function Ni(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Di(){this.j=this.j,this.i=this.i}Di.prototype.j=!1,Di.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Ii)&&t[Ii]||(t[Ii]=++xi)}(this)},Di.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Li=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Mi=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Fi(t){return Array.prototype.concat.apply([],arguments)}function Vi(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ui(t){return/^[\s\xa0]*$/.test(t)}var qi,Hi=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Bi(t,e){return-1!=t.indexOf(e)}function Wi(t,e){return t<e?-1:t>e?1:0}t:{var Ki=Ei.navigator;if(Ki){var zi=Ki.userAgent;if(zi){qi=zi;break t}}qi=""}function Gi(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Qi(t){var e={};for(var n in t)e[n]=t[n];return e}var $i="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yi(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$i.length;o++)n=$i[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xi(t){return Xi[" "](t),t}Xi[" "]=Oi;var Ji,Zi,to=Bi(qi,"Opera"),eo=Bi(qi,"Trident")||Bi(qi,"MSIE"),no=Bi(qi,"Edge"),ro=no||eo,io=Bi(qi,"Gecko")&&!(Bi(qi.toLowerCase(),"webkit")&&!Bi(qi,"Edge"))&&!(Bi(qi,"Trident")||Bi(qi,"MSIE"))&&!Bi(qi,"Edge"),oo=Bi(qi.toLowerCase(),"webkit")&&!Bi(qi,"Edge");function so(){var t=Ei.document;return t?t.documentMode:void 0}t:{var ao="",uo=(Zi=qi,io?/rv:([^\);]+)(\)|;)/.exec(Zi):no?/Edge\/([\d\.]+)/.exec(Zi):eo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Zi):oo?/WebKit\/(\S+)/.exec(Zi):to?/(?:Version)[ \/]?(\S+)/.exec(Zi):void 0);if(uo&&(ao=uo?uo[1]:""),eo){var co=so();if(null!=co&&co>parseFloat(ao)){Ji=String(co);break t}}Ji=ao}var lo={};function ho(t){return function(t,e){var n=lo;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Hi(String(Ji)).split("."),r=Hi(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Wi(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Wi(0==s[2].length,0==a[2].length)||Wi(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var fo=Ei.document&&eo&&(so()||parseInt(Ji,10))||void 0,po=!eo||9<=Number(fo),go=eo&&!ho("9"),yo=function(){if(!Ei.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ei.addEventListener("test",Oi,e),Ei.removeEventListener("test",Oi,e)}catch(n){}return t}();function vo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function mo(t,e){if(vo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(io){t:{try{Xi(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}vo.prototype.b=function(){this.defaultPrevented=!0},Ni(mo,vo);var bo={2:"touch",3:"pen",4:"mouse"};mo.prototype.b=function(){mo.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,go)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var _o="closure_listenable_"+(1e6*Math.random()|0),wo=0;function Co(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++wo,this.Y=this.Z=!1}function Eo(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Oo(t){this.src=t,this.a={},this.b=0}function To(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Li(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Eo(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function So(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Oo.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=So(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Co(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Io="closure_lm_"+(1e6*Math.random()|0),xo={};function jo(t,e,n,r,i){if(r&&r.once)return ko(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)jo(t,e[o],n,r,i);return null}return n=Vo(n),t&&t[_o]?t.va(e,n,Si(r)?!!r.capture:!!r,i):Ao(t,e,n,!1,r,i)}function Ao(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Si(i)?!!i.capture:!!i;if(s&&!po)return null;var a=Mo(t);if(a||(t[Io]=a=new Oo(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Lo,e=po?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(No(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ko(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ko(t,e[o],n,r,i);return null}return n=Vo(n),t&&t[_o]?t.wa(e,n,Si(r)?!!r.capture:!!r,i):Ao(t,e,n,!0,r,i)}function Po(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Po(t,e[o],n,r,i);else r=Si(r)?!!r.capture:!!r,n=Vo(n),t&&t[_o]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=So(o=t.a[e],n,r,i))&&(Eo(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Mo(t))&&(e=t.a[e.toString()],t=-1,e&&(t=So(e,n,r,i)),(n=-1<t?e[t]:null)&&Ro(n))}function Ro(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[_o])To(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(No(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mo(e))?(To(n,t),0==n.b&&(n.src=null,e[Io]=null)):Eo(t)}}}function No(t){return t in xo?xo[t]:xo[t]="on"+t}function Do(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ro(t),n.call(r,e)}function Lo(t,e){if(t.Y)return!0;if(!po){if(!e)t:{e=["window","event"];for(var n=Ei,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Do(t,e=new mo(e,this))}return Do(t,new mo(e,this))}function Mo(t){return(t=t[Io])instanceof Oo?t:null}var Fo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vo(t){return"function"==typeof t?t:(t[Fo]||(t[Fo]=function(e){return t.handleEvent(e)}),t[Fo])}function Uo(){Di.call(this),this.c=new Oo(this),this.J=this,this.C=null}function qo(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new vo(e,t);else if(e instanceof vo)e.target=e.target||t;else{var i=e;Yi(e=new vo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ho(s,r,!0,e)&&i}if(i=Ho(s=e.a=t,r,!0,e)&&i,i=Ho(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ho(s=e.a=n[o],r,!1,e)&&i}function Ho(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&To(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ni(Uo,Di),Uo.prototype[_o]=!0,(_i=Uo.prototype).addEventListener=function(t,e,n,r){jo(this,t,e,n,r)},_i.removeEventListener=function(t,e,n,r){Po(this,t,e,n,r)},_i.G=function(){if(Uo.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Eo(n[r]);delete e.a[t],e.b--}}this.C=null},_i.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},_i.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Bo=Ei.JSON.stringify;function Wo(){this.b=this.a=null}var Ko,zo=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Qo},function(t){t.reset()});function Go(){var t=Jo,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Qo(){this.next=this.b=this.a=null}function $o(t){Ei.setTimeout(function(){throw t},0)}function Yo(t,e){Ko||function(){var t=Ei.Promise.resolve(void 0);Ko=function(){t.then(Zo)}}(),Xo||(Ko(),Xo=!0),Jo.add(t,e)}Wo.prototype.add=function(t,e){var n=zo.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Qo.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Qo.prototype.reset=function(){this.next=this.b=this.a=null};var Xo=!1,Jo=new Wo;function Zo(){for(var t;t=Go();){try{t.a.call(t.b)}catch(n){$o(n)}var e=zo;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Xo=!1}function ts(t,e){Uo.call(this),this.b=t||1,this.a=e||Ei,this.f=ki(this.Za,this),this.g=Ri()}function es(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ns(t,e,n){if("function"==typeof t)n&&(t=ki(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ki(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ei.setTimeout(t,e||0)}function rs(t){t.a=ns(function(){t.a=null,t.c&&(t.c=!1,rs(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ni(ts,Uo),(_i=ts.prototype).aa=!1,_i.M=null,_i.Za=function(){if(this.aa){var t=Ri()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),qo(this,"tick"),this.aa&&(es(this),this.start()))}},_i.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ri())},_i.G=function(){ts.X.G.call(this),es(this),delete this.a};var is=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}mi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:rs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ei.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Di);function os(t){Di.call(this),this.b=t,this.a={}}Ni(os,Di);var ss=[];function as(t,e,n,r){Array.isArray(n)||(n&&(ss[0]=n.toString()),n=ss);for(var i=0;i<n.length;i++){var o=jo(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function us(t){Gi(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ro(t)},t),t.a={}}function cs(){this.a=!0}function ls(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Bo(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}os.prototype.G=function(){os.X.G.call(this),us(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cs.prototype.info=function(){};var hs={},fs=null;function ds(){return fs=fs||new Uo}function ps(t){vo.call(this,hs.Fa,t)}function gs(t){var e=ds();qo(e,new ps(e,t))}function ys(t,e){vo.call(this,hs.STAT_EVENT,t),this.stat=e}function vs(t){var e=ds();qo(e,new ys(e,t))}function ms(t){vo.call(this,hs.Ga,t)}function bs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ei.setTimeout(function(){t()},e)}hs.Fa="serverreachability",Ni(ps,vo),hs.STAT_EVENT="statevent",Ni(ys,vo),hs.Ga="timingevent",Ni(ms,vo);var _s={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ws={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Cs(){}function Es(){}Cs.prototype.a=null;var Os,Ts={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ss(){vo.call(this,"d")}function Is(){vo.call(this,"c")}function xs(){}function js(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new os(this),this.P=As,this.R=new ts(t=ro?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ni(Ss,vo),Ni(Is,vo),Ni(xs,Cs),Os=new xs;var As=45e3,ks={},Ps={};function Rs(t,e,n){t.H=1,t.i=ea($s(e)),t.j=n,t.I=!0,Ns(t,null)}function Ns(t,e){t.u=Ri(),Ms(t),t.l=$s(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),pa(n.b,"t",r),t.D=0,t.a=uu(t.g,t.g.C?e:null),0<t.O&&(t.F=new is(ki(t.Ca,t,t.a),t.O)),as(t.J,t.a,"readystatechange",t.Xa),e=t.B?Qi(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),gs(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ds(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ls(t,n);if(i==Ps){4==e&&(t.h=4,vs(14),r=!1),ls(t.c,t.f,null,"[Incomplete Response]");break}if(i==ks){t.h=4,vs(15),ls(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ls(t.c,t.f,i,null),Hs(t,i)}4==e&&0==n.length&&(t.h=1,vs(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),tu(e),e.F=!0,vs(11))):(ls(t.c,t.f,n,"[Invalid Chunked Response]"),qs(t),Us(t))}function Ls(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ps:(n=Number(e.substring(n,r)),isNaN(n)?ks:(r+=1)+n>e.length?Ps:(e=e.substr(r,n),t.D=r+n,e))}function Ms(t){t.T=Ri()+t.P,Fs(t,t.P)}function Fs(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=bs(ki(t.Va,t),e)}function Vs(t){t.o&&(Ei.clearTimeout(t.o),t.o=null)}function Us(t){0==t.g.v||t.A||ru(t.g,t)}function qs(t){Vs(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,es(t.R),us(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Hs(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||wa(n.b,t)))if(n.I=t.N,!t.C&&wa(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Yv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;nu(n),Ka(n)}Za(n),vs(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=bs(ki(n.Sa,n),6e3));if(1>=_a(n.b)&&n.ea){try{n.ea()}catch(Yv){}n.ea=void 0}}else ou(n,11)}else if((t.C||n.a==t)&&nu(n),!Ui(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Bi(l,"spdy")||Bi(l,"quic")||Bi(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Ca(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ta(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ri()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=au(u,u.C?u.ga:null,u.fa),d.C){Ea(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Vs(p),Ms(p)),u.a=d}else Ja(u);0<n.g.length&&Qa(n)}else"stop"!=i[0]&&"close"!=i[0]||ou(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ou(n,7):Wa(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);gs(4)}catch(Yv){}}function Bs(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ti(t)||"string"==typeof t)Mi(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ti(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ti(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ws(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ws)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ks(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];zs(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)zs(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function zs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(_i=js.prototype).setTimeout=function(t){this.P=t},_i.Xa=function(t){t=t.target;var e=this.F;e&&3==Ua(t)?e.f():this.Ca(t)},_i.Ca=function(t){try{if(t==this.a)t:{var e=Ua(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ro&&!this.a.$())){this.A||4!=e||7==n||gs(8==n||0>=r?3:2),Vs(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ui(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,vs(12),qs(this),Us(this);break t}ls(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Hs(this,u)}this.I?(Ds(this,e,o),ro&&this.b&&3==e&&(as(this.J,this.R,"tick",this.Wa),this.R.start())):(ls(this.c,this.f,o,null),Hs(this,o)),4==e&&qs(this),this.b&&!this.A&&(4==e?ru(this.g,this):(this.b=!1,Ms(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,vs(12)):(this.h=0,vs(13)),qs(this),Us(this)}}}catch(c){}},_i.Wa=function(){if(this.a){var t=Ua(this.a),e=this.a.$();this.D<e.length&&(Vs(this),Ds(this,t,e),this.b&&4!=t&&Ms(this))}},_i.cancel=function(){this.A=!0,qs(this)},_i.Va=function(){this.o=null;var t=Ri();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(gs(3),vs(17)),qs(this),this.h=2,Us(this)):Fs(this,this.T-t)},(_i=Ws.prototype).K=function(){Ks(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},_i.L=function(){return Ks(this),this.a.concat()},_i.get=function(t,e){return zs(this.b,t)?this.b[t]:e},_i.set=function(t,e){zs(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},_i.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Gs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qs(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Qs){this.a=void 0!==e?e:t.a,Ys(this,t.f),this.j=t.j,Xs(this,t.c),Js(this,t.h),this.g=t.g,e=t.b;var n=new la;n.c=e.c,e.a&&(n.a=new Ws(e.a),n.b=e.b),Zs(this,n),this.i=t.i}else t&&(n=String(t).match(Gs))?(this.a=!!e,Ys(this,n[1]||"",!0),this.j=na(n[2]||""),Xs(this,n[3]||"",!0),Js(this,n[4]),this.g=na(n[5]||"",!0),Zs(this,n[6]||"",!0),this.i=na(n[7]||"")):(this.a=!!e,this.b=new la(null,this.a))}function $s(t){return new Qs(t)}function Ys(t,e,n){t.f=n?na(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Xs(t,e,n){t.c=n?na(e,!0):e}function Js(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Zs(t,e,n){e instanceof la?(t.b=e,function(t,e){e&&!t.f&&(ha(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(fa(this,e),pa(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ra(e,ua)),t.b=new la(e,t.a))}function ta(t,e,n){t.b.set(e,n)}function ea(t){return ta(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ri()).toString(36)),t}function na(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ra(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ia),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ia(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Qs.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ra(e,oa,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ra(e,oa,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ra(n,"/"==n.charAt(0)?aa:sa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ra(n,ca)),t.join("")};var oa=/[#\/\?@]/g,sa=/[#\?:]/g,aa=/[#\?]/g,ua=/[#\?@]/g,ca=/#/g;function la(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ha(t){t.a||(t.a=new Ws,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function fa(t,e){ha(t),e=ga(t,e),zs(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,zs((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ks(t)))}function da(t,e){return ha(t),e=ga(t,e),zs(t.a.b,e)}function pa(t,e,n){fa(t,e),0<n.length&&(t.c=null,t.a.set(ga(t,e),Vi(n)),t.b+=n.length)}function ga(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(_i=la.prototype).add=function(t,e){ha(this),this.c=null,t=ga(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},_i.forEach=function(t,e){ha(this),this.a.forEach(function(n,r){Mi(n,function(n){t.call(e,n,r,this)},this)},this)},_i.L=function(){ha(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},_i.K=function(t){ha(this);var e=[];if("string"==typeof t)da(this,t)&&(e=Fi(e,this.a.get(ga(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Fi(e,t[n])}return e},_i.set=function(t,e){return ha(this),this.c=null,da(this,t=ga(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},_i.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},_i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ya=function(){return function(t,e){this.b=t,this.a=e}}();function va(t){this.g=t||ma,t=Ei.PerformanceNavigationTiming?0<(t=Ei.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ei.ia&&Ei.ia.ya&&Ei.ia.ya()&&Ei.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ma=10;function ba(t){return!!t.b||!!t.a&&t.a.size>=t.f}function _a(t){return t.b?1:t.a?t.a.size:0}function wa(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ca(t,e){t.a?t.a.add(e):t.b=e}function Ea(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Oa(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=bi(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Vi(t.c)}function Ta(){}function Sa(){this.a=new Ta}function Ia(t,e,n){var r=n||"";try{Bs(t,function(t,n){var i=t;Si(t)&&(i=Bo(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xa(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}va.prototype.cancel=function(){var t,e;if(this.c=Oa(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=bi(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ta.prototype.stringify=function(t){return Ei.JSON.stringify(t,void 0)},Ta.prototype.parse=function(t){return Ei.JSON.parse(t,void 0)};var ja=Ei.JSON.parse;function Aa(t){Uo.call(this),this.headers=new Ws,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ka,this.D=this.F=!1}Ni(Aa,Uo);var ka="",Pa=/^https?$/i,Ra=["POST","PUT"];function Na(t){return"content-type"==t.toLowerCase()}function Da(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,La(t),Fa(t)}function La(t){t.u||(t.u=!0,qo(t,"complete"),qo(t,"error"))}function Ma(t){if(t.b&&void 0!==Ci&&(!t.s[1]||4!=Ua(t)||2!=t.W()))if(t.l&&4==Ua(t))ns(t.za,0,t);else if(qo(t,"readystatechange"),4==Ua(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Gs)[1]||null;if(!o&&Ei.self&&Ei.self.location){var s=Ei.self.location.protocol;o=s.substr(0,s.length-1)}i=!Pa.test(o?o.toLowerCase():"")}e=i}if(e)qo(t,"complete"),qo(t,"success");else{t.h=6;try{var a=2<Ua(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",La(t)}}finally{Fa(t)}}}function Fa(t,e){if(t.a){Va(t);var n=t.a,r=t.s[0]?Oi:null;t.a=null,t.s=null,e||qo(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Va(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ei.clearTimeout(t.m),t.m=null)}function Ua(t){return t.a?t.a.readyState:0}function qa(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Gi(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ta(t,e,n))}function Ha(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ba(t){this.pa=0,this.g=[],this.c=new cs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ha("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ha("baseRetryDelayMs",5e3,t),this.Ra=Ha("retryDelaySeedMs",1e4,t),this.Ma=Ha("forwardChannelMaxRetries",2,t),this.ma=Ha("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new va(t&&t.concurrentRequestLimit),this.ka=new Sa,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Wa(t){if(za(t),3==t.v){var e=t.R++,n=$s(t.B);ta(n,"SID",t.J),ta(n,"RID",e),ta(n,"TYPE","terminate"),Ya(t,n),(e=new js(t,t.c,e,void 0)).H=2,e.i=ea($s(n)),n=!1,Ei.navigator&&Ei.navigator.sendBeacon&&(n=Ei.navigator.sendBeacon(e.i.toString(),"")),!n&&Ei.Image&&((new Image).src=e.i,n=!0),n||(e.a=uu(e.g,null),e.a.ba(e.i)),e.u=Ri(),Ms(e)}su(t)}function Ka(t){t.a&&(tu(t),t.a.cancel(),t.a=null)}function za(t){Ka(t),t.j&&(Ei.clearTimeout(t.j),t.j=null),nu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ei.clearTimeout(t.h),t.h=null)}function Ga(t,e){t.g.push(new ya(t.Oa++,e)),3==t.v&&Qa(t)}function Qa(t){ba(t.b)||t.h||(t.h=!0,Yo(t.Ba,t),t.u=0)}function $a(t,e){var n;n=e?e.f:t.R++;var r=$s(t.B);ta(r,"SID",t.J),ta(r,"RID",n),ta(r,"AID",t.P),Ya(t,r),t.i&&t.l&&qa(r,t.i,t.l),n=new js(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Xa(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ca(t.b,n),Rs(n,r,e)}function Ya(t,e){t.f&&Bs({},function(t,n){ta(e,n,t)})}function Xa(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ki(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Ia(l,s,"req"+c+"_")}catch(Vu){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ja(t){t.a||t.j||(t.T=1,Yo(t.Aa,t),t.o=0)}function Za(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=bs(ki(t.Aa,t),iu(t,t.o)),t.o++,0))}function tu(t){null!=t.s&&(Ei.clearTimeout(t.s),t.s=null)}function eu(t){t.a=new js(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=$s(t.la);ta(e,"RID","rpc"),ta(e,"SID",t.J),ta(e,"CI",t.H?"0":"1"),ta(e,"AID",t.P),Ya(t,e),ta(e,"TYPE","xmlhttp"),t.i&&t.l&&qa(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ea($s(e)),n.j=null,n.I=!0,Ns(n,t)}function nu(t){null!=t.m&&(Ei.clearTimeout(t.m),t.m=null)}function ru(t,e){var n=null;if(t.a==e){nu(t),tu(t),t.a=null;var r=2}else{if(!wa(t.b,e))return;n=e.s,Ea(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ri()-e.u;var i=t.u;qo(r=ds(),new ms(r,n,e,i)),Qa(t)}else Ja(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(_a(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=bs(ki(t.Ba,t,e),iu(t,t.u)),t.u++,0)))}(t,e)||2==r&&Za(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:ou(t,5);break;case 4:ou(t,10);break;case 3:ou(t,6);break;default:ou(t,2)}}function iu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function ou(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ki(t.Ya,t);n||(n=new Qs("//www.google.com/images/cleardot.gif"),Ei.location&&"http"==Ei.location.protocol||Ys(n,"https"),ea(n)),function(t,e){var n=new cs;if(Ei.Image){var r=new Image;r.onload=Pi(xa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Pi(xa,n,r,"TestLoadImage: error",!1,e),r.onabort=Pi(xa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pi(xa,n,r,"TestLoadImage: timeout",!1,e),Ei.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else vs(2);t.v=0,t.f&&t.f.ra(e),su(t),za(t)}function su(t){t.v=0,t.I=-1,t.f&&(0==Oa(t.b).length&&0==t.g.length||(t.b.c.length=0,Vi(t.g),t.g.length=0),t.f.qa())}function au(t,e,n){var r=function(t){return t instanceof Qs?$s(t):new Qs(t,void 0)}(n);if(""!=r.c)e&&Xs(r,e+"."+r.c),Js(r,r.h);else{var i=Ei.location;r=function(t,e,n,r){var i=new Qs(null,void 0);return t&&Ys(i,t),e&&Xs(i,e),n&&Js(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Gi(t.V,function(t,e){ta(r,e,t)}),n=t.na,(e=t.A)&&n&&ta(r,e,n),ta(r,"VER",t.ha),Ya(t,r),r}function uu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Aa(t.Na)).F=t.C,e}function cu(){}function lu(){if(eo&&!(10<=Number(fo)))throw Error("Environmental error: no available transport.")}function hu(t,e){Uo.call(this),this.a=new Ba(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ui(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ui(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new pu(this)}function fu(t){Ss.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function du(){Is.call(this),this.status=1}function pu(t){this.a=t}(_i=Aa.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Os),this.a.onreadystatechange=ki(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Da(this,o)}t=n||"";var i=new Ws(this.headers);r&&Bs(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Na,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ei.FormData&&t instanceof Ei.FormData,!(0<=Li(Ra,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Va(this),0<this.o&&((this.D=function(t){return eo&&ho(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ki(this.xa,this)):this.m=ns(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Da(this,o)}},_i.xa=function(){void 0!==Ci&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,qo(this,"timeout"),this.abort(8))},_i.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,qo(this,"complete"),qo(this,"abort"),Fa(this))},_i.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Fa(this,!0)),Aa.X.G.call(this)},_i.za=function(){this.j||(this.A||this.l||this.g?Ma(this):this.Ua())},_i.Ua=function(){Ma(this)},_i.W=function(){try{return 2<Ua(this)?this.a.status:-1}catch(Zi){return-1}},_i.$=function(){try{return this.a?this.a.responseText:""}catch(Zi){return""}},_i.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ja(e)}},_i.ua=function(){return this.h},_i.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(_i=Ba.prototype).ha=8,_i.v=1,_i.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new js(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Yi(r=Qi(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Xa(this,n,e),ta(i=$s(this.B),"RID",t),ta(i,"CVER",22),this.A&&ta(i,"X-HTTP-Session-Id",this.A),Ya(this,i),this.i&&r&&qa(i,this.i,r),Ca(this.b,n),this.Ia&&ta(i,"TYPE","init"),this.da?(ta(i,"$req",e),ta(i,"SID","null"),n.U=!0,Rs(n,i,null)):Rs(n,i,e),this.v=2}}else 3==this.v&&(t?$a(this,t):0==this.g.length||ba(this.b)||$a(this))},_i.Aa=function(){if(this.j=null,eu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=bs(ki(this.Ta,this),t)}},_i.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,vs(10),Ka(this),eu(this))},_i.Sa=function(){null!=this.m&&(this.m=null,Ka(this),Za(this),vs(19))},_i.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),vs(2)):(this.c.info("Failed to ping google.com"),vs(1))},(_i=cu.prototype).ta=function(){},_i.sa=function(){},_i.ra=function(){},_i.qa=function(){},_i.Ja=function(){},lu.prototype.a=function(t,e){return new hu(t,e)},Ni(hu,Uo),hu.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;vs(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=au(t,null,t.fa),Qa(t)},hu.prototype.close=function(){Wa(this.a)},hu.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ga(this.a,e)}else this.l?((e={}).__data__=Bo(t),Ga(this.a,e)):Ga(this.a,t)},hu.prototype.G=function(){this.a.f=null,delete this.f,Wa(this.a),delete this.a,hu.X.G.call(this)},Ni(fu,Ss),Ni(du,Is),Ni(pu,cu),pu.prototype.ta=function(){qo(this.a,"a")},pu.prototype.sa=function(t){qo(this.a,new fu(t))},pu.prototype.ra=function(t){qo(this.a,new du(t))},pu.prototype.qa=function(){qo(this.a,"b")},lu.prototype.createWebChannel=lu.prototype.a,hu.prototype.send=hu.prototype.h,hu.prototype.open=hu.prototype.g,hu.prototype.close=hu.prototype.close,_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,ws.COMPLETE="complete",Es.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",Uo.prototype.listen=Uo.prototype.va,Aa.prototype.listenOnce=Aa.prototype.wa,Aa.prototype.getLastError=Aa.prototype.Qa,Aa.prototype.getLastErrorCode=Aa.prototype.ua,Aa.prototype.getStatus=Aa.prototype.W,Aa.prototype.getResponseJson=Aa.prototype.Pa,Aa.prototype.getResponseText=Aa.prototype.$,Aa.prototype.send=Aa.prototype.ba;var gu=_s,yu=ws,vu=hs,mu=Es,bu=Aa,_u=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},wu=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Cu=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Cu.UNAUTHENTICATED=new Cu(null),Cu.l=new Cu("google-credentials-uid"),Cu._=new Cu("first-party-uid");var Eu=new vi.b("@firebase/firestore");function Ou(){return Eu.logLevel}function Tu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Eu.logLevel<=vi.a.DEBUG){var r=e.map(xu);Eu.debug.apply(Eu,Object(dn.g)(["Firestore (8.1.2): "+t],r))}}function Su(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Eu.logLevel<=vi.a.ERROR){var r=e.map(xu);Eu.error.apply(Eu,Object(dn.g)(["Firestore (8.1.2): "+t],r))}}function Iu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Eu.logLevel<=vi.a.WARN){var r=e.map(xu);Eu.warn.apply(Eu,Object(dn.g)(["Firestore (8.1.2): "+t],r))}}function xu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function ju(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.2) INTERNAL ASSERTION FAILED: "+t;throw Su(e),new Error(e)}function Au(t,e){t||ju()}function ku(t,e){return t}var Pu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ru=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(dn.c)(e,t),e}(Error),Nu=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},Du=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(Cu.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),Lu=function(){function t(t){var e=this;this.P=null,this.currentUser=Cu.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.V!==e?(Tu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Au("string"==typeof n.accessToken),new Nu(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return Au(null===t||"string"==typeof t),new Cu(t)},t}(),Mu=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=Cu._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Fu=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new Mu(this.v,this.S))},t.prototype.A=function(t){t(Cu._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function Vu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Uu=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Vu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function qu(t,e){return t<e?-1:t>e?1:0}function Hu(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Bu(t){return t+"\0"}var Wu=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ru(Pu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ru(Pu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ru(Pu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ru(Pu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?qu(this.nanoseconds,t.nanoseconds):qu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ku=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new Wu(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),zu=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ju(),void 0===n?n=t.length-e:n>t.length-e&&ju(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return this.L(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.prototype.J=function(){return this.H().join("/")},e.prototype.toString=function(){return this.J()},e.Y=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.X=function(){return new e([])},e}(zu),Qu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.Z=function(t){return Qu.test(t)},e.prototype.J=function(){return this.H().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.Z(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.J()},e.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},e.et=function(){return new e(["__name__"])},e.nt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ru(Pu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ru(Pu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ru(Pu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.X=function(){return new e([])},e}(zu),Yu=function(){function t(t){this.path=t}return t.st=function(e){return new t(Gu.Y(e))},t.it=function(e){return new t(Gu.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Gu.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return Gu.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new Gu(e.slice()))},t}();function Xu(t){return null==t}function Ju(t){return 0===t&&1/t==-1/0}function Zu(t){return"number"==typeof t&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var tc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function ec(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new tc(t,e,n,r,i,o,s)}function nc(t){var e=ku(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.J()+t.op.toString()+Xc(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.J()+t.dir}(t)}).join(","),Xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Zh(e.startAt)),e.endAt&&(n+="|ub:",n+=Zh(e.endAt)),e.ut=n}return e.ut}function rc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!of(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Gc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ef(t.startAt,e.startAt)&&ef(t.endAt,e.endAt)}function ic(t){return Yu.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var oc=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.at)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return qu(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();oc.lt=new oc("");var sc,ac,uc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ku.min()),void 0===o&&(o=Ku.min()),void 0===s&&(s=oc.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),cc=function(t){this.count=t};function lc(t){switch(t){case Pu.OK:return ju();case Pu.CANCELLED:case Pu.UNKNOWN:case Pu.DEADLINE_EXCEEDED:case Pu.RESOURCE_EXHAUSTED:case Pu.INTERNAL:case Pu.UNAVAILABLE:case Pu.UNAUTHENTICATED:return!1;case Pu.INVALID_ARGUMENT:case Pu.NOT_FOUND:case Pu.ALREADY_EXISTS:case Pu.PERMISSION_DENIED:case Pu.FAILED_PRECONDITION:case Pu.ABORTED:case Pu.OUT_OF_RANGE:case Pu.UNIMPLEMENTED:case Pu.DATA_LOSS:return!0;default:return ju()}}function hc(t){if(void 0===t)return Su("GRPC error has no .code"),Pu.UNKNOWN;switch(t){case sc.OK:return Pu.OK;case sc.CANCELLED:return Pu.CANCELLED;case sc.UNKNOWN:return Pu.UNKNOWN;case sc.DEADLINE_EXCEEDED:return Pu.DEADLINE_EXCEEDED;case sc.RESOURCE_EXHAUSTED:return Pu.RESOURCE_EXHAUSTED;case sc.INTERNAL:return Pu.INTERNAL;case sc.UNAVAILABLE:return Pu.UNAVAILABLE;case sc.UNAUTHENTICATED:return Pu.UNAUTHENTICATED;case sc.INVALID_ARGUMENT:return Pu.INVALID_ARGUMENT;case sc.NOT_FOUND:return Pu.NOT_FOUND;case sc.ALREADY_EXISTS:return Pu.ALREADY_EXISTS;case sc.PERMISSION_DENIED:return Pu.PERMISSION_DENIED;case sc.FAILED_PRECONDITION:return Pu.FAILED_PRECONDITION;case sc.ABORTED:return Pu.ABORTED;case sc.OUT_OF_RANGE:return Pu.OUT_OF_RANGE;case sc.UNIMPLEMENTED:return Pu.UNIMPLEMENTED;case sc.DATA_LOSS:return Pu.DATA_LOSS;default:return ju()}}(ac=sc||(sc={}))[ac.OK=0]="OK",ac[ac.CANCELLED=1]="CANCELLED",ac[ac.UNKNOWN=2]="UNKNOWN",ac[ac.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ac[ac.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ac[ac.NOT_FOUND=5]="NOT_FOUND",ac[ac.ALREADY_EXISTS=6]="ALREADY_EXISTS",ac[ac.PERMISSION_DENIED=7]="PERMISSION_DENIED",ac[ac.UNAUTHENTICATED=16]="UNAUTHENTICATED",ac[ac.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ac[ac.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ac[ac.ABORTED=10]="ABORTED",ac[ac.OUT_OF_RANGE=11]="OUT_OF_RANGE",ac[ac.UNIMPLEMENTED=12]="UNIMPLEMENTED",ac[ac.INTERNAL=13]="INTERNAL",ac[ac.UNAVAILABLE=14]="UNAVAILABLE",ac[ac.DATA_LOSS=15]="DATA_LOSS";var fc=function(){function t(t,e){this.$=t,this.root=e||pc.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,pc.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,pc.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Pt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new dc(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new dc(this.root,t,this.$,!1)},t.prototype.vt=function(){return new dc(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new dc(this.root,t,this.$,!0)},t}(),dc=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),pc=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw ju();if(this.right.Mt())throw ju();var t=this.left.Qt();if(t!==this.right.Qt())throw ju();return t+(this.Mt()?0:1)},t}();pc.EMPTY=null,pc.RED=!0,pc.It=!1,pc.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ju()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ju()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ju()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ju()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ju()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new pc(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var gc=function(){function t(t){this.$=t,this.data=new fc(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt(function(e,n){return t(e),!1})},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new yc(this.data.yt())},t.prototype.Vt=function(t){return new yc(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),yc=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),vc=new fc(Yu.$);function mc(){return vc}function bc(){return mc()}var _c=new fc(Yu.$);function wc(){return _c}var Cc=new fc(Yu.$),Ec=new gc(Yu.$);function Oc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ec,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Tc=new gc(qu);function Sc(){return Tc}var Ic=function(){function t(t){this.$=t?function(e,n){return t(e,n)||Yu.$(e.key,n.key)}:function(t,e){return Yu.$(t.key,e.key)},this.Ht=wc(),this.Jt=new fc(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),xc=function(){function t(){this.Xt=new fc(Yu.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):ju():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt(function(e,n){t.push(n)}),t},t}(),jc=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}return t.ie=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Ic.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&Fh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ac=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,kc.he(e,n)),new t(Ku.min(),r,Sc(),mc(),Oc())},t}(),kc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(oc.lt,n,Oc(),Oc(),Oc())},t}(),Pc=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},Rc=function(t,e){this.targetId=t,this.Te=e},Nc=function(t,e,n,r){void 0===n&&(n=oc.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Dc=function(){function t(){this.Ie=0,this.me=Fc(),this.Ae=oc.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=Oc(),e=Oc(),n=Oc();return this.me.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ju()}}),new kc(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=Fc()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),Lc=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=mc(),this.Me=Mc(),this.ke=new gc(qu)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof Oh?this.Le(r,t.Ee):t.Ee instanceof Th&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Be(o[i],t.key,t.Ee)},t.prototype.qe=function(t){var e=this;this.Ue(t,function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:ju()}})},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach(function(t,r){n.Ke(r)&&e(r)})},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(ic(i))if(0===n){var o=new Yu(i.path);this.Be(e,o,new Th(o,Ku.min()))}else Au(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach(function(r,i){var o=e.Ge(i);if(o){if(r.le&&ic(o.target)){var s=new Yu(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new Th(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}});var r=Oc();this.Me.forEach(function(t,n){var i=!0;n.Wt(function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ac(t,n,this.ke,this.Oe,r);return this.Oe=mc(),this.Me=Mc(),this.ke=new gc(qu),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new Dc,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new gc(qu),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||Tu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new Dc),this.xe.Xe(t).forEach(function(n){e.Be(t,n,null)})},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function Mc(){return new fc(Yu.$)}function Fc(){return new fc(Yu.$)}function Vc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Uc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bc(t){var e=t.mapValue.fields.__previous_value__;return Hc(e)?Bc(e):e}function Wc(t){var e=Zc(t.mapValue.fields.__local_write_time__.timestampValue);return new Wu(e.seconds,e.nanos)}var Kc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hc(t)?4:10:ju()}function Gc(t,e){var n=zc(t);if(n!==zc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wc(t).isEqual(Wc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Zc(t.timestampValue),r=Zc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return el(t.bytesValue).isEqual(el(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return tl(t.geoPointValue.latitude)===tl(e.geoPointValue.latitude)&&tl(t.geoPointValue.longitude)===tl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return tl(t.integerValue)===tl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=tl(t.doubleValue),r=tl(e.doubleValue);return n===r?Ju(n)===Ju(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Hu(t.arrayValue.values||[],e.arrayValue.values||[],Gc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Vc(n)!==Vc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gc(n[i],r[i])))return!1;return!0}(t,e);default:return ju()}}function Qc(t,e){return void 0!==(t.values||[]).find(function(t){return Gc(t,e)})}function $c(t,e){var n=zc(t),r=zc(e);if(n!==r)return qu(n,r);switch(n){case 0:return 0;case 1:return qu(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=tl(t.integerValue||t.doubleValue),r=tl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Yc(t.timestampValue,e.timestampValue);case 4:return Yc(Wc(t),Wc(e));case 5:return qu(t.stringValue,e.stringValue);case 6:return function(t,e){var n=el(t),r=el(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=qu(n[i],r[i]);if(0!==o)return o}return qu(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=qu(tl(t.latitude),tl(e.latitude));return 0!==n?n:qu(tl(t.longitude),tl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=$c(n[i],r[i]);if(o)return o}return qu(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=qu(r[s],o[s]);if(0!==a)return a;var u=$c(n[r[s]],i[o[s]]);if(0!==u)return u}return qu(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ju()}}function Yc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return qu(t,e);var n=Zc(t),r=Zc(e),i=qu(n.seconds,r.seconds);return 0!==i?i:qu(n.nanos,r.nanos)}function Xc(t){return Jc(t)}function Jc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Zc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?el(t.bytesValue).toBase64():"referenceValue"in t?Yu.it(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Jc(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Jc(t.fields[o])}return e+"}"}(t.mapValue):ju();var e}function Zc(t){if(Au(!!t),"string"==typeof t){var e=0,n=Kc.exec(t);if(Au(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tl(t.seconds),nanos:tl(t.nanos)}}function tl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function el(t){return"string"==typeof t?oc.fromBase64String(t):oc.fromUint8Array(t)}function nl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function rl(t){return!!t&&"integerValue"in t}function il(t){return!!t&&"arrayValue"in t}function ol(t){return!!t&&"nullValue"in t}function sl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function al(t){return!!t&&"mapValue"in t}var ul={asc:"ASCENDING",desc:"DESCENDING"},cl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ll=function(t,e){this.t=t,this.tn=e};function hl(t){return{integerValue:""+t}}function fl(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function dl(t,e){return Zu(e)?hl(e):fl(t,e)}function pl(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function gl(t,e){return t.tn?e.toBase64():e.toUint8Array()}function yl(t,e){return pl(t,e.M())}function vl(t){return Au(!!t),Ku.N(function(t){var e=Zc(t);return new Wu(e.seconds,e.nanos)}(t))}function ml(t,e){return function(t){return new Gu(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function bl(t){var e=Gu.Y(t);return Au(Hl(e)),e}function _l(t,e){return ml(t.t,e.path)}function wl(t,e){var n=bl(e);if(n.get(1)!==t.t.projectId)throw new Ru(Pu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Ru(Pu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Yu(Tl(n))}function Cl(t,e){return ml(t.t,e)}function El(t){var e=bl(t);return 4===e.length?Gu.X():Tl(e)}function Ol(t){return new Gu(["projects",t.t.projectId,"databases",t.t.database]).J()}function Tl(t){return Au(t.length>4&&"documents"===t.get(4)),t.B(5)}function Sl(t,e,n){return{name:_l(t,e),fields:n.proto.mapValue.fields}}function Il(t,e){var n;if(e instanceof fh)n={update:Sl(t,e.key,e.value)};else if(e instanceof mh)n={delete:_l(t,e.key)};else if(e instanceof dh)n={update:Sl(t,e.key,e.data),updateMask:ql(e.en)};else if(e instanceof gh)n={transform:{document:_l(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Gl)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ql)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof Yl)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof Jl)return{fieldPath:e.field.J(),increment:n.nn};throw ju()}(0,t)})}};else{if(!(e instanceof bh))return ju();n={verify:_l(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:yl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ju()}(t,e.rn)),n}function xl(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ih.updateTime(vl(t.updateTime)):void 0!==t.exists?ih.exists(t.exists):ih.on()}(e.currentDocument):ih.on();if(e.update){var r=wl(t,e.update.name),i=new _h({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new eh((t.fieldPaths||[]).map(function(t){return $u.nt(t)}))}(e.updateMask);return new dh(r,i,o,n)}return new fh(r,i,n)}if(e.delete){var s=wl(t,e.delete);return new mh(s,n)}if(e.transform){var a=wl(t,e.transform.document),u=e.transform.fieldTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Au("REQUEST_TIME"===e.setToServerValue),n=new Gl):"appendMissingElements"in e?n=new Ql(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Yl(e.removeAllFromArray.values||[]):"increment"in e?n=new Jl(t,e.increment):ju();var r=$u.nt(e.fieldPath);return new nh(r,n)}(t,e)});return Au(!0===n.exists),new gh(a,u)}if(e.verify){var c=wl(t,e.verify);return new bh(c,n)}return ju()}function jl(t,e){return{documents:[Cl(t,e.path)]}}function Al(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Cl(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Cl(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(sl(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(ol(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sl(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(ol(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:Ll(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ml(t.field),direction:Dl(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||Xu(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Rl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Rl(e.endAt)),n}function kl(t){var e=El(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Au(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Pl(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new nf(Fl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Xu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Nl(n.startAt));var l=null;return n.endAt&&(l=Nl(n.endAt)),xh(e,i,a,s,u,"F",c,l)}function Pl(t){return t?void 0!==t.unaryFilter?[Ul(t)]:void 0!==t.fieldFilter?[Vl(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Pl(t)}).reduce(function(t,e){return t.concat(e)}):ju():[]}function Rl(t){return{before:t.before,values:t.position}}function Nl(t){return new Jh(t.values||[],!!t.before)}function Dl(t){return ul[t]}function Ll(t){return cl[t]}function Ml(t){return{fieldPath:t.J()}}function Fl(t){return $u.nt(t.fieldPath)}function Vl(t){return Bh.create(Fl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ju()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ul(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Fl(t.unaryFilter.field);return Bh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Fl(t.unaryFilter.field);return Bh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Fl(t.unaryFilter.field);return Bh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Fl(t.unaryFilter.field);return Bh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ju()}}function ql(t){var e=[];return t.fields.forEach(function(t){return e.push(t.J())}),{fieldPaths:e}}function Hl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Bl=function(){this.cn=void 0};function Wl(t,e,n){return t instanceof Gl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ql?$l(t,e):t instanceof Yl?Xl(t,e):function(t,e){var n=zl(t,e),r=Zl(n)+Zl(t.nn);return rl(n)&&rl(t.nn)?hl(r):fl(t.serializer,r)}(t,e)}function Kl(t,e,n){return t instanceof Ql?$l(t,e):t instanceof Yl?Xl(t,e):n}function zl(t,e){return t instanceof Jl?rl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e}(Bl),Ql=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(dn.c)(e,t),e}(Bl);function $l(t,e){for(var n=th(e),r=function(t){n.some(function(e){return Gc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Yl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(dn.c)(e,t),e}(Bl);function Xl(t,e){for(var n=th(e),r=function(t){n=n.filter(function(e){return!Gc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Jl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(dn.c)(e,t),e}(Bl);function Zl(t){return tl(t.integerValue||t.doubleValue)}function th(t){return il(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var eh=function(){function t(t){this.fields=t,t.sort($u.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return Hu(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),nh=function(t,e){this.field=t,this.transform=e},rh=function(t,e){this.version=t,this.transformResults=e},ih=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function oh(t,e){return void 0!==t.updateTime?e instanceof Oh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Oh}var sh=function(){};function ah(t,e,n){return t instanceof fh?function(t,e,n){return new Oh(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof dh?function(t,e,n){if(!oh(t.rn,e))return new Sh(t.key,n.version);var r=ph(t,e);return new Oh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof gh?function(t,e,n){if(Au(null!=n.transformResults),!oh(t.rn,e))return new Sh(t.key,n.version);var r=yh(0,e),i=function(t,e,n){var r=[];Au(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Oh&&(a=e.field(o.field)),r.push(Kl(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=vh(t,r.data(),i);return new Oh(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Th(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function uh(t,e,n,r){return t instanceof fh?function(t,e){if(!oh(t.rn,e))return e;var n=hh(e);return new Oh(t.key,n,t.value,{an:!0})}(t,e):t instanceof dh?function(t,e){if(!oh(t.rn,e))return e;var n=hh(e),r=ph(t,e);return new Oh(t.key,n,r,{an:!0})}(t,e):t instanceof gh?function(t,e,n,r){if(!oh(t.rn,e))return e;var i=yh(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Oh&&(c=n.field(a.field)),null===c&&r instanceof Oh&&(c=r.field(a.field)),i.push(Wl(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=vh(t,i.data(),o);return new Oh(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return oh(t.rn,e)?new Th(t.key,Ku.min()):e}(t,e)}function ch(t,e){return t instanceof gh?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Oh?e.field(o.field):void 0,a=zl(o.transform,s||null);null!=a&&(n=null==n?(new wh).set(o.field,a):n.set(o.field,a))}return n?n.hn():null}(t,e):null}function lh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||Hu(t.fieldTransforms,t.fieldTransforms,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ql&&e instanceof Ql||t instanceof Yl&&e instanceof Yl?Hu(t.elements,e.elements,Gc):t instanceof Jl&&e instanceof Jl?Gc(t.nn,e.nn):t instanceof Gl&&e instanceof Gl}(t.transform,e.transform)}(t,e)}))}function hh(t){return t instanceof Oh?t.version:Ku.min()}var fh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(dn.c)(e,t),e}(sh),dh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(dn.c)(e,t),e}(sh);function ph(t,e){return function(t,e){var n=new wh(e);return t.en.fields.forEach(function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.hn()}(t,e instanceof Oh?e.data():_h.empty())}var gh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=ih.exists(!0),r}return Object(dn.c)(e,t),e}(sh);function yh(t,e){return e}function vh(t,e,n){for(var r=new wh(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.hn()}var mh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(dn.c)(e,t),e}(sh),bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(dn.c)(e,t),e}(sh),_h=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!al(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return Gc(this.proto,t.proto)},t}(),wh=function(){function t(t){void 0===t&&(t=_h.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===zc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn($u.X(),this._n);return null!=t?new _h(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=al(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Ch(t){var e=[];return Uc(t.fields||{},function(t,n){var r=new $u([t]);if(al(n)){var i=Ch(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new eh(e)}var Eh=function(t,e){this.key=t,this.version=e},Oh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(dn.c)(e,t),e.prototype.field=function(t){return this.wn.field(t)},e.prototype.data=function(){return this.wn},e.prototype.En=function(){return this.wn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Eh),Th=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(dn.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Eh),Sh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Eh),Ih=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null};function xh(t,e,n,r,i,o,s,a){return new Ih(t,e,n,r,i,o,s,a)}function jh(t){return new Ih(t)}function Ah(t){return!Xu(t.limit)&&"F"===t.limitType}function kh(t){return!Xu(t.limit)&&"L"===t.limitType}function Ph(t){return t.Tn.length>0?t.Tn[0].field:null}function Rh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function Nh(t){return null!==t.collectionGroup}function Dh(t){var e=ku(t);if(null===e.In){e.In=[];var n=Rh(e),r=Ph(e);if(null!==n&&null===r)n.tt()||e.In.push(new nf(n)),e.In.push(new nf($u.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var a=s[o];e.In.push(a),a.field.tt()&&(i=!0)}if(!i){var u=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new nf($u.et(),u))}}}return e.In}function Lh(t){var e=ku(t);if(!e.mn)if("F"===e.limitType)e.mn=ec(e.path,e.collectionGroup,Dh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Dh(e);r<i.length;r++){var o=i[r];n.push(new nf(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Jh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Jh(e.startAt.position,!e.startAt.before):null;e.mn=ec(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.mn}function Mh(t,e,n){return new Ih(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fh(t,e){return rc(Lh(t),Lh(e))&&t.limitType===e.limitType}function Vh(t){return nc(Lh(t))+"|lt:"+t.limitType}function Uh(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.J()+" "+e.op+" "+Xc(e.value);var e}).join(", ")+"]"),Xu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Zh(t.startAt)),t.endAt&&(e+=", endAt: "+Zh(t.endAt)),"Target("+e+")"}(Lh(t))+"; limitType="+t.limitType+")"}function qh(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):Yu.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!tf(t.startAt,Dh(t),e)||t.endAt&&tf(t.endAt,Dh(t),e))}(t,e)}function Hh(t){return function(e,n){for(var r=!1,i=0,o=Dh(t);i<o.length;i++){var s=o[i],a=rf(s,e,n);if(0!==a)return a;r=r||s.field.tt()}return 0}}var Bh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(dn.c)(e,t),e.create=function(t,n,r){return t.tt()?"in"===n||"not-in"===n?this.Rn(t,n,r):new Wh(t,n,r):"array-contains"===n?new Qh(t,r):"in"===n?new $h(t,r):"not-in"===n?new Yh(t,r):"array-contains-any"===n?new Xh(t,r):new e(t,n,r)},e.Rn=function(t,e,n){return"in"===e?new Kh(t,n):new zh(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn($c(e,this.value)):null!==e&&zc(this.value)===zc(e)&&this.Pn($c(e,this.value))},e.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ju()}},e.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Wh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Yu.it(r.referenceValue),i}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=Yu.$(t.key,this.key);return this.Pn(e)},e}(Bh),Kh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Gh(0,n),r}return Object(dn.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bh),zh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Gh(0,n),r}return Object(dn.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bh);function Gh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Yu.it(t.referenceValue)})}var Qh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return il(e)&&Qc(e.arrayValue,this.value)},e}(Bh),$h=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Qc(this.value.arrayValue,e)},e}(Bh),Yh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Qc(this.value.arrayValue,e)},e}(Bh),Xh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!il(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Qc(e.value.arrayValue,t)})},e}(Bh),Jh=function(t,e){this.position=t,this.before=e};function Zh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Xc(t)}).join(",")}function tf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?Yu.$(Yu.it(s.referenceValue),n.key):$c(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ef(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Gc(t.position[n],e.position[n]))return!1;return!0}var nf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function rf(t,e,n){var r=t.field.tt()?Yu.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?$c(r,i):ju()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ju()}}function of(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var sf=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ah(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=uh(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=uh(u,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Oc())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Hu(this.mutations,t.mutations,function(t,e){return lh(t,e)})&&Hu(this.baseMutations,t.baseMutations,function(t,e){return lh(t,e)})},t}(),af=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){Au(e.mutations.length===r.length);for(var i=Cc,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),uf=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.Cn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Uc(this.Nn,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.W=function(){return qc(this.Nn)},t}(),cf=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t(function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)},function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&ju(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t(function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}})},t.prototype.Ln=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn(function(){return e(n)}):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.qn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.qn(r)},t}(),lf=function(){function t(){this.Qn=new uf(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:Ku.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?cf.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),hf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function ff(t){return new ll(t,!0)}function df(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var pf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gf=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach(function(t){return t()})},t}(),yf=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next(function(r){return n.hs(t,e,r)})},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t})},t.prototype.ls=function(t,e,n){var r=bc();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)}),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next(function(e){return n.fs(t,e)})},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next(function(r){var i=n.ls(t,e,r),o=mc();return i.forEach(function(t,e){e||(e=new Th(t,Ku.min())),o=o.Tt(t,e)}),o})},t.prototype.ws=function(t,e,n){return function(t){return Yu.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):Nh(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new Yu(e)).next(function(t){var e=wc();return t instanceof Oh&&(e=e.Tt(t.key,t)),e})},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=wc();return this.os.As(t,i).next(function(s){return cf.forEach(s,function(s){var a=function(t,e){return new Ih(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,a,n).next(function(t){t.forEach(function(t,e){o=o.Tt(t,e)})})}).next(function(){return o})})},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next(function(n){return r=n,o.rs.Rs(t,e)}).next(function(e){return o.Ps(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=uh(u,l,l,o.gn);r=h instanceof Oh?r.Tt(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){qh(e,n)||(r=r.remove(t))}),r})},t.prototype.Ps=function(t,e,n){for(var r=Oc(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof dh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Oh&&(c=c.Tt(t,e))}),c})},t}(),vf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=Oc(),i=Oc(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),mf=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();mf.Ds=-1;var bf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&Tu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,function(){return e.$s=Date.now(),t()}),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),_f=function(){function t(e,n,r){this.name=e,this.version=n,this.Ws=r,12.2===t.js(Object(pn.n)())&&Su("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Tu("SimpleDb","Removing database:",t),Sf(window.indexedDB.deleteDatabase(t)).Ln()},t.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(t.zs())return!0;var e=Object(pn.n)(),n=t.js(e),r=0<n&&n<10,i=t.Hs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},t.Ys=function(t,e){return t.store(e)},t.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Xs=function(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n=this;return Object(dn.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Tu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Cf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ru(Pu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Cf(t,n))},i.onupgradeneeded=function(t){Tu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Ws.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Tu("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return n.Zs(t)}),this.db)]}})})},t.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(dn.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(dn.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(dn.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Xs(t)];case 2:return a.db=h.sent(),e=Of.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),cf.reject(t)}).Ln(),u={},s.catch(function(){}),[4,e.ei];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Tu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),wf=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return Sf(this.ni.delete())},t}(),Cf=function(t){function e(e,n){var r=this;return(r=t.call(this,Pu.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(dn.c)(e,t),e}(Ru);function Ef(t){return"IndexedDbTransactionError"===t.name}var Of=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new hf,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new Cf(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=xf(e.target.error);n.ci.reject(new Cf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Cf(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(Tu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tf(e)},t}(),Tf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Tu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Tu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Sf(n)},t.prototype.add=function(t){return Tu("SimpleDb","ADD",this.store.name,t,t),Sf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Sf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Tu("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Tu("SimpleDb","DELETE",this.store.name,t),Sf(this.store.delete(t))},t.prototype.count=function(){return Tu("SimpleDb","COUNT",this.store.name),Sf(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.hi=function(t,e){Tu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,function(t,e,n){return n.delete()})},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new cf(function(n,r){e.onerror=function(t){var e=xf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.ai=function(t,e){var n=[];return new cf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wf(i),s=e(i.primaryKey,i.value,o);if(s instanceof cf){var a=s.catch(function(t){return o.done(),cf.reject(t)});n.push(a)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}}).next(function(){return cf.qn(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Sf(t){return new cf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=xf(t.target.error);n(e)}})}var If=!1;function xf(t){var e=_f.js(Object(pn.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ru("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return If||(If=!0,setTimeout(function(){throw r},0)),r}}return t}function jf(){return"undefined"!=typeof window?window:null}function Af(){return"undefined"!=typeof document?document:null}var kf=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new hf,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch(function(t){})}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout(function(){return e.Ai()},t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new Ru(Pu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri(function(){return null!==t.mi?(t.clearTimeout(),t.op().then(function(e){return t.Ti.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),Pf=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new bf(this,"async_queue_retry"),this.Di=function(){var e=Af();e&&Tu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=Af();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=Af();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise(function(t){}):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri(function(){return e.gi.push(t),e.ki()})},t.prototype.ki=function(){return Object(dn.b)(this,void 0,void 0,function(){var t,e=this;return Object(dn.d)(this,function(n){switch(n.label){case 0:if(0===this.gi.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return n.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!Ef(t=n.sent()))throw t;return Tu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs(function(){return e.ki()}),n.label=5;case 5:return[2]}})})},t.prototype.Fi=function(t){var e=this,n=this.Pi.then(function(){return e.vi=!0,t().catch(function(t){throw e.pi=t,e.vi=!1,Su("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.vi=!1,t})});return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=kf.Ii(this,t,e,n,function(t){return r.$i(t)});return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&ju()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(dn.b)(this,void 0,void 0,function(){var t;return Object(dn.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then(function(){e.Vi.sort(function(t,e){return t.wi-e.wi});for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()})},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function Rf(t,e){if(Su("AsyncQueue",e+": "+t),Ef(t))return new Ru(Pu.UNAVAILABLE,e+": "+t);throw t}function Nf(t,e){var n=t[1],r=e[1],i=qu(t[0],e[0]);return 0===i?qu(n,r):i}var Df=function(){function t(t){this.Ki=t,this.buffer=new gc(Nf),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Nf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Lf={zi:!1,Hi:0,Ji:0,Yi:0},Mf=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();Mf.nr=10,Mf.sr=1e3,Mf.ir=new Mf(41943040,Mf.nr,Mf.sr),Mf.rr=new Mf(-1,0,0);var Ff=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var e=this,n=this.ur?3e5:6e4;Tu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ar=this.di.Us("lru_garbage_collection",n,function(){return Object(dn.b)(e,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:this.ar=null,this.ur=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return n.sent(),[3,7];case 3:return Ef(e=n.sent())?(Tu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,fp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return n.sent(),[2]}})})})},t}(),Vf=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Tr=function(t,e){var n=this;if(0===e)return cf.resolve(mf.Ds);var r=new Df(e);return this.dr.Ue(t,function(t){return r.Gi(t.sequenceNumber)}).next(function(){return n.dr.Ir(t,function(t){return r.Gi(t)})}).next(function(){return r.maxValue})},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(Tu("LruGarbageCollector","Garbage collection skipped; disabled"),cf.resolve(Lf)):this.Pr(t).next(function(r){return r<n.params.Xi?(Tu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),Lf):n.gr(t,e)})},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.wr(t,this.params.Zi).next(function(e){return e>c.params.tr?(Tu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.tr+" from "+e),r=c.params.tr):r=e,o=Date.now(),c.Tr(t,r)}).next(function(r){return n=r,s=Date.now(),c.mr(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.Ar(t,n)}).next(function(t){return u=Date.now(),Ou()<=vi.a.DEBUG&&Tu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),cf.resolve({zi:!0,Hi:r,Ji:i,Yi:t})})},t}(),Uf=function(){function t(){}return t.prototype.yr=function(t){this.Vr=t},t.prototype.ws=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(Ku.min())?this.pr(t,e):this.Vr._s(t,r).next(function(o){var s=i.vr(e,o);return(Ah(e)||kh(e))&&i.br(e.limitType,s,r,n)?i.pr(t,e):(Ou()<=vi.a.DEBUG&&Tu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Uh(e)),i.Vr.ws(t,e,n).next(function(t){return s.forEach(function(e){t=t.Tt(e.key,e)}),t}))})},t.prototype.vr=function(t,e){var n=new gc(Hh(t));return e.forEach(function(e,r){r instanceof Oh&&qh(t,r)&&(n=n.add(r))}),n},t.prototype.br=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.pr=function(t,e){return Ou()<=vi.a.DEBUG&&Tu("QueryEngine","Using full collection scan to execute query:",Uh(e)),this.Vr.ws(t,e,Ku.min())},t}();function qf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Bf(e)),e=Hf(t.get(n),e);return Bf(e)}function Hf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Bf(t){return t+"\x01\x01"}function Wf(t){var e=t.length;if(Au(e>=2),2===e)return Au("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Gu.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ju(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ju()}o=s+2}return new Gu(r)}var Kf=function(t){this.Sr=t};function zf(t,e){if(e.document)return function(t,e,n){var r=wl(t,e.name),i=vl(e.updateTime),o=new _h({mapValue:{fields:e.fields}});return new Oh(r,i,o,{hasCommittedMutations:!!n})}(t.Sr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Yu.ct(e.noDocument.path),r=Xf(e.noDocument.readTime);return new Th(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Yu.ct(e.unknownDocument.path),o=Xf(e.unknownDocument.version);return new Sh(i,o)}return ju()}function Gf(t,e,n){var r=Qf(n),i=e.key.path.q().H();if(e instanceof Oh){var o=function(t,e){return{name:_l(t,e.key),fields:e.En().mapValue.fields,updateTime:pl(t,e.version.M())}}(t.Sr,e);return new Od(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof Th){var s=e.key.path.H(),a=Yf(e.version),u=e.hasCommittedMutations;return new Od(null,new Cd(s,a),null,u,r,i)}if(e instanceof Sh){var c=e.key.path.H(),l=Yf(e.version);return new Od(new Ed(c,l),null,null,!0,r,i)}return ju()}function Qf(t){var e=t.M();return[e.seconds,e.nanoseconds]}function $f(t){var e=new Wu(t[0],t[1]);return Ku.N(e)}function Yf(t){var e=t.M();return new vd(e.seconds,e.nanoseconds)}function Xf(t){var e=new Wu(t.seconds,t.nanoseconds);return Ku.N(e)}function Jf(t,e){var n=(e.baseMutations||[]).map(function(e){return xl(t.Sr,e)}),r=e.mutations.map(function(e){return xl(t.Sr,e)}),i=Wu.fromMillis(e.localWriteTimeMs);return new sf(e.batchId,i,n,r)}function Zf(t){var e,n,r=Xf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Xf(t.lastLimboFreeSnapshotVersion):Ku.min();return void 0!==t.query.documents?(Au(1===(n=t.query).documents.length),e=Lh(jh(El(n.documents[0])))):e=function(t){return Lh(kl(t))}(t.query),new uc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,oc.fromBase64String(t.resumeToken))}function td(t,e){var n,r=Yf(e.ft),i=Yf(e.lastLimboFreeSnapshotVersion);n=ic(e.target)?jl(t.Sr,e.target):Al(t.Sr,e.target);var o=e.resumeToken.toBase64();return new Sd(e.targetId,nc(e.target),r,o,e.sequenceNumber,i,n)}function ed(t){var e=kl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Mh(e,e.limit,"L"):e}var nd=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Dr=r,this.Cr={}}return t.Nr=function(e,n,r,i){return Au(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.Fr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return od(t)._i({index:_d.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Or=function(t,e,n,r){var i=this,o=sd(t),s=od(t);return s.add({}).next(function(a){Au("number"==typeof a);for(var u=new sf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Il(t.Sr,e)}),i=n.mutations.map(function(e){return Il(t.Sr,e)});return new _d(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new gc(function(t,e){return qu(t.J(),e.J())}),f=0,d=r;f<d.length;f++){var p=d[f],g=wd.key(i.userId,p.key.path,a);h=h.add(p.key.path.q()),l.push(s.put(c)),l.push(o.put(g,wd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.os.Mr(t,e))}),t.es(function(){i.Cr[a]=u.keys()}),cf.qn(l).next(function(){return u})})},t.prototype.kr=function(t,e){var n=this;return od(t).get(e).next(function(t){return t?(Au(t.userId===n.userId),Jf(n.serializer,t)):null})},t.prototype.$r=function(t,e){var n=this;return this.Cr[e]?cf.resolve(this.Cr[e]):this.kr(t,e).next(function(t){if(t){var r=t.keys();return n.Cr[e]=r,r}return null})},t.prototype.Lr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return od(t)._i({index:_d.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Au(e.batchId>=r),o=Jf(n.serializer,e)),i.done()}).next(function(){return o})},t.prototype.Br=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return od(t)._i({index:_d.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.qr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return od(t).ui(_d.userMutationsIndex,n).next(function(t){return t.map(function(t){return Jf(e.serializer,t)})})},t.prototype.us=function(t,e){var n=this,r=wd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return sd(t)._i({range:i},function(r,i,s){var a=r[0],u=r[2],c=Wf(r[1]);if(a===n.userId&&e.path.isEqual(c))return od(t).get(u).next(function(t){if(!t)throw ju();Au(t.userId===n.userId),o.push(Jf(n.serializer,t))});s.done()}).next(function(){return o})},t.prototype.ds=function(t,e){var n=this,r=new gc(qu),i=[];return e.forEach(function(e){var o=wd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=sd(t)._i({range:s},function(t,i,o){var s=t[0],a=t[2],u=Wf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),cf.qn(i).next(function(){return n.Ur(t,r)})},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=wd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new gc(qu);return sd(t)._i({range:s},function(t,e,o){var s=t[0],u=t[2],c=Wf(t[1]);s===n.userId&&r.j(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Ur(t,a)})},t.prototype.Ur=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(od(t).get(e).next(function(t){if(null===t)throw ju();Au(t.userId===n.userId),r.push(Jf(n.serializer,t))}))}),cf.qn(i).next(function(){return r})},t.prototype.Qr=function(t,e){var n=this;return id(t.Kr,this.userId,e).next(function(r){return t.es(function(){n.Wr(e.batchId)}),cf.forEach(r,function(e){return n.Dr.jr(t,e)})})},t.prototype.Wr=function(t){delete this.Cr[t]},t.prototype.Gr=function(t){var e=this;return this.Fr(t).next(function(n){if(!n)return cf.resolve();var r=IDBKeyRange.lowerBound(wd.prefixForUser(e.userId)),i=[];return sd(t)._i({range:r},function(t,n,r){if(t[0]===e.userId){var o=Wf(t[1]);i.push(o)}else r.done()}).next(function(){Au(0===i.length)})})},t.prototype.zr=function(t,e){return rd(t,this.userId,e)},t.prototype.Hr=function(t){var e=this;return ad(t).get(this.userId).next(function(t){return t||new bd(e.userId,-1,"")})},t}();function rd(t,e,n){var r=wd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return sd(t)._i({range:o,li:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function id(t,e,n){var r=t.store(_d.store),i=t.store(wd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r._i({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Au(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=wd.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return cf.qn(o).next(function(){return c})}function od(t){return Gd.Ys(t,_d.store)}function sd(t){return Gd.Ys(t,wd.store)}function ad(t){return Gd.Ys(t,bd.store)}var ud=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return hd(t).put(fd(e),n)},t.prototype.Hn=function(t,e){var n=hd(t),r=fd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Jr(t,r)})},t.prototype.Jn=function(t,e){var n=this;return hd(t).get(fd(e)).next(function(t){return n.Yr(t)})},t.prototype.Xr=function(t,e){var n=this;return hd(t).get(fd(e)).next(function(t){var e=n.Yr(t);return e?{zn:e,size:dd(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=bc();return this.Zr(t,e,function(t,e){var i=n.Yr(e);r=r.Tt(t,i)}).next(function(){return r})},t.prototype.eo=function(t,e){var n=this,r=bc(),i=new fc(Yu.$);return this.Zr(t,e,function(t,e){var o=n.Yr(e);o?(r=r.Tt(t,o),i=i.Tt(t,dd(e))):(r=r.Tt(t,null),i=i.Tt(t,0))}).next(function(){return{no:r,so:i}})},t.prototype.Zr=function(t,e,n){if(e.W())return cf.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return hd(t)._i({range:r},function(t,e,r){for(var s=Yu.ct(t);o&&Yu.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()}).next(function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null})},t.prototype.ws=function(t,e,n){var r=this,i=wc(),o=e.path.length+1,s={};if(n.isEqual(Ku.min())){var a=e.path.H();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.H(),c=Qf(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Od.collectionReadTimeIndex}return hd(t)._i(s,function(t,n,s){if(t.length===o){var a=zf(r.serializer,n);e.path.j(a.key.path)?a instanceof Oh&&qh(e,a)&&(i=i.Tt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.io=function(t){return new cd(this,!!t&&t.ro)},t.prototype.oo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ld(t).get(Td.key).next(function(t){return Au(!!t),t})},t.prototype.Jr=function(t,e){return ld(t).put(Td.key,e)},t.prototype.Yr=function(t){if(t){var e=zf(this.serializer,t);return e instanceof Th&&e.version.isEqual(Ku.min())?null:e}return null},t}(),cd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).co=e,r.ro=n,r.uo=new uf(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(dn.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[],r=0,i=new gc(function(t,e){return qu(t.J(),e.J())});return this.Qn.forEach(function(o,s){var a=e.uo.get(o);if(s.zn){var u=Gf(e.co.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=dd(u);r+=c-a,n.push(e.co.jn(t,o,u))}else if(r-=a,e.ro){var l=Gf(e.co.serializer,new Th(o,Ku.min()),e.Wn(o));n.push(e.co.jn(t,o,l))}else n.push(e.co.Hn(t,o))}),i.forEach(function(r){n.push(e.co.os.Mr(t,r))}),n.push(this.co.updateMetadata(t,r)),cf.qn(n)},e.prototype.Yn=function(t,e){var n=this;return this.co.Xr(t,e).next(function(t){return null===t?(n.uo.set(e,0),null):(n.uo.set(e,t.size),t.zn)})},e.prototype.Xn=function(t,e){var n=this;return this.co.eo(t,e).next(function(t){var e=t.no;return t.so.forEach(function(t,e){n.uo.set(t,e)}),e})},e}(lf);function ld(t){return Gd.Ys(t,Td.store)}function hd(t){return Gd.Ys(t,Od.store)}function fd(t){return t.path.H()}function dd(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ju();e=t.noDocument}return JSON.stringify(e).length}var pd=function(){function t(){this.ao=new gd}return t.prototype.Mr=function(t,e){return this.ao.add(e),cf.resolve()},t.prototype.As=function(t,e){return cf.resolve(this.ao.getEntries(e))},t}(),gd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new gc(Gu.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new gc(Gu.$)).H()},t}(),yd=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Au(n<r&&n>=0&&r<=11);var o=new Of("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(md.store)}(t),function(t){t.createObjectStore(bd.store,{keyPath:bd.keyPath}),t.createObjectStore(_d.store,{keyPath:_d.keyPath,autoIncrement:!0}).createIndex(_d.userMutationsIndex,_d.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wd.store)}(t),Ad(t),function(t){t.createObjectStore(Od.store)}(t));var s=cf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Id.store),t.deleteObjectStore(Sd.store),t.deleteObjectStore(xd.store)}(t),Ad(t)),s=s.next(function(){return function(t){var e=t.store(xd.store),n=new xd(0,0,Ku.min().M(),0);return e.put(xd.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(_d.store).ui().next(function(n){t.deleteObjectStore(_d.store),t.createObjectStore(_d.store,{keyPath:_d.keyPath,autoIncrement:!0}).createIndex(_d.userMutationsIndex,_d.userMutationsKeyPath,{unique:!0});var r=e.store(_d.store),i=n.map(function(t){return r.put(t)});return cf.qn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(kd.store,{keyPath:kd.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Td.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Od.store);e.createIndex(Od.readTimeIndex,Od.readTimeIndexPath,{unique:!1}),e.createIndex(Od.collectionReadTimeIndex,Od.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Pd.store,{keyPath:Pd.keyPath})}(t),function(t){t.createObjectStore(Rd.store,{keyPath:Rd.keyPath})}(t)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Od.store)._i(function(t,n){e+=dd(n)}).next(function(){var n=new Td(e);return t.store(Td.store).put(Td.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(bd.store),r=t.store(_d.store);return n.ui().next(function(n){return cf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(_d.userMutationsIndex,i).next(function(r){return cf.forEach(r,function(r){Au(r.userId===n.userId);var i=Jf(e.serializer,r);return id(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Id.store),n=t.store(Od.store);return t.store(xd.store).get(xd.key).next(function(t){var r=[];return n._i(function(n,i){var o=new Gu(n),s=function(t){return[0,qf(t)]}(o);r.push(e.get(s).next(function(n){return n?cf.resolve():function(n){return e.put(new Id(0,qf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return cf.qn(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(jd.store,{keyPath:jd.keyPath});var n=e.store(jd.store),r=new gd,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:qf(i)})}};return e.store(Od.store)._i({li:!0},function(t,e){var n=new Gu(t);return i(n.q())}).next(function(){return e.store(wd.store)._i({li:!0},function(t,e){var n=Wf(t[1]);return i(n.q())})})},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Sd.store);return n._i(function(t,r){var i=Zf(r),o=td(e.serializer,i);return n.put(o)})},t}(),vd=function(t,e){this.seconds=t,this.nanoseconds=e},md=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};md.store="owner",md.key="owner";var bd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};bd.store="mutationQueues",bd.keyPath="userId";var _d=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};_d.store="mutations",_d.keyPath="batchId",_d.userMutationsIndex="userMutationsIndex",_d.userMutationsKeyPath=["userId","batchId"];var wd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,qf(e)]},t.key=function(t,e,n){return[t,qf(e),n]},t}();wd.store="documentMutations",wd.PLACEHOLDER=new wd;var Cd=function(t,e){this.path=t,this.readTime=e},Ed=function(t,e){this.path=t,this.version=e},Od=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Od.store="remoteDocuments",Od.readTimeIndex="readTimeIndex",Od.readTimeIndexPath="readTime",Od.collectionReadTimeIndex="collectionReadTimeIndex",Od.collectionReadTimeIndexPath=["parentPath","readTime"];var Td=function(t){this.byteSize=t};Td.store="remoteDocumentGlobal",Td.key="remoteDocumentGlobalKey";var Sd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Sd.store="targets",Sd.keyPath="targetId",Sd.queryTargetsIndexName="queryTargetsIndex",Sd.queryTargetsKeyPath=["canonicalId","targetId"];var Id=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Id.store="targetDocuments",Id.keyPath=["targetId","path"],Id.documentTargetsIndex="documentTargetsIndex",Id.documentTargetsKeyPath=["path","targetId"];var xd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};xd.key="targetGlobalKey",xd.store="targetGlobal";var jd=function(t,e){this.collectionId=t,this.parent=e};function Ad(t){t.createObjectStore(Id.store,{keyPath:Id.keyPath}).createIndex(Id.documentTargetsIndex,Id.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Sd.store,{keyPath:Sd.keyPath}).createIndex(Sd.queryTargetsIndexName,Sd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xd.store)}jd.store="collectionParents",jd.keyPath=["collectionId","parent"];var kd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};kd.store="clientMetadata",kd.keyPath="clientId";var Pd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Pd.store="bundles",Pd.keyPath="bundleId";var Rd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Rd.store="namedQueries",Rd.keyPath="name";var Nd=Object(dn.g)(Object(dn.g)(Object(dn.g)(Object(dn.g)([bd.store,_d.store,wd.store,Od.store,Sd.store,md.store,xd.store,Id.store],[kd.store]),[Td.store]),[jd.store]),[Pd.store,Rd.store]),Dd=function(){function t(t){this.serializer=t}return t.prototype.ho=function(t,e){return Ld(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Xf(e.createTime),version:e.version};var e})},t.prototype.lo=function(t,e){return Ld(t).put({bundleId:(n=e).id,createTime:Yf(vl(n.createTime)),version:n.version});var n},t.prototype._o=function(t,e){return Md(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ed(e.bundledQuery),readTime:Xf(e.readTime)};var e})},t.prototype.fo=function(t,e){return Md(t).put(function(t){return{name:t.name,readTime:Yf(vl(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ld(t){return Gd.Ys(t,Pd.store)}function Md(t){return Gd.Ys(t,Rd.store)}var Fd=function(){function t(){this.wo=new gd}return t.prototype.Mr=function(t,e){var n=this;if(!this.wo.has(e)){var r=e.K(),i=e.q();t.es(function(){n.wo.add(e)});var o={collectionId:r,parent:qf(i)};return Vd(t).put(o)}return cf.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Bu(e),""],!1,!0);return Vd(t).ui(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Wf(o.parent))}return n})},t}();function Vd(t){return Gd.Ys(t,jd.store)}var Ud=function(){function t(t){this.Eo=t}return t.prototype.next=function(){return this.Eo+=2,this.Eo},t.To=function(){return new t(0)},t.Io=function(){return new t(-1)},t}(),qd=function(){function t(t,e){this.Dr=t,this.serializer=e}return t.prototype.mo=function(t){var e=this;return this.Ao(t).next(function(n){var r=new Ud(n.highestTargetId);return n.highestTargetId=r.next(),e.Ro(t,n).next(function(){return n.highestTargetId})})},t.prototype.Po=function(t){return this.Ao(t).next(function(t){return Ku.N(new Wu(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.yo=function(t){return this.Ao(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Vo=function(t,e,n){var r=this;return this.Ao(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ro(t,i)})},t.prototype.po=function(t,e){var n=this;return this.vo(t,e).next(function(){return n.Ao(t).next(function(r){return r.targetCount+=1,n.bo(e,r),n.Ro(t,r)})})},t.prototype.So=function(t,e){return this.vo(t,e)},t.prototype.Do=function(t,e){var n=this;return this.Co(t,e.targetId).next(function(){return Hd(t).delete(e.targetId)}).next(function(){return n.Ao(t)}).next(function(e){return Au(e.targetCount>0),e.targetCount-=1,n.Ro(t,e)})},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return Hd(t)._i(function(s,a){var u=Zf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Do(t,u)))}).next(function(){return cf.qn(o)}).next(function(){return i})},t.prototype.Ue=function(t,e){return Hd(t)._i(function(t,n){var r=Zf(n);e(r)})},t.prototype.Ao=function(t){return Bd(t).get(xd.key).next(function(t){return Au(null!==t),t})},t.prototype.Ro=function(t,e){return Bd(t).put(xd.key,e)},t.prototype.vo=function(t,e){return Hd(t).put(td(this.serializer,e))},t.prototype.bo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.No=function(t){return this.Ao(t).next(function(t){return t.targetCount})},t.prototype.xo=function(t,e){var n=nc(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hd(t)._i({range:r,index:Sd.queryTargetsIndexName},function(t,n,r){var o=Zf(n);rc(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.Fo=function(t,e,n){var r=this,i=[],o=Wd(t);return e.forEach(function(e){var s=qf(e.path);i.push(o.put(new Id(n,s))),i.push(r.Dr.Oo(t,n,e))}),cf.qn(i)},t.prototype.Mo=function(t,e,n){var r=this,i=Wd(t);return cf.forEach(e,function(e){var o=qf(e.path);return cf.qn([i.delete([n,o]),r.Dr.ko(t,n,e)])})},t.prototype.Co=function(t,e){var n=Wd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.$o=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wd(t),i=Oc();return r._i({range:n,li:!0},function(t,e,n){var r=Wf(t[1]),o=new Yu(r);i=i.add(o)}).next(function(){return i})},t.prototype.zr=function(t,e){var n=qf(e.path),r=IDBKeyRange.bound([n],[Bu(n)],!1,!0),i=0;return Wd(t)._i({index:Id.documentTargetsIndex,li:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Ze=function(t,e){return Hd(t).get(e).next(function(t){return t?Zf(t):null})},t}();function Hd(t){return Gd.Ys(t,Sd.store)}function Bd(t){return Gd.Ys(t,xd.store)}function Wd(t){return Gd.Ys(t,Id.store)}var Kd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kr=e,r.Lo=n,r}return Object(dn.c)(e,t),e}(gf),Gd=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=a,this.Bo=c,this.qo=l,this.Uo=null,this.Qo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ko=null,this.inForeground=!1,this.Wo=null,this.jo=null,this.Go=Number.NEGATIVE_INFINITY,this.zo=function(t){return Promise.resolve()},!t.Gs())throw new Ru(Pu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Dr=new Yd(this,i),this.Ho=n+"main",this.serializer=new Kf(u),this.Jo=new _f(this.Ho,11,new yd(this.serializer)),this.Yo=new qd(this.Dr,this.serializer),this.os=new Fd,this.ss=function(t,e){return new ud(t,e)}(this.serializer,this.os),this.Xo=new Dd(this.serializer),this.window&&this.window.localStorage?this.Zo=this.window.localStorage:(this.Zo=null,!1===l&&Su("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof zd)return _f.Ys(t.Kr,e);throw ju()},t.prototype.start=function(){var t=this;return this.tc().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ru(Pu.FAILED_PRECONDITION,Kd);return t.ec(),t.nc(),t.sc(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Yo.yo(e)})}).then(function(e){t.Uo=new mf(e,t.Bo)}).then(function(){t.Qo=!0}).catch(function(e){return t.Jo&&t.Jo.close(),Promise.reject(e)})},t.prototype.ic=function(t){var e=this;return this.zo=function(n){return Object(dn.b)(e,void 0,void 0,function(){return Object(dn.d)(this,function(e){return this.lr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.rc=function(t){var e=this;this.Jo.ti(function(n){return Object(dn.b)(e,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.oc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri(function(){return Object(dn.b)(e,void 0,void 0,function(){return Object(dn.d)(this,function(t){switch(t.label){case 0:return this.lr?[4,this.tc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.tc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return $d(e).put(new kd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.cc(e).next(function(e){e||(t.isPrimary=!1,t.Cs.Mi(function(){return t.zo(!1)}))})}).next(function(){return t.uc(e)}).next(function(n){return t.isPrimary&&!n?t.ac(e).next(function(){return!1}):!!n&&t.hc(e).next(function(){return!0})})}).catch(function(e){if(Ef(e))return Tu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Tu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Cs.Mi(function(){return t.zo(e)}),t.isPrimary=e})},t.prototype.cc=function(t){var e=this;return Qd(t).get(md.key).next(function(t){return cf.resolve(e.lc(t))})},t.prototype._c=function(t){return $d(t).delete(this.clientId)},t.prototype.fc=function(){return Object(dn.b)(this,void 0,void 0,function(){var e,n,r,i=this;return Object(dn.d)(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.dc(this.Go,18e5)?[3,2]:(this.Go=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var n=t.Ys(e,kd.store);return n.ui().next(function(t){var e=i.wc(t,18e5),r=t.filter(function(t){return-1===e.indexOf(t)});return cf.forEach(r,function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=o.sent(),this.Zo)for(n=0,r=e;n<r.length;n++)this.Zo.removeItem(this.Ec(r[n].clientId));o.label=2;case 2:return[2]}})})},t.prototype.sc=function(){var t=this;this.jo=this.Cs.Us("client_metadata_refresh",4e3,function(){return t.tc().then(function(){return t.fc()}).then(function(){return t.sc()})})},t.prototype.lc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.uc=function(t){var e=this;return this.qo?cf.resolve(!0):Qd(t).get(md.key).next(function(n){if(null!==n&&e.dc(n.leaseTimestampMs,5e3)&&!e.Tc(n.ownerId)){if(e.lc(n)&&e.networkEnabled)return!0;if(!e.lc(n)){if(!n.allowTabSynchronization)throw new Ru(Pu.FAILED_PRECONDITION,Kd);return!1}}return!(!e.networkEnabled||!e.inForeground)||$d(t).ui().next(function(t){return void 0===e.wc(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Tu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.Ic=function(){return Object(dn.b)(this,void 0,void 0,function(){var t=this;return Object(dn.d)(this,function(e){switch(e.label){case 0:return this.Qo=!1,this.mc(),this.jo&&(this.jo.cancel(),this.jo=null),this.Ac(),this.Rc(),[4,this.Jo.runTransaction("shutdown","readwrite",[md.store,kd.store],function(e){var n=new zd(e,mf.Ds);return t.ac(n).next(function(){return t._c(n)})})];case 1:return e.sent(),this.Jo.close(),this.Pc(),[2]}})})},t.prototype.wc=function(t,e){var n=this;return t.filter(function(t){return n.dc(t.updateTimeMs,e)&&!n.Tc(t.clientId)})},t.prototype.gc=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return $d(e).ui().next(function(e){return t.wc(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),t.prototype.yc=function(t){return nd.Nr(t,this.serializer,this.os,this.Dr)},t.prototype.Vc=function(){return this.Yo},t.prototype.vc=function(){return this.ss},t.prototype.bc=function(){return this.os},t.prototype.Sc=function(){return this.Xo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Tu("IndexedDbPersistence","Starting transaction:",t),this.Jo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Nd,function(o){return r=new zd(o,i.Uo?i.Uo.next():mf.Ds),"readwrite-primary"===e?i.cc(r).next(function(t){return!!t||i.uc(r)}).next(function(e){if(!e)throw Su("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Cs.Mi(function(){return i.zo(!1)}),new Ru(Pu.FAILED_PRECONDITION,pf);return n(r)}).next(function(t){return i.hc(r).next(function(){return t})}):i.Dc(r).next(function(){return n(r)})}).then(function(t){return r.ns(),t})},t.prototype.Dc=function(t){var e=this;return Qd(t).get(md.key).next(function(t){if(null!==t&&e.dc(t.leaseTimestampMs,5e3)&&!e.Tc(t.ownerId)&&!e.lc(t)&&!(e.qo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ru(Pu.FAILED_PRECONDITION,Kd)})},t.prototype.hc=function(t){var e=new md(this.clientId,this.allowTabSynchronization,Date.now());return Qd(t).put(md.key,e)},t.Gs=function(){return _f.Gs()},t.prototype.ac=function(t){var e=this,n=Qd(t);return n.get(md.key).next(function(t){return e.lc(t)?(Tu("IndexedDbPersistence","Releasing primary lease."),n.delete(md.key)):cf.resolve()})},t.prototype.dc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Su("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ec=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Wo=function(){t.Cs.Ri(function(){return t.inForeground="visible"===t.document.visibilityState,t.tc()})},this.document.addEventListener("visibilitychange",this.Wo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Ac=function(){this.Wo&&(this.document.removeEventListener("visibilitychange",this.Wo),this.Wo=null)},t.prototype.nc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ko=function(){e.mc(),e.Cs.Ri(function(){return e.Ic()})},this.window.addEventListener("unload",this.Ko))},t.prototype.Rc=function(){this.Ko&&(this.window.removeEventListener("unload",this.Ko),this.Ko=null)},t.prototype.Tc=function(t){var e;try{var n=null!==(null===(e=this.Zo)||void 0===e?void 0:e.getItem(this.Ec(t)));return Tu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Su("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.mc=function(){if(this.Zo)try{this.Zo.setItem(this.Ec(this.clientId),String(Date.now()))}catch(t){Su("Failed to set zombie client id.",t)}},t.prototype.Pc=function(){if(this.Zo)try{this.Zo.removeItem(this.Ec(this.clientId))}catch(t){}},t.prototype.Ec=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Qd(t){return Gd.Ys(t,md.store)}function $d(t){return Gd.Ys(t,kd.store)}var Yd=function(){function t(t,e){this.db=t,this.cr=new Vf(this,e)}return t.prototype.Er=function(t){var e=this.Cc(t);return this.db.Vc().No(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Cc=function(t){var e=0;return this.Ir(t,function(t){e++}).next(function(){return e})},t.prototype.Ue=function(t,e){return this.db.Vc().Ue(t,e)},t.prototype.Ir=function(t,e){return this.Nc(t,function(t,n){return e(n)})},t.prototype.Oo=function(t,e,n){return Xd(t,n)},t.prototype.ko=function(t,e,n){return Xd(t,n)},t.prototype.mr=function(t,e,n){return this.db.Vc().mr(t,e,n)},t.prototype.jr=function(t,e){return Xd(t,e)},t.prototype.xc=function(t,e){return function(t,e){var n=!1;return ad(t).fi(function(r){return rd(t,r,e).next(function(t){return t&&(n=!0),cf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.vc().io(),i=[],o=0;return this.Nc(t,function(s,a){if(a<=e){var u=n.xc(t,s).next(function(e){if(!e)return o++,r.Jn(t,s).next(function(){return r.Hn(s),Wd(t).delete([0,qf(s.path)])})});i.push(u)}}).next(function(){return cf.qn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Lo);return this.db.Vc().So(t,n)},t.prototype.Fc=function(t,e){return Xd(t,e)},t.prototype.Nc=function(t,e){var n,r=Wd(t),i=mf.Ds;return r._i({index:Id.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==mf.Ds&&e(new Yu(Wf(n)),i),i=s,n=o):i=mf.Ds}).next(function(){i!==mf.Ds&&e(new Yu(Wf(n)),i)})},t.prototype.Pr=function(t){return this.db.vc().oo(t)},t}();function Xd(t,e){return Wd(t).put(function(t,e){return new Id(0,qf(t.path),e)}(e,t.Lo))}function Jd(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Zd=function(){function t(t,e,n,r){this.persistence=t,this.Oc=e,this.serializer=r,this.Mc=new fc(qu),this.kc=new uf(function(t){return nc(t)},rc),this.$c=Ku.min(),this.rs=t.yc(n),this.Lc=t.vc(),this.Yo=t.Vc(),this.Bc=new yf(this.Lc,this.rs,this.persistence.bc()),this.Xo=t.Sc(),this.Oc.yr(this.Bc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Rr(n,e.Mc)})},t}();function tp(t,e,n,r){return new Zd(t,e,n,r)}function ep(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(dn.d)(this,function(s){switch(s.label){case 0:return n=ku(t),r=n.rs,i=n.Bc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.rs.qr(t).next(function(s){return o=s,r=n.persistence.yc(e),i=new yf(n.Lc,r,n.persistence.bc()),r.qr(t)}).next(function(e){for(var n=[],r=[],s=Oc(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i._s(t,s).next(function(t){return{qc:t,Uc:n,Qc:r}})})})];case 1:return o=s.sent(),[2,(n.rs=r,n.Bc=i,n.Oc.yr(n.Bc),o)]}})})}function np(t,e){var n=ku(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Lc.io({ro:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=cf.resolve();return o.forEach(function(t){s=s.next(function(){return r.Jn(e,t)}).next(function(e){var o=e,s=n.Sn.get(t);Au(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)})}),s.next(function(){return t.rs.Qr(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.rs.Gr(t)}).next(function(){return n.Bc._s(t,r)})})}function rp(t){var e=ku(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Yo.Po(t)})}function ip(t,e){var n=ku(t),r=e.ft,i=n.Mc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Lc.io({ro:!0});i=n.Mc;var s=[];e.re.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Yo.Mo(t,e.de,o).next(function(){return n.Yo.Fo(t,e._e,o)}));var u=e.resumeToken;if(u.ht()>0){var c=a.wt(u,r).dt(t.Lo);i=i.Tt(o,c),function(t,e,n){return Au(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(a,c,e)&&s.push(n.Yo.So(t,c))}}});var a=mc();if(e.ce.forEach(function(r,i){e.ue.has(r)&&s.push(n.persistence.Dr.Fc(t,r))}),s.push(function(t,e,n,r,i){var o=Oc();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var i=mc();return n.forEach(function(n,o){var s=t.get(n),a=r;o instanceof Th&&o.version.isEqual(Ku.min())?(e.Hn(n,a),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,a),i=i.Tt(n,o)):Tu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),i})}(t,o,e.ce,r).next(function(t){a=t})),!r.isEqual(Ku.min())){var u=n.Yo.Po(t).next(function(e){return n.Yo.Vo(t,t.Lo,r)});s.push(u)}return cf.qn(s).next(function(){return o.apply(t)}).next(function(){return n.Bc.fs(t,a)})}).then(function(t){return n.Mc=i,t})}function op(t,e){var n=ku(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.rs.Lr(t,e)})}function sp(t,e){var n=ku(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Yo.xo(t,e).next(function(i){return i?cf.resolve(r=i):n.Yo.mo(t).next(function(i){return r=new uc(e,i,0,t.Lo),n.Yo.po(t,r).next(function(){return r})})})}).then(function(t){var r=n.Mc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Mc=n.Mc.Tt(t.targetId,t),n.kc.set(e,t.targetId)),t})}function ap(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(dn.d)(this,function(a){switch(a.label){case 0:r=ku(t),i=r.Mc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Dr.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ef(s=a.sent()))throw s;return Tu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Mc=r.Mc.remove(e),r.kc.delete(i.target),[2]}})})}function up(t,e,n){var r=ku(t),i=Ku.min(),o=Oc();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ku(t),i=r.kc.get(n);return void 0!==i?cf.resolve(r.Mc.get(i)):r.Yo.xo(e,n)}(r,t,Lh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Yo.$o(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Oc.ws(t,e,n?i:Ku.min(),n?o:Oc())}).next(function(t){return{documents:t,Kc:o}})})}function cp(t,e){var n=ku(t),r=ku(n.Yo),i=n.Mc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ze(t,e).next(function(t){return t?t.target:null})})}function lp(t){var e=ku(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ku(t),i=mc(),o=Qf(n),s=hd(e),a=IDBKeyRange.lowerBound(o,!0);return s._i({index:Od.readTimeIndex,range:a},function(t,e){var n=zf(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime}).next(function(){return{Wc:i,readTime:$f(o)}})}(e.Lc,t,e.$c)}).then(function(t){var n=t.Wc;return e.$c=t.readTime,n})}function hp(t){return Object(dn.b)(this,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){return[2,(e=ku(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=hd(t),n=Ku.min();return e._i({index:Od.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=$f(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$c=t})]})})}function fp(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){if(t.code!==Pu.FAILED_PRECONDITION||t.message!==pf)throw t;return Tu("LocalStore","Unexpectedly lost primary lease"),[2]})})}var dp=function(){function t(t,e,n,r,i,o){this.Cs=t,this.jc=n,this.Gc=r,this.zc=i,this.listener=o,this.state=0,this.Hc=0,this.Jc=null,this.stream=null,this.Si=new bf(t,e)}return t.prototype.Yc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Xc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Zc()},t.prototype.stop=function(){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(t){switch(t.label){case 0:return this.Yc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.tu=function(){this.state=0,this.Si.reset()},t.prototype.eu=function(){var t=this;this.Xc()&&null===this.Jc&&(this.Jc=this.Cs.Us(this.jc,6e4,function(){return t.nu()}))},t.prototype.su=function(t){this.iu(),this.stream.send(t)},t.prototype.nu=function(){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(t){return this.Xc()?[2,this.close(0)]:[2]})})},t.prototype.iu=function(){this.Jc&&(this.Jc.cancel(),this.Jc=null)},t.prototype.close=function(t,e){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(n){switch(n.label){case 0:return this.iu(),this.Si.cancel(),this.Hc++,3!==t?this.Si.reset():e&&e.code===Pu.RESOURCE_EXHAUSTED?(Su(e.toString()),Su("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):e&&e.code===Pu.UNAUTHENTICATED&&this.zc.m(),null!==this.stream&&(this.ru(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ou(e)];case 1:return n.sent(),[2]}})})},t.prototype.ru=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.cu(this.Hc),n=this.Hc;this.zc.getToken().then(function(e){t.Hc===n&&t.uu(e)},function(n){e(function(){var e=new Ru(Pu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.au(e)})})},t.prototype.uu=function(t){var e=this,n=this.cu(this.Hc);this.stream=this.hu(t),this.stream.lu(function(){n(function(){return e.state=2,e.listener.lu()})}),this.stream.ou(function(t){n(function(){return e.au(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Zc=function(){var t=this;this.state=4,this.Si.Bs(function(){return Object(dn.b)(t,void 0,void 0,function(){return Object(dn.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.au=function(t){return Tu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.cu=function(t){var e=this;return function(n){e.Cs.Ri(function(){return e.Hc===t?n():(Tu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),pp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(dn.c)(e,t),e.prototype.hu=function(t){return this.Gc._u("Listen",t)},e.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ju()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(Au(void 0===e||"string"==typeof e),oc.fromBase64String(e||"")):(Au(void 0===e||e instanceof Uint8Array),oc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?Pu.UNKNOWN:hc(t.code);return new Ru(e,t.message||"")}(s);n=new Nc(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=wl(t,u.document.name),l=vl(u.document.updateTime),h=new _h({mapValue:{fields:u.document.fields}}),f=new Oh(c,l,h,{});n=new Pc(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var d=e.documentDelete,p=wl(t,d.document),g=d.readTime?vl(d.readTime):Ku.min(),y=new Th(p,g);n=new Pc([],d.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var v=e.documentRemove,m=wl(t,v.document);n=new Pc([],v.removedTargetIds||[],m,null)}else{if(!("filter"in e))return ju();var b=e.filter,_=new cc(b.count||0);n=new Rc(b.targetId,_)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ku.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ku.min():e.readTime?vl(e.readTime):Ku.min()}(t);return this.listener.fu(e,n)},e.prototype.du=function(t){var e={};e.database=Ol(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=ic(r)?{documents:jl(t,r)}:{query:Al(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=gl(t,e.resumeToken):e.ft.F(Ku.min())>0&&(n.readTime=pl(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ju()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.su(e)},e.prototype.wu=function(t){var e={};e.database=Ol(this.serializer),e.removeTarget=t,this.su(e)},e}(dp),gp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Eu=!1,s}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"Tu",{get:function(){return this.Eu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Eu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ru=function(){this.Eu&&this.Iu([])},e.prototype.hu=function(t){return this.Gc._u("Write",t)},e.prototype.onMessage=function(t){if(Au(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Eu){this.Si.reset();var e=function(t,e){return t&&t.length>0?(Au(void 0!==e),t.map(function(t){return function(t,e){var n=vl(t.updateTime?t.updateTime:e);n.isEqual(Ku.min())&&(n=vl(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new rh(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=vl(t.commitTime);return this.listener.mu(n,e)}return Au(!t.writeResults||0===t.writeResults.length),this.Eu=!0,this.listener.Au()},e.prototype.Ru=function(){var t={};t.database=Ol(this.serializer),this.su(t)},e.prototype.Iu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Il(e.serializer,t)})};this.su(n)},e}(dp),yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Gc=n,i.serializer=r,i.Pu=!1,i}return Object(dn.c)(e,t),e.prototype.gu=function(){if(this.Pu)throw new Ru(Pu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.yu=function(t,e,n){var r=this;return this.gu(),this.credentials.getToken().then(function(i){return r.Gc.yu(t,e,n,i)}).catch(function(t){throw t.code===Pu.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.Vu=function(t,e,n){var r=this;return this.gu(),this.credentials.getToken().then(function(i){return r.Gc.Vu(t,e,n,i)}).catch(function(t){throw t.code===Pu.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.terminate=function(){this.Pu=!1},e}(function(){}),vp=function(){function t(t,e){this.di=t,this.pu=e,this.state="Unknown",this.vu=0,this.bu=null,this.Su=!0}return t.prototype.Du=function(){var t=this;0===this.vu&&(this.Cu("Unknown"),this.bu=this.di.Us("online_state_timeout",1e4,function(){return t.bu=null,t.Nu("Backend didn't respond within 10 seconds."),t.Cu("Offline"),Promise.resolve()}))},t.prototype.xu=function(t){"Online"===this.state?this.Cu("Unknown"):(this.vu++,this.vu>=1&&(this.Fu(),this.Nu("Connection failed 1 times. Most recent error: "+t.toString()),this.Cu("Offline")))},t.prototype.set=function(t){this.Fu(),this.vu=0,"Online"===t&&(this.Su=!1),this.Cu(t)},t.prototype.Cu=function(t){t!==this.state&&(this.state=t,this.pu(t))},t.prototype.Nu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Su?(Su(e),this.Su=!1):Tu("OnlineStateTracker",e)},t.prototype.Fu=function(){null!==this.bu&&(this.bu.cancel(),this.bu=null)},t}(),mp=function(t,e,n,r,i){var o=this;this.Ou=t,this.Mu=e,this.di=n,this.ku={},this.$u=[],this.Lu=new Map,this.Bu=new Set,this.qu=[],this.Uu=i,this.Uu.Qu(function(t){n.Ri(function(){return Object(dn.b)(o,void 0,void 0,function(){return Object(dn.d)(this,function(t){switch(t.label){case 0:return Ip(this)?(Tu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(dn.b)(this,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return(e=ku(t)).Bu.add(4),[4,_p(e)];case 1:return n.sent(),e.Ku.set("Unknown"),e.Bu.delete(4),[4,bp(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Ku=new vp(n,r)};function bp(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:if(!Ip(t))return[3,4];e=0,n=t.qu,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function _p(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:e=0,n=t.qu,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function wp(t,e){var n=ku(t);n.Lu.has(e.targetId)||(n.Lu.set(e.targetId,e),Sp(n)?Tp(n):Hp(n).Xc()&&Ep(n,e))}function Cp(t,e){var n=ku(t),r=Hp(n);n.Lu.delete(e),r.Xc()&&Op(n,e),0===n.Lu.size&&(r.Xc()?r.eu():Ip(n)&&n.Ku.set("Unknown"))}function Ep(t,e){t.Wu.De(e.targetId),Hp(t).du(e)}function Op(t,e){t.Wu.De(e),Hp(t).wu(e)}function Tp(t){t.Wu=new Lc({Xe:function(e){return t.ku.Xe(e)},Ze:function(e){return t.Lu.get(e)||null}}),Hp(t).start(),t.Ku.Du()}function Sp(t){return Ip(t)&&!Hp(t).Yc()&&t.Lu.size>0}function Ip(t){return 0===ku(t).Bu.size}function xp(t){t.Wu=void 0}function jp(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){return t.Lu.forEach(function(e,n){Ep(t,e)}),[2]})})}function Ap(t,e){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(n){return xp(t),Sp(t)?(t.Ku.xu(e),Tp(t)):t.Ku.set("Unknown"),[2]})})}function kp(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o;return Object(dn.d)(this,function(s){switch(s.label){case 0:if(t.Ku.set("Online"),!(e instanceof Nc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(dn.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Lu.has(o=i[r])?[4,t.ku.ju(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Lu.delete(o),t.Wu.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Tu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Pp(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Pc?t.Wu.$e(e):e instanceof Rc?t.Wu.je(e):t.Wu.qe(e),n.isEqual(Ku.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,rp(t.Ou)];case 8:return i=s.sent(),n.F(i)>=0?[4,function(t,e){var n=t.Wu.He(e);return n.re.forEach(function(n,r){if(n.resumeToken.ht()>0){var i=t.Lu.get(r);i&&t.Lu.set(r,i.wt(n.resumeToken,e))}}),n.oe.forEach(function(e){var n=t.Lu.get(e);if(n){t.Lu.set(e,n.wt(oc.lt,n.ft)),Op(t,e);var r=new uc(n.target,e,1,n.sequenceNumber);Ep(t,r)}}),t.ku.Gu(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Tu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Pp(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Pp(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r=this;return Object(dn.d)(this,function(i){switch(i.label){case 0:if(!Ef(e))throw e;return t.Bu.add(1),[4,_p(t)];case 1:return i.sent(),t.Ku.set("Offline"),n||(n=function(){return rp(t.Ou)}),t.di.Mi(function(){return Object(dn.b)(r,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return Tu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Bu.delete(1),[4,bp(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Rp(t,e){return e().catch(function(n){return Pp(t,n,e)})}function Np(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(dn.d)(this,function(s){switch(s.label){case 0:e=ku(t),n=Bp(e),r=e.$u.length>0?e.$u[e.$u.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ip(t)&&t.$u.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,op(e.Ou,r)];case 3:return null===(i=s.sent())?(0===e.$u.length&&n.eu(),[3,7]):(r=i.batchId,function(t,e){t.$u.push(e);var n=Bp(t);n.Xc()&&n.Tu&&n.Iu(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Pp(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Dp(e)&&Lp(e),[2]}})})}function Dp(t){return Ip(t)&&!Bp(t).Yc()&&t.$u.length>0}function Lp(t){Bp(t).start()}function Mp(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){return Bp(t).Ru(),[2]})})}function Fp(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n,r;return Object(dn.d)(this,function(i){for(e=Bp(t),n=0,r=t.$u;n<r.length;n++)e.Iu(r[n].mutations);return[2]})})}function Vp(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i;return Object(dn.d)(this,function(o){switch(o.label){case 0:return r=t.$u.shift(),i=af.from(r,e,n),[4,Rp(t,function(){return t.ku.zu(i)})];case 1:return o.sent(),[4,Np(t)];case 2:return o.sent(),[2]}})})}function Up(t,e){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(n){switch(n.label){case 0:return e&&Bp(t).Tu?[4,function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r;return Object(dn.d)(this,function(i){switch(i.label){case 0:return lc(r=e.code)&&r!==Pu.ABORTED?(n=t.$u.shift(),Bp(t).tu(),[4,Rp(t,function(){return t.ku.Hu(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Np(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Dp(t)&&Lp(t),[2]}})})}function qp(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return n=ku(t),e?(n.Bu.delete(2),[4,bp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Bu.add(2),[4,_p(n)]);case 3:r.sent(),n.Ku.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Hp(t){var e=this;return t.Ju||(t.Ju=function(t,e,n){var r=ku(t);return r.gu(),new pp(e,r.Gc,r.credentials,r.serializer,n)}(t.Mu,t.di,{lu:jp.bind(null,t),ou:Ap.bind(null,t),fu:kp.bind(null,t)}),t.qu.push(function(n){return Object(dn.b)(e,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return n?(t.Ju.tu(),Sp(t)?Tp(t):t.Ku.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ju.stop()];case 2:e.sent(),xp(t),e.label=3;case 3:return[2]}})})})),t.Ju}function Bp(t){var e=this;return t.Yu||(t.Yu=function(t,e,n){var r=ku(t);return r.gu(),new gp(e,r.Gc,r.credentials,r.serializer,n)}(t.Mu,t.di,{lu:Mp.bind(null,t),ou:Up.bind(null,t),Au:Fp.bind(null,t),mu:Vp.bind(null,t)}),t.qu.push(function(n){return Object(dn.b)(e,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return n?(t.Yu.tu(),[4,Np(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Yu.stop()];case 3:e.sent(),t.$u.length>0&&(Tu("RemoteStore","Stopping write stream with "+t.$u.length+" pending writes"),t.$u=[]),e.label=4;case 4:return[2]}})})})),t.Yu}var Wp=function(){this.Xu=void 0,this.listeners=[]},Kp=function(){this.queries=new uf(function(t){return Vh(t)},Fh),this.onlineState="Unknown",this.Zu=new Set};function zp(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(dn.d)(this,function(c){switch(c.label){case 0:if(n=ku(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Wp),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.ta(r)];case 2:return s.Xu=c.sent(),[3,4];case 3:return a=c.sent(),u=Rf(a,"Initialization of query '"+Uh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.ea(n.onlineState),o.Xu&&e.na(o.Xu)&&Yp(n),[2]}})})}function Gp(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(dn.d)(this,function(a){return n=ku(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.sa(r))]:[2]})})}function Qp(t,e){for(var n=ku(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].na(s)&&(r=!0);a.Xu=s}}r&&Yp(n)}function $p(t,e,n){var r=ku(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Yp(t){t.Zu.forEach(function(t){t.next()})}var Xp=function(){function t(t,e,n){this.query=t,this.ia=e,this.ra=!1,this.oa=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.na=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new jc(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ra?this.ca(t)&&(this.ia.next(t),o=!0):this.ua(t,this.onlineState)&&(this.aa(t),o=!0),this.oa=t,o},t.prototype.onError=function(t){this.ia.error(t)},t.prototype.ea=function(t){this.onlineState=t;var e=!1;return this.oa&&!this.ra&&this.ua(this.oa,t)&&(this.aa(this.oa),e=!0),e},t.prototype.ua=function(t,e){return!t.fromCache||!(this.options.ha&&"Offline"!==e||t.docs.W()&&"Offline"!==e)},t.prototype.ca=function(t){return t.docChanges.length>0||!!(t.ne||this.oa&&this.oa.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.aa=function(t){t=jc.ie(t.query,t.docs,t.ee,t.fromCache),this.ra=!0,this.ia.next(t)},t}(),Jp=function(){function t(){this.la=new gc(Zp._a),this.fa=new gc(Zp.da)}return t.prototype.W=function(){return this.la.W()},t.prototype.Oo=function(t,e){var n=new Zp(t,e);this.la=this.la.add(n),this.fa=this.fa.add(n)},t.prototype.wa=function(t,e){var n=this;t.forEach(function(t){return n.Oo(t,e)})},t.prototype.ko=function(t,e){this.Ea(new Zp(t,e))},t.prototype.Ta=function(t,e){var n=this;t.forEach(function(t){return n.ko(t,e)})},t.prototype.Ia=function(t){var e=this,n=new Yu(new Gu([])),r=new Zp(n,t),i=new Zp(n,t+1),o=[];return this.fa.Kt([r,i],function(t){e.Ea(t),o.push(t.key)}),o},t.prototype.ma=function(){var t=this;this.la.forEach(function(e){return t.Ea(e)})},t.prototype.Ea=function(t){this.la=this.la.delete(t),this.fa=this.fa.delete(t)},t.prototype.Aa=function(t){var e=new Yu(new Gu([])),n=new Zp(e,t),r=new Zp(e,t+1),i=Oc();return this.fa.Kt([n,r],function(t){i=i.add(t.key)}),i},t.prototype.zr=function(t){var e=new Zp(t,0),n=this.la.jt(e);return null!==n&&t.isEqual(n.key)},t}(),Zp=function(){function t(t,e){this.key=t,this.Ra=e}return t._a=function(t,e){return Yu.$(t.key,e.key)||qu(t.Ra,e.Ra)},t.da=function(t,e){return qu(t.Ra,e.Ra)||Yu.$(t.key,e.key)},t}();function tg(t,e){return"firestore_clients_"+t+"_"+e}function eg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function ng(t,e){return"firestore_targets_"+t+"_"+e}var rg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Pa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Ru(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Su("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ig=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Pa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ru(r.error.code,r.error.message)),i?new t(e,r.state,o):(Su("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),og=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Pa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Sc(),s=0;i&&s<r.activeTargetIds.length;++s)i=Zu(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Su("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),sg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Pa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Su("SharedClientState","Failed to parse online state: "+e),null)},t}(),ag=function(){function t(){this.activeTargetIds=Sc()}return t.prototype.ya=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Va=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ga=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ug=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.pa=r,this.va=null,this.pu=null,this.ps=null,this.ba=this.Sa.bind(this),this.Da=new fc(qu),this.lr=!1,this.Ca=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Na=tg(this.persistenceKey,this.pa),this.xa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Da=this.Da.Tt(this.pa,new ag),this.Fa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Oa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Ma=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ka=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.$a=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ba)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(dn.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(dn.d)(this,function(h){switch(h.label){case 0:return[4,this.va.gc()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.pa&&(i=this.getItem(tg(this.persistenceKey,r)))&&(o=og.Pa(r,i))&&(this.Da=this.Da.Tt(o.clientId,o));for(this.La(),(s=this.storage.getItem(this.ka))&&(a=this.Ba(s))&&this.qa(a),u=0,c=this.Ca;u<c.length;u++)this.Sa(c[u]);return this.Ca=[],this.window.addEventListener("unload",function(){return l.Ic()}),this.lr=!0,[2]}})})},t.prototype.Ss=function(t){this.setItem(this.xa,JSON.stringify(t))},t.prototype.Ua=function(){return this.Qa(this.Da)},t.prototype.Ka=function(t){var e=!1;return this.Da.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Wa=function(t){this.ja(t,"pending")},t.prototype.Ga=function(t,e,n){this.ja(t,e,n),this.za(t)},t.prototype.Ha=function(t){var e="not-current";if(this.Ka(t)){var n=this.storage.getItem(ng(this.persistenceKey,t));if(n){var r=ig.Pa(t,n);r&&(e=r.state)}}return this.Ja.ya(t),this.La(),e},t.prototype.Ya=function(t){this.Ja.Va(t),this.La()},t.prototype.Xa=function(t){return this.Ja.activeTargetIds.has(t)},t.prototype.Za=function(t){this.removeItem(ng(this.persistenceKey,t))},t.prototype.th=function(t,e,n){this.eh(t,e,n)},t.prototype.nh=function(t,e,n){var r=this;e.forEach(function(t){r.za(t)}),this.currentUser=t,n.forEach(function(t){r.Wa(t)})},t.prototype.sh=function(t){this.ih(t)},t.prototype.rh=function(){this.oh()},t.prototype.Ic=function(){this.lr&&(this.window.removeEventListener("storage",this.ba),this.removeItem(this.Na),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Tu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Tu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Tu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Sa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Tu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Na)return void Su("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi(function(){return Object(dn.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(dn.d)(this,function(a){if(this.lr){if(null!==n.key)if(this.Fa.test(n.key)){if(null==n.newValue)return t=this.uh(n.key),[2,this.ah(t,null)];if(e=this.hh(n.key,n.newValue))return[2,this.ah(e.clientId,e)]}else if(this.Oa.test(n.key)){if(null!==n.newValue&&(r=this.lh(n.key,n.newValue)))return[2,this._h(r)]}else if(this.Ma.test(n.key)){if(null!==n.newValue&&(i=this.fh(n.key,n.newValue)))return[2,this.dh(i)]}else if(n.key===this.ka){if(null!==n.newValue&&(o=this.Ba(n.newValue)))return[2,this.qa(o)]}else if(n.key===this.xa)(s=function(t){var e=mf.Ds;if(null!=t)try{var n=JSON.parse(t);Au("number"==typeof n),e=n}catch(t){Su("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==mf.Ds&&this.ps(s);else if(n.key===this.$a)return[2,this.va.wh()]}else this.Ca.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Ja",{get:function(){return this.Da.get(this.pa)},enumerable:!1,configurable:!0}),t.prototype.La=function(){this.setItem(this.Na,this.Ja.ga())},t.prototype.ja=function(t,e,n){var r=new rg(this.currentUser,t,e,n),i=eg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ga())},t.prototype.za=function(t){var e=eg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ih=function(t){this.storage.setItem(this.ka,JSON.stringify({clientId:this.pa,onlineState:t}))},t.prototype.eh=function(t,e,n){var r=ng(this.persistenceKey,t),i=new ig(t,e,n);this.setItem(r,i.ga())},t.prototype.oh=function(){this.setItem(this.$a,"value-not-used")},t.prototype.uh=function(t){var e=this.Fa.exec(t);return e?e[1]:null},t.prototype.hh=function(t,e){var n=this.uh(t);return og.Pa(n,e)},t.prototype.lh=function(t,e){var n=this.Oa.exec(t),r=Number(n[1]);return rg.Pa(new Cu(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fh=function(t,e){var n=this.Ma.exec(t),r=Number(n[1]);return ig.Pa(r,e)},t.prototype.Ba=function(t){return sg.Pa(t)},t.prototype._h=function(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.va.Eh(t.batchId,t.state,t.error)]:(Tu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.dh=function(t){return this.va.Th(t.targetId,t.state,t.error)},t.prototype.ah=function(t,e){var n=this,r=e?this.Da.Tt(t,e):this.Da.remove(t),i=this.Qa(this.Da),o=this.Qa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.va.Ih(s,a).then(function(){n.Da=r})},t.prototype.qa=function(t){this.Da.get(t.clientId)&&this.pu(t.onlineState)},t.prototype.Qa=function(t){var e=Sc();return t.forEach(function(t,n){e=e.Gt(n.activeTargetIds)}),e},t}(),cg=function(){function t(){this.mh=new ag,this.Ah={},this.pu=null,this.ps=null}return t.prototype.Wa=function(t){},t.prototype.Ga=function(t,e,n){},t.prototype.Ha=function(t){return this.mh.ya(t),this.Ah[t]||"not-current"},t.prototype.th=function(t,e,n){this.Ah[t]=e},t.prototype.Ya=function(t){this.mh.Va(t)},t.prototype.Xa=function(t){return this.mh.activeTargetIds.has(t)},t.prototype.Za=function(t){delete this.Ah[t]},t.prototype.Ua=function(){return this.mh.activeTargetIds},t.prototype.Ka=function(t){return this.mh.activeTargetIds.has(t)},t.prototype.start=function(){return this.mh=new ag,Promise.resolve()},t.prototype.nh=function(t,e,n){},t.prototype.sh=function(t){},t.prototype.Ic=function(){},t.prototype.Ss=function(t){},t.prototype.rh=function(){},t}(),lg=function(t){this.key=t},hg=function(t){this.key=t},fg=function(){function t(t,e){this.query=t,this.Rh=e,this.Ph=null,this.le=!1,this.gh=Oc(),this.ee=Oc(),this.yh=Hh(t),this.Vh=new Ic(this.yh)}return Object.defineProperty(t.prototype,"ph",{get:function(){return this.Rh},enumerable:!1,configurable:!0}),t.prototype.bh=function(t,e){var n=this,r=e?e.Sh:new xc,i=e?e.Vh:this.Vh,o=e?e.ee:this.ee,s=i,a=!1,u=Ah(this.query)&&i.size===this.query.limit?i.last():null,c=kh(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt(function(t,e){var l=i.get(t),h=e instanceof Oh?e:null;h&&(h=qh(n.query,h)?h:null);var f=!!l&&n.ee.has(l.key),d=!!h&&(h.an||n.ee.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Dh(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.yh(h,u)>0||c&&n.yh(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Ah(this.query)||kh(this.query))for(;s.size>this.query.limit;){var l=Ah(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Vh:s,Sh:r,br:a,ee:o}},t.prototype.Dh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Vh;this.Vh=t.Vh,this.ee=t.ee;var o=t.Sh.Zt();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ju()}};return n(t)-n(e)}(t.type,e.type)||r.yh(t.doc,e.doc)}),this.Ch(n);var s=e?this.Nh():[],a=0===this.gh.size&&this.le?1:0,u=a!==this.Ph;return this.Ph=a,0!==o.length||u?{snapshot:new jc(this.query,t.Vh,i,o,t.ee,0===a,u,!1),xh:s}:{xh:s}},t.prototype.ea=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Vh:this.Vh,Sh:new xc,ee:this.ee,br:!1},!1)):{xh:[]}},t.prototype.Fh=function(t){return!this.Rh.has(t)&&!!this.Vh.has(t)&&!this.Vh.get(t).an},t.prototype.Ch=function(t){var e=this;t&&(t._e.forEach(function(t){return e.Rh=e.Rh.add(t)}),t.fe.forEach(function(t){}),t.de.forEach(function(t){return e.Rh=e.Rh.delete(t)}),this.le=t.le)},t.prototype.Nh=function(){var t=this;if(!this.le)return[];var e=this.gh;this.gh=Oc(),this.Vh.forEach(function(e){t.Fh(e.key)&&(t.gh=t.gh.add(e.key))});var n=[];return e.forEach(function(e){t.gh.has(e)||n.push(new hg(e))}),this.gh.forEach(function(t){e.has(t)||n.push(new lg(t))}),n},t.prototype.Oh=function(t){this.Rh=t.Kc,this.gh=Oc();var e=this.bh(t.documents);return this.Zn(e,!0)},t.prototype.Mh=function(){return jc.ie(this.query,this.Vh,this.ee,0===this.Ph)},t}(),dg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},pg=function(t){this.key=t,this.kh=!1},gg=function(){function t(t,e,n,r,i,o){this.Ou=t,this.$h=e,this.Lh=n,this.Bh=r,this.currentUser=i,this.qh=o,this.Uh={},this.Qh=new uf(function(t){return Vh(t)},Fh),this.Kh=new Map,this.Wh=[],this.jh=new fc(Yu.$),this.Gh=new Map,this.zh=new Jp,this.Hh={},this.Jh=new Map,this.Yh=Ud.Io(),this.onlineState="Unknown",this.Xh=void 0}return Object.defineProperty(t.prototype,"Zh",{get:function(){return!0===this.Xh},enumerable:!1,configurable:!0}),t}();function yg(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(dn.d)(this,function(a){switch(a.label){case 0:return n=Kg(t),(i=n.Qh.get(e))?(n.Bh.Ha(i.targetId),r=i.view.Mh(),[3,4]):[3,1];case 1:return[4,sp(n.Ou,Lh(e))];case 2:return o=a.sent(),s=n.Bh.Ha(o.targetId),[4,vg(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Zh&&wp(n.$h,o),a.label=4;case 4:return[2,r]}})})}function vg(t,e,n,r){return Object(dn.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(dn.d)(this,function(l){switch(l.label){case 0:return t.tl=function(e,n,r){return function(t,e,n,r){return Object(dn.b)(this,void 0,void 0,function(){var i,o,s;return Object(dn.d)(this,function(a){switch(a.label){case 0:return(i=e.view.bh(n)).br?[4,up(t.Ou,e.query,!1).then(function(t){return e.view.bh(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.re.get(e.targetId),s=e.view.Zn(i,t.Zh,o),[2,(Ag(t,e.targetId,s.xh),s.snapshot)]}})})}(t,e,n,r)},[4,up(t.Ou,e,!0)];case 1:return i=l.sent(),o=new fg(e,i.Kc),s=o.bh(i.documents),a=kc.he(n,r&&"Offline"!==t.onlineState),u=o.Zn(s,t.Zh,a),Ag(t,n,u.xh),c=new dg(e,n,o),[2,(t.Qh.set(e,c),t.Kh.has(n)?t.Kh.get(n).push(e):t.Kh.set(n,[e]),u.snapshot)]}})})}function mg(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i;return Object(dn.d)(this,function(o){switch(o.label){case 0:return n=ku(t),r=n.Qh.get(e),(i=n.Kh.get(r.targetId)).length>1?[2,(n.Kh.set(r.targetId,i.filter(function(t){return!Fh(t,e)})),void n.Qh.delete(e))]:n.Zh?(n.Bh.Ya(r.targetId),n.Bh.Ka(r.targetId)?[3,2]:[4,ap(n.Ou,r.targetId,!1).then(function(){n.Bh.Za(r.targetId),Cp(n.$h,r.targetId),xg(n,r.targetId)}).catch(fp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return xg(n,r.targetId),[4,ap(n.Ou,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function bg(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(dn.d)(this,function(a){switch(a.label){case 0:r=zg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ku(t),i=Wu.now(),o=e.reduce(function(t,e){return t.add(e.key)},Oc());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Bc._s(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ch(c,n.get(c.key));null!=l&&s.push(new dh(c.key,l,Ch(l.proto.mapValue),ih.exists(!0)))}return r.rs.Or(t,i,s,e)})}).then(function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}})}(r.Ou,e)];case 2:return i=a.sent(),r.Bh.Wa(i.batchId),function(t,e,n){var r=t.Hh[t.currentUser.h()];r||(r=new fc(qu)),r=r.Tt(e,n),t.Hh[t.currentUser.h()]=r}(r,i.batchId,n),[4,Rg(r,i.Qn)];case 3:return a.sent(),[4,Np(r.$h)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Rf(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function _g(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r;return Object(dn.d)(this,function(i){switch(i.label){case 0:n=ku(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ip(n.Ou,e)];case 2:return r=i.sent(),e.re.forEach(function(t,e){var r=n.Gh.get(e);r&&(Au(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?r.kh=!0:t.fe.size>0?Au(r.kh):t.de.size>0&&(Au(r.kh),r.kh=!1))}),[4,Rg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,fp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function wg(t,e,n){var r=ku(t);if(r.Zh&&0===n||!r.Zh&&1===n){var i=[];r.Qh.forEach(function(t,n){var r=n.view.ea(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ku(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].ea(e)&&(r=!0)}),r&&Yp(n)}(r.Lh,e),i.length&&r.Uh.fu(i),r.onlineState=e,r.Zh&&r.Bh.sh(e)}}function Cg(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(dn.d)(this,function(c){switch(c.label){case 0:return(r=ku(t)).Bh.th(e,"rejected",n),i=r.Gh.get(e),(o=i&&i.key)?(s=(s=new fc(Yu.$)).Tt(o,new Th(o,Ku.min())),a=Oc().add(o),u=new Ac(Ku.min(),new Map,new gc(qu),s,a),[4,_g(r,u)]):[3,2];case 1:return c.sent(),r.jh=r.jh.remove(o),r.Gh.delete(e),Pg(r),[3,4];case 2:return[4,ap(r.Ou,e,!1).then(function(){return xg(r,e,n)}).catch(fp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Eg(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i;return Object(dn.d)(this,function(o){switch(o.label){case 0:n=ku(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,np(n.Ou,e)];case 2:return i=o.sent(),Ig(n,r,null),Sg(n,r),n.Bh.Ga(r,"acknowledged"),[4,Rg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,fp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Og(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i;return Object(dn.d)(this,function(o){switch(o.label){case 0:r=ku(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ku(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.rs.kr(t,e).next(function(e){return Au(null!==e),r=e.keys(),n.rs.Qr(t,e)}).next(function(){return n.rs.Gr(t)}).next(function(){return n.Bc._s(t,r)})})}(r.Ou,e)];case 2:return i=o.sent(),Ig(r,e,n),Sg(r,e),r.Bh.Ga(e,"rejected",n),[4,Rg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,fp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Tg(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(dn.d)(this,function(a){switch(a.label){case 0:Ip((n=ku(t)).$h)||Tu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ku(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.rs.Br(t)})}(n.Ou)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Jh.get(r)||[]).push(e),n.Jh.set(r,i),[3,4]);case 3:return o=a.sent(),s=Rf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Sg(t,e){(t.Jh.get(e)||[]).forEach(function(t){t.resolve()}),t.Jh.delete(e)}function Ig(t,e,n){var r=ku(t),i=r.Hh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Hh[r.currentUser.h()]=i}}function xg(t,e,n){void 0===n&&(n=null),t.Bh.Ya(e);for(var r=0,i=t.Kh.get(e);r<i.length;r++){var o=i[r];t.Qh.delete(o),n&&t.Uh.el(o,n)}t.Kh.delete(e),t.Zh&&t.zh.Ia(e).forEach(function(e){t.zh.zr(e)||jg(t,e)})}function jg(t,e){var n=t.jh.get(e);null!==n&&(Cp(t.$h,n),t.jh=t.jh.remove(e),t.Gh.delete(n),Pg(t))}function Ag(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof lg?(t.zh.Oo(o.key,e),kg(t,o)):o instanceof hg?(Tu("SyncEngine","Document no longer in limbo: "+o.key),t.zh.ko(o.key,e),t.zh.zr(o.key)||jg(t,o.key)):ju()}}function kg(t,e){var n=e.key;t.jh.get(n)||(Tu("SyncEngine","New document in limbo: "+n),t.Wh.push(n),Pg(t))}function Pg(t){for(;t.Wh.length>0&&t.jh.size<t.qh;){var e=t.Wh.shift(),n=t.Yh.next();t.Gh.set(n,new pg(e)),t.jh=t.jh.Tt(e,n),wp(t.$h,new uc(Lh(jh(e.path)),n,2,mf.Ds))}}function Rg(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(dn.d)(this,function(a){switch(a.label){case 0:return r=ku(t),i=[],o=[],s=[],r.Qh.W()?[3,3]:(r.Qh.forEach(function(t,a){s.push(r.tl(a,e,n).then(function(t){if(t){r.Zh&&r.Bh.th(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=vf.Vs(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.Uh.fu(i),[4,function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(dn.d)(this,function(l){switch(l.label){case 0:n=ku(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return cf.forEach(e,function(e){return cf.forEach(e.gs,function(r){return n.persistence.Dr.Oo(t,e.targetId,r)}).next(function(){return cf.forEach(e.ys,function(r){return n.persistence.Dr.ko(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ef(r=l.sent()))throw r;return Tu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Mc.get(a),c=u.Et(u.ft),n.Mc=n.Mc.Tt(a,c));return[2]}})})}(r.Ou,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Ng(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r;return Object(dn.d)(this,function(i){switch(i.label){case 0:return(n=ku(t)).currentUser.isEqual(e)?[3,3]:(Tu("SyncEngine","User change. New user:",e.h()),[4,ep(n.Ou,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Jh.forEach(function(t){t.forEach(function(t){t.reject(new Ru(Pu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Jh.clear()}(n),n.Bh.nh(e,r.Uc,r.Qc),[4,Rg(n,r.qc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Dg(t,e){var n=ku(t),r=n.Gh.get(e);if(r&&r.kh)return Oc().add(r.key);var i=Oc(),o=n.Kh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Qh.get(a[s]);i=i.Gt(u.view.ph)}return i}function Lg(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i;return Object(dn.d)(this,function(o){switch(o.label){case 0:return[4,up((n=ku(t)).Ou,e.query,!0)];case 1:return r=o.sent(),i=e.view.Oh(r),[2,(n.Zh&&Ag(n,e.targetId,i.xh),i)]}})})}function Mg(t){return Object(dn.b)(this,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){return[2,lp((e=ku(t)).Ou).then(function(t){return Rg(e,t)})]})})}function Fg(t,e,n,r){return Object(dn.b)(this,void 0,void 0,function(){var i,o;return Object(dn.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=ku(t),r=ku(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.$r(t,e).next(function(e){return e?n.Bc._s(t,e):cf.resolve(null)})})}((i=ku(t)).Ou,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Np(i.$h)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ig(i,e,r||null),Sg(i,e),function(t,e){ku(ku(t).rs).Wr(e)}(i.Ou,e)):ju(),s.label=4;case 4:return[4,Rg(i,o)];case 5:return s.sent(),[3,7];case 6:Tu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Vg(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(dn.d)(this,function(c){switch(c.label){case 0:return Kg(n=ku(t)),zg(n),!0!==e||!0===n.Xh?[3,3]:(r=n.Bh.Ua(),[4,Ug(n,r.H())]);case 1:return i=c.sent(),n.Xh=!0,[4,qp(n.$h,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)wp(n.$h,s[o]);return[3,7];case 3:return!1!==e||!1===n.Xh?[3,7]:(a=[],u=Promise.resolve(),n.Kh.forEach(function(t,e){n.Bh.Xa(e)?a.push(e):u=u.then(function(){return xg(n,e),ap(n.Ou,e,!0)}),Cp(n.$h,e)}),[4,u]);case 4:return c.sent(),[4,Ug(n,a)];case 5:return c.sent(),function(t){var e=ku(t);e.Gh.forEach(function(t,n){Cp(e.$h,n)}),e.zh.ma(),e.Gh=new Map,e.jh=new fc(Yu.$)}(n),n.Xh=!1,[4,qp(n.$h,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Ug(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(dn.d)(this,function(g){switch(g.label){case 0:n=ku(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Kh.get(a=s[o]))&&0!==c.length?[4,sp(n.Ou,Lh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Qh.get(h[l]),[4,Lg(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,cp(n.Ou,a)];case 8:return p=g.sent(),[4,sp(n.Ou,p)];case 9:return u=g.sent(),[4,vg(n,qg(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Uh.fu(i),r)]}})})}function qg(t){return xh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Hg(t){var e=ku(t);return ku(ku(e.Ou).persistence).gc()}function Bg(t,e,n,r){return Object(dn.b)(this,void 0,void 0,function(){var i,o,s;return Object(dn.d)(this,function(a){switch(a.label){case 0:return(i=ku(t)).Xh?(Tu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Kh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,lp(i.Ou)];case 3:return o=a.sent(),s=Ac.ae(e,"current"===n),[4,Rg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,ap(i.Ou,e,!0)];case 6:return a.sent(),xg(i,e,r),[3,8];case 7:ju(),a.label=8;case 8:return[2]}})})}function Wg(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(dn.d)(this,function(f){switch(f.label){case 0:if(!(r=Kg(t)).Xh)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Kh.has(s=o[i])?(Tu("SyncEngine","Adding an already active target "+s),[3,5]):[4,cp(r.Ou,s)]:[3,6];case 2:return a=f.sent(),[4,sp(r.Ou,a)];case 3:return u=f.sent(),[4,vg(r,qg(a),u.targetId,!1)];case 4:f.sent(),wp(r.$h,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(dn.d)(this,function(e){switch(e.label){case 0:return r.Kh.has(t)?[4,ap(r.Ou,t,!1).then(function(){Cp(r.$h,t),xg(r,t)}).catch(fp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Kg(t){var e=ku(t);return e.$h.ku.Gu=_g.bind(null,e),e.$h.ku.Xe=Dg.bind(null,e),e.$h.ku.ju=Cg.bind(null,e),e.Uh.fu=Qp.bind(null,e.Lh),e.Uh.el=$p.bind(null,e.Lh),e}function zg(t){var e=ku(t);return e.$h.ku.zu=Eg.bind(null,e),e.$h.ku.Hu=Og.bind(null,e),e}var Gg=function(){function t(t,e){this.os=t,this.Dr=e,this.rs=[],this.nl=1,this.sl=new gc(Zp._a)}return t.prototype.Fr=function(t){return cf.resolve(0===this.rs.length)},t.prototype.Or=function(t,e,n,r){var i=this.nl;this.nl++;var o=new sf(i,e,n,r);this.rs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new Zp(u.key,i)),this.os.Mr(t,u.key.path.q())}return cf.resolve(o)},t.prototype.kr=function(t,e){return cf.resolve(this.il(e))},t.prototype.Lr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return cf.resolve(this.rs.length>r?this.rs[r]:null)},t.prototype.Br=function(){return cf.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.qr=function(t){return cf.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new Zp(e,0),i=new Zp(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],function(t){var e=n.il(t.Ra);o.push(e)}),cf.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new gc(qu);return e.forEach(function(t){var e=new Zp(t,0),i=new Zp(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],function(t){r=r.add(t.Ra)})}),cf.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;Yu.ot(i)||(i=i.child(""));var o=new Zp(new Yu(i),0),s=new gc(qu);return this.sl.Wt(function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ra)),!0)},o),cf.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.il(t);null!==r&&n.push(r)}),n},t.prototype.Qr=function(t,e){var n=this;Au(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return cf.forEach(e.mutations,function(i){var o=new Zp(i.key,e.batchId);return r=r.delete(o),n.Dr.jr(t,i.key)}).next(function(){n.sl=r})},t.prototype.Wr=function(t){},t.prototype.zr=function(t,e){var n=new Zp(e,0),r=this.sl.jt(n);return cf.resolve(e.isEqual(r&&r.key))},t.prototype.Gr=function(t){return cf.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),Qg=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new fc(Yu.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Mr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return cf.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=bc();return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)}),cf.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=wc(),i=new Yu(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),a=s.value,u=a.zn,c=a.readTime;if(!e.path.j(s.key.path))break;c.F(n)<=0||u instanceof Oh&&qh(e,u)&&(r=r.Tt(u.key,u))}return cf.resolve(r)},t.prototype.al=function(t,e){return cf.forEach(this.docs,function(t){return e(t)})},t.prototype.io=function(t){return new $g(this)},t.prototype.oo=function(t){return cf.resolve(this.size)},t}(),$g=function(t){function e(e){var n=this;return(n=t.call(this)||this).co=e,n}return Object(dn.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach(function(r,i){i&&i.zn?n.push(e.co.jn(t,i.zn,e.Wn(r))):e.co.Hn(r)}),cf.qn(n)},e.prototype.Yn=function(t,e){return this.co.Jn(t,e)},e.prototype.Xn=function(t,e){return this.co.getEntries(t,e)},e}(lf),Yg=function(){function t(t){this.persistence=t,this.hl=new uf(function(t){return nc(t)},rc),this.lastRemoteSnapshotVersion=Ku.min(),this.highestTargetId=0,this.ll=0,this._l=new Jp,this.targetCount=0,this.fl=Ud.To()}return t.prototype.Ue=function(t,e){return this.hl.forEach(function(t,n){return e(n)}),cf.resolve()},t.prototype.Po=function(t){return cf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.yo=function(t){return cf.resolve(this.ll)},t.prototype.mo=function(t){return this.highestTargetId=this.fl.next(),cf.resolve(this.highestTargetId)},t.prototype.Vo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),cf.resolve()},t.prototype.vo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Ud(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.po=function(t,e){return this.vo(e),this.targetCount+=1,cf.resolve()},t.prototype.So=function(t,e){return this.vo(e),cf.resolve()},t.prototype.Do=function(t,e){return this.hl.delete(e.target),this._l.Ia(e.targetId),this.targetCount-=1,cf.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.Co(t,a.targetId)),i++)}),cf.qn(o).next(function(){return i})},t.prototype.No=function(t){return cf.resolve(this.targetCount)},t.prototype.xo=function(t,e){var n=this.hl.get(e)||null;return cf.resolve(n)},t.prototype.Fo=function(t,e,n){return this._l.wa(e,n),cf.resolve()},t.prototype.Mo=function(t,e,n){this._l.Ta(e,n);var r=this.persistence.Dr,i=[];return r&&e.forEach(function(e){i.push(r.jr(t,e))}),cf.qn(i)},t.prototype.Co=function(t,e){return this._l.Ia(e),cf.resolve()},t.prototype.$o=function(t,e){var n=this._l.Aa(e);return cf.resolve(n)},t.prototype.zr=function(t,e){return cf.resolve(this._l.zr(e))},t}(),Xg=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ho=function(t,e){return cf.resolve(this.dl.get(e))},t.prototype.lo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:vl(n.createTime)}),cf.resolve()},t.prototype._o=function(t,e){return cf.resolve(this.wl.get(e))},t.prototype.fo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:ed(n.bundledQuery),readTime:vl(n.readTime)}),cf.resolve()},t}(),Jg=function(){function t(t,e){var n=this;this.El={},this.Uo=new mf(0),this.Qo=!1,this.Qo=!0,this.Dr=t(this),this.Yo=new Yg(this),this.os=new pd,this.ss=function(t,e){return new Qg(t,function(t){return n.Dr.Tl(t)})}(this.os),this.serializer=new Kf(e),this.Xo=new Xg(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Ic=function(){return this.Qo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),t.prototype.rc=function(){},t.prototype.oc=function(){},t.prototype.bc=function(){return this.os},t.prototype.yc=function(t){var e=this.El[t.h()];return e||(e=new Gg(this.os,this.Dr),this.El[t.h()]=e),e},t.prototype.Vc=function(){return this.Yo},t.prototype.vc=function(){return this.ss},t.prototype.Sc=function(){return this.Xo},t.prototype.runTransaction=function(t,e,n){var r=this;Tu("MemoryPersistence","Starting transaction:",t);var i=new Zg(this.Uo.next());return this.Dr.Il(),n(i).next(function(t){return r.Dr.ml(i).next(function(){return t})}).Ln().then(function(t){return i.ns(),t})},t.prototype.Al=function(t,e){return cf.Un(Object.values(this.El).map(function(n){return function(){return n.zr(t,e)}}))},t}(),Zg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Lo=e,n}return Object(dn.c)(e,t),e}(gf),ty=function(){function t(t){this.persistence=t,this.Rl=new Jp,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw ju()},enumerable:!1,configurable:!0}),t.prototype.Oo=function(t,e,n){return this.Rl.Oo(n,e),this.yl.delete(n.toString()),cf.resolve()},t.prototype.ko=function(t,e,n){return this.Rl.ko(n,e),this.yl.add(n.toString()),cf.resolve()},t.prototype.jr=function(t,e){return this.yl.add(e.toString()),cf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.Ia(e.targetId).forEach(function(t){return n.yl.add(t.toString())});var r=this.persistence.Vc();return r.$o(t,e.targetId).next(function(t){t.forEach(function(t){return n.yl.add(t.toString())})}).next(function(){return r.Do(t,e)})},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.vc().io();return cf.forEach(this.yl,function(r){var i=Yu.st(r);return e.Vl(t,i).next(function(t){t||n.Hn(i)})}).next(function(){return e.Pl=null,n.apply(t)})},t.prototype.Fc=function(t,e){var n=this;return this.Vl(t,e).next(function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())})},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return cf.Un([function(){return cf.resolve(n.Rl.zr(e))},function(){return n.persistence.Vc().zr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),ey=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.lu=function(t){this.bl=t},t.prototype.ou=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),ny={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ry=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(dn.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise(function(i,o){var s=new bu;s.listenOnce(yu.COMPLETE,function(){try{switch(s.getLastErrorCode()){case gu.NO_ERROR:var e=s.getResponseJson();Tu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case gu.TIMEOUT:Tu("Connection",'RPC "'+t+'" timed out'),o(new Ru(Pu.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:var n=s.getStatus();if(Tu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Pu).indexOf(e)>=0?e:Pu.UNKNOWN}(r.status);o(new Ru(a,r.message))}else o(new Ru(Pu.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ru(Pu.UNAVAILABLE,"Connection failed."));break;default:ju()}}finally{Tu("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype._u=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new lu,i=ds(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),Object(pn.u)()||Object(pn.x)()||Object(pn.r)()||Object(pn.t)()||Object(pn.y)()||Object(pn.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Tu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new ey({pl:function(t){c?Tu("Connection","Not sending because WebChannel is closed:",t):(u||(Tu("Connection","Opening WebChannel transport."),a.open(),u=!0),Tu("Connection","WebChannel sending:",t),a.send(t))},vl:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,mu.EventType.OPEN,function(){c||Tu("Connection","WebChannel transport opened.")}),h(a,mu.EventType.CLOSE,function(){c||(c=!0,Tu("Connection","WebChannel transport closed"),l.Nl())}),h(a,mu.EventType.ERROR,function(t){c||(c=!0,Iu("Connection","WebChannel transport errored:",t),l.Nl(new Ru(Pu.UNAVAILABLE,"The operation could not be completed")))}),h(a,mu.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Au(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Tu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=sc[t];if(void 0!==e)return hc(e)}(i),s=r.message;void 0===o&&(o=Pu.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Nl(new Ru(o,s)),a.close()}else Tu("Connection","WebChannel received:",n),l.xl(n)}}),h(i,vu.STAT_EVENT,function(t){10===t.stat?Tu("Connection","Detected buffering proxy"):11===t.stat&&Tu("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Cl()},0),l},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.yu=function(t,e,n,r){var i=this.kl(t,e);Tu("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then(function(t){return Tu("RestConnection","Received: ",t),t},function(e){throw Iu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Vu=function(t,e,n,r){return this.yu(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.2",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+ny[t]},t}()),iy=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Qu=function(t){this.Kl.push(t)},t.prototype.Ic=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){Tu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){Tu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),oy=function(){function t(){}return t.prototype.Qu=function(t){},t.prototype.Ic=function(){},t}(),sy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return this.serializer=ff(t.Fl.t),this.Bh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Ou=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return tp(this.persistence,new Uf,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Jg(ty.gl,this.serializer)},t.prototype.jl=function(t){return new cg},t.prototype.terminate=function(){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.Bh.Ic()];case 1:return t.sent(),[4,this.persistence.Ic()];case 2:return t.sent(),[2]}})})},t}(),ay=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(dn.c)(e,t),e.prototype.initialize=function(e){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,hp(this.Ou)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,zg(this.Xl.va)];case 4:return n.sent(),[4,Np(this.Xl.$h)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return tp(this.persistence,new Uf,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new Ff(this.persistence.Dr.cr,t.di)},e.prototype.Gl=function(t){var e=Jd(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Mf.er(this.cacheSizeBytes):Mf.ir;return new Gd(this.synchronizeTabs,e,t.clientId,n,t.di,jf(),Af(),this.serializer,this.Bh,!!this.forceOwnership)},e.prototype.jl=function(t){return new cg},e}(sy),uy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(dn.c)(e,t),e.prototype.initialize=function(e){return Object(dn.b)(this,void 0,void 0,function(){var n,r=this;return Object(dn.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.va,this.Bh instanceof ug?(this.Bh.va={Eh:Fg.bind(null,n),Th:Bg.bind(null,n),Ih:Wg.bind(null,n),gc:Hg.bind(null,n),wh:Mg.bind(null,n)},[4,this.Bh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.ic(function(t){return Object(dn.b)(r,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return[4,Vg(this.Xl.va,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Ou):t||this.zl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jl=function(t){var e=jf();if(!ug.Gs(e))throw new Ru(Pu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jd(t.Fl.t,t.Fl.persistenceKey);return new ug(e,t.di,n,t.clientId,t.Yl)},e}(ay),cy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n=this;return Object(dn.d)(this,function(r){switch(r.label){case 0:return this.Ou?[3,2]:(this.Ou=t.Ou,this.Bh=t.Bh,this.Mu=this.Zl(e),this.$h=this.t_(e),this.Lh=this.e_(e),this.va=this.n_(e,!t.synchronizeTabs),this.Bh.pu=function(t){return wg(n.va,t,1)},this.$h.ku.s_=Ng.bind(null,this.va),[4,qp(this.$h,this.va.Zh)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new Kp},t.prototype.Zl=function(t){var e=ff(t.Fl.t),n=new ry(t.Fl);return function(t,e,n){return new yp(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Ou,n=this.Mu,r=t.di,i=function(t){return wg(s.va,t,0)},o=iy.Gs()?new iy:new oy,new mp(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new gg(t,e,n,r,i,o);return s&&(a.Xh=!0),a}(this.Ou,this.$h,this.Lh,this.Bh,t.Yl,t.qh,e)},t.prototype.terminate=function(){return function(t){return Object(dn.b)(this,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return e=ku(t),Tu("RemoteStore","RemoteStore shutting down."),e.Bu.add(5),[4,_p(e)];case 1:return n.sent(),e.Uu.Ic(),e.Ku.set("Unknown"),[2]}})})}(this.$h)},t}(),ly=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}();function hy(t,e,n){if(!n)throw new Ru(Pu.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function fy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function dy(t,e,n,r){if(!0===e&&!0===r)throw new Ru(Pu.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function py(t){if(!Yu.ot(t))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function gy(t){if(Yu.ot(t))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function yy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ju()}function vy(t,e){if("_delegate"in t&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ru(Pu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yy(t);throw new Ru(Pu.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function my(t,e){if(e<=0)throw new Ru(Pu.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var by=function(t){this._methodName=t},_y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.c_=function(t){if(2!==t.u_)throw t.a_(1===t.u_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(by);function wy(t,e,n){return new Tv({u_:3,h_:e.settings.h_,methodName:t._methodName,l_:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var Cy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.c_=function(t){return new nh(t.path,new Gl)},e.prototype.isEqual=function(t){return t instanceof e},e}(by),Ey=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).__=n,r}return Object(dn.c)(e,t),e.prototype.c_=function(t){var e=wy(this,t,!0),n=this.__.map(function(t){return kv(t,e)}),r=new Ql(n);return new nh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(by),Oy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).__=n,r}return Object(dn.c)(e,t),e.prototype.c_=function(t){var e=wy(this,t,!0),n=this.__.map(function(t){return kv(t,e)}),r=new Yl(n);return new nh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(by),Ty=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(dn.c)(e,t),e.prototype.c_=function(t){var e=new Jl(t.serializer,dl(t.serializer,this.f_));return new nh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(by),Sy=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ru(Pu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ru(Pu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.d_=t,this.w_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.d_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.d_===t.d_&&this.w_===t.w_},t.prototype.toJSON=function(){return{latitude:this.d_,longitude:this.w_}},t.prototype.C=function(t){return qu(this.d_,t.d_)||qu(this.w_,t.w_)},t}(),Iy=function(){function t(t){this.E_=t}return t.fromBase64String=function(e){try{return new t(oc.fromBase64String(e))}catch(e){throw new Ru(Pu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(oc.fromUint8Array(e))},t.prototype.toBase64=function(){return this.E_.toBase64()},t.prototype.toUint8Array=function(){return this.E_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},t}(),xy=function(t){this.o_=t},jy=new Map,Ay=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ru(Pu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ru(Pu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,dy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ky=function(){function t(t,e){this.T_="(lite)",this.I_=new Ay({}),this.m_=!1,t instanceof wu?(this.A_=t,this.R_=new Du):(this.P_=t,this.A_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ru(Pu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(t.options.projectId)}(t),this.R_=new Lu(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.P_)throw new Ru(Pu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.P_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g_",{get:function(){return this.m_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return void 0!==this.V_},enumerable:!1,configurable:!0}),t.prototype.p_=function(t){if(this.m_)throw new Ru(Pu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.I_=new Ay(t),void 0!==t.credentials&&(this.R_=function(t){if(!t)return new Du;switch(t.type){case"gapi":var e=t.client;return Au(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Fu(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ru(Pu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.v_=function(){return this.I_},t.prototype.b_=function(){return this.m_=!0,this.I_},t.prototype._delete=function(){return this.V_||(this.V_=this.S_()),this.V_},t.prototype.S_=function(){return function(t){var e=jy.get(t);e&&(Tu("ComponentProvider","Removing Datastore"),jy.delete(t),e.terminate())}(this),Promise.resolve()},t}();function Py(){if("undefined"==typeof Uint8Array)throw new Ru(Pu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ry(){if("undefined"==typeof atob)throw new Ru(Pu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.fromBase64String=function(t){return Ry(),new e(Iy.fromBase64String(t))},e.fromUint8Array=function(t){return Py(),new e(Iy.fromUint8Array(t))},e.prototype.toBase64=function(){return Ry(),this.o_.toBase64()},e.prototype.toUint8Array=function(){return Py(),this.o_.toUint8Array()},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(xy),Dy=function(){function t(){}return t.prototype.D_=function(t,e){switch(void 0===e&&(e="none"),zc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return tl(t.integerValue||t.doubleValue);case 3:return this.C_(t.timestampValue);case 4:return this.N_(t,e);case 5:return t.stringValue;case 6:return this.x_(el(t.bytesValue));case 7:return this.F_(t.referenceValue);case 8:return this.O_(t.geoPointValue);case 9:return this.M_(t.arrayValue,e);case 10:return this.k_(t.mapValue,e);default:throw ju()}},t.prototype.k_=function(t,e){var n=this,r={};return Uc(t.fields||{},function(t,i){r[t]=n.D_(i,e)}),r},t.prototype.O_=function(t){return new Sy(tl(t.latitude),tl(t.longitude))},t.prototype.M_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.D_(t,e)})},t.prototype.N_=function(t,e){switch(e){case"previous":var n=Bc(t);return null==n?null:this.D_(n,e);case"estimate":return this.C_(Wc(t));default:return null}},t.prototype.C_=function(t){var e=Zc(t);return new Wu(e.seconds,e.nanos)},t.prototype.L_=function(t,e){var n=Gu.Y(t);Au(Hl(n));var r=new wu(n.get(1),n.get(3)),i=new Yu(n.B(5));return r.isEqual(e)||Su("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Ly=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(dn.c)(e,t),e.prototype.x_=function(t){return new Ny(new Iy(t))},e.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return cm.B_(e,this.firestore,null)},e}(Dy),My=function(){function t(t,e,n,r,i){this.q_=t,this.U_=e,this.Q_=n,this.K_=r,this.W_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new tv(this.q_,this.W_,this.Q_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.K_},t.prototype.data=function(){if(this.K_){if(this.W_){var t=new Fy(this.q_,this.U_,this.Q_,this.K_,null);return this.W_.fromFirestore(t)}return this.U_.D_(this.K_.En())}},t.prototype.get=function(t){if(this.K_){var e=this.K_.data().field(Vy("DocumentSnapshot.get",t));if(null!==e)return this.U_.D_(e)}},t}(),Fy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(My);function Vy(t,e){return"string"==typeof e?Mv(t,e):e instanceof xy?e.o_.j_:e.j_}var Uy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new $u(t)}return t.prototype.isEqual=function(t){return this.j_.isEqual(t.j_)},t}(),qy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).G_=new Pf,r.T_="name"in e?e.name:"[DEFAULT]",r}return Object(dn.c)(e,t),e.prototype.S_=function(){return this.z_||sm(this),this.z_.terminate()},e}(ky);function Hy(t,e,n){var r=this,i=new hf;return t.di.enqueue(function(){return Object(dn.b)(r,void 0,void 0,function(){var r;return Object(dn.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Bv(t,n)];case 1:return o.sent(),[4,Wv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Pu.FAILED_PRECONDITION||t.code===Pu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function By(t){if(t.g_||t.y_)throw new Ru(Pu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Wy=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).q_=e,a.H_=e,a.metadata=o,a}return Object(dn.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.K_){if(this.W_){var e=new Ky(this.q_,this.U_,this.Q_,this.K_,this.metadata,null);return this.W_.fromFirestore(e,t)}return this.U_.D_(this.K_.En(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.K_){var n=this.K_.data().field(Vy("DocumentSnapshot.get",t));if(null!==n)return this.U_.D_(n,e.serverTimestamps)}},e}(My),Ky=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Wy),zy=function(){function t(t,e,n,r){this.q_=t,this.U_=e,this.J_=r,this.metadata=new dm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.J_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.J_.docs.forEach(function(r){t.call(e,new Ky(n.q_,n.U_,r.key,r,new dm(n.J_.ee.has(r.key),n.J_.fromCache),n.query.W_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.J_.se)throw new Ru(Pu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Y_&&this.X_===e||(this.Y_=function(t,e){if(t.J_.te.W()){var n=0;return t.J_.docChanges.map(function(e){return{type:"added",doc:new Ky(t.q_,t.U_,e.doc.key,e.doc,new dm(t.J_.ee.has(e.doc.key),t.J_.fromCache),t.query.W_),oldIndex:-1,newIndex:n++}})}var r=t.J_.te;return t.J_.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Ky(t.q_,t.U_,e.doc.key,e.doc,new dm(t.J_.ee.has(e.doc.key),t.J_.fromCache),t.query.W_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Gy(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.X_=e),this.Y_},t}();function Gy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ju()}}function Qy(t,e){return t instanceof Wy&&e instanceof Wy?t.q_===e.q_&&t.Q_.isEqual(e.Q_)&&(null===t.K_?null===e.K_:t.K_.isEqual(e.K_))&&t.W_===e.W_:t instanceof zy&&e instanceof zy&&t.q_===e.q_&&bv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.J_.isEqual(e.J_)}var $y=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(dn.c)(e,t),e.prototype.x_=function(t){return new Iy(t)},e.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return new tv(this.firestore,null,e)},e}(Dy);function Yy(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=vy(t,tv);var o=vy(t.firestore,qy),s=_v(o);return e instanceof xy&&(e=e.o_),Jy(o,("string"==typeof e||e instanceof Uy?jv(s,"updateDoc",t.Q_,e,n,r):xv(s,"updateDoc",t.Q_,e)).tf(t.Q_,ih.exists(!0)))}function Xy(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof xy&&(t=t.o_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||df(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(df(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof tv)c=vy(t.firestore,qy),l=jh(t.Q_.path),u={next:function(e){i[a]&&i[a](Zy(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=vy(t,ev);c=vy(d.firestore,qy),l=d.Z_;var p=new $y(c);u={next:function(t){i[a]&&i[a](new zy(c,p,d,t))},error:i[a+1],complete:i[a+2]},dv(t.Z_)}return function(t,e,n,r){var i=this,o=new ly(r),s=new Xp(e,o,n);return t.di.Ri(function(){return Object(dn.b)(i,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return e=zp,[4,Xv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.r_(),t.di.Ri(function(){return Object(dn.b)(i,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return e=Gp,[4,Xv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(om(c),l,h,u)}function Jy(t,e){return function(t,e){var n=this,r=new hf;return t.di.Ri(function(){return Object(dn.b)(n,void 0,void 0,function(){var n;return Object(dn.d)(this,function(i){switch(i.label){case 0:return n=bg,[4,Yv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(om(t),e)}function Zy(t,e,n){var r=n.docs.get(e.Q_),i=new $y(t);return new Wy(t,i,e.Q_,r,new dm(n.hasPendingWrites,n.fromCache),e.W_)}var tv=function(){function t(t,e,n){this.W_=e,this.Q_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"ef",{get:function(){return this.Q_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.Q_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new pv(this.firestore,this.W_,this.Q_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.Q_)},t}(),ev=function(){function t(t,e,n){this.W_=e,this.Z_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.Z_)},t}(),nv=function(){};function rv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.nf(t)}return t}var iv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).sf=e,i.rf=n,i.cf=r,i.type="where",i}return Object(dn.c)(e,t),e.prototype.nf=function(t){var e=_v(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){hv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(lv(r,t,l[c]));a={arrayValue:{values:u}}}else a=lv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||hv(s,o),a=Av(n,"where",s,"in"===o||"not-in"===o);var h=Bh.create(i,o,a);return function(t,e){if(e.An()){var n=Rh(t);if(null!==n&&!n.isEqual(e.field))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ph(t);null!==r&&fv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ru(Pu.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.Z_,0,e,t.firestore.A_,this.sf,this.rf,this.cf);return new ev(t.firestore,t.W_,function(t,e){var n=t.filters.concat([e]);return new Ih(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.Z_,n))},e}(nv),ov=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).sf=e,r.uf=n,r.type="orderBy",r}return Object(dn.c)(e,t),e.prototype.nf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new nf(e,n);return function(t,e){if(null===Ph(t)){var n=Rh(t);null!==n&&fv(0,n,e.field)}}(t,r),r}(t.Z_,this.sf,this.uf);return new ev(t.firestore,t.W_,function(t,e){var n=t.Tn.concat([e]);return new Ih(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.Z_,e))},e}(nv),sv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.af=n,i.hf=r,i}return Object(dn.c)(e,t),e.prototype.nf=function(t){return new ev(t.firestore,t.W_,Mh(t.Z_,this.af,this.hf))},e}(nv),av=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.lf=n,i._f=r,i}return Object(dn.c)(e,t),e.prototype.nf=function(t){var e=cv(t,this.type,this.lf,this._f);return new ev(t.firestore,t.W_,function(t,e){return new Ih(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.Z_,e))},e}(nv),uv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.lf=n,i._f=r,i}return Object(dn.c)(e,t),e.prototype.nf=function(t){var e=cv(t,this.type,this.lf,this._f);return new ev(t.firestore,t.W_,function(t,e){return new Ih(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.Z_,e))},e}(nv);function cv(t,e,n,r){if(n[0]instanceof xy&&(n[0]=n[0].o_),n[0]instanceof My)return function(t,e,n,r,i){if(!r)throw new Ru(Pu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Dh(t);s<a.length;s++){var u=a[s];if(u.field.tt())o.push(nl(e,r.key));else{var c=r.field(u.field);if(Hc(c))throw new Ru(Pu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.J();throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Jh(o,i)}(t.Z_,t.firestore.A_,e,n[0].K_,r);var i=_v(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new Ru(Pu.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Nh(t)&&-1!==c.indexOf("/"))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Gu.Y(c));if(!Yu.ot(l))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Yu(l);a.push(nl(e,h))}else{var f=Av(n,r,c);a.push(f)}}return new Jh(a,o)}(t.Z_,t.firestore.A_,i,e,n,r)}function lv(t,e,n){if(n instanceof xy&&(n=n.o_),"string"==typeof n){if(""===n)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nh(e)&&-1!==n.indexOf("/"))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Gu.Y(n));if(!Yu.ot(r))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return nl(t,new Yu(r))}if(n instanceof tv)return nl(t,n.Q_);throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+yy(n)+".")}function hv(t,e){if(!Array.isArray(t)||0===t.length)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function fv(t,e,n){if(!n.isEqual(e))throw new Ru(Pu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function dv(t){if(kh(t)&&0===t.Tn.length)throw new Ru(Pu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,jh(r))||this).firestore=e,i.ef=r,i.type="collection",i}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Z_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Z_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.ef.q();return t.W()?null:new tv(this.firestore,null,new Yu(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.ef)},e}(ev);function gv(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t instanceof xy&&(t=t.o_),hy("collection","path",e),t instanceof ky){var i=Gu.Y.apply(Gu,Object(dn.g)([e],n));return gy(i),new pv(t,null,i)}if(!(t instanceof tv||t instanceof pv))throw new Ru(Pu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=Gu.Y.apply(Gu,Object(dn.g)([t.path],n)).child(Gu.Y(e));return gy(o),new pv(t.firestore,null,o)}function yv(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t instanceof xy&&(t=t.o_),1===arguments.length&&(e=Uu.D()),hy("doc","path",e),t instanceof ky){var i=Gu.Y.apply(Gu,Object(dn.g)([e],n));return py(i),new tv(t,null,new Yu(i))}if(!(t instanceof tv||t instanceof pv))throw new Ru(Pu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t.ef.child(Gu.Y.apply(Gu,Object(dn.g)([e],n)));return py(o),new tv(t.firestore,t instanceof pv?t.W_:null,new Yu(o))}var vv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(dn.c)(e,t),e.prototype.x_=function(t){return new Iy(t)},e.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return new tv(this.firestore,null,e)},e}(Dy);function mv(t,e){return t instanceof xy&&(t=t.o_),e instanceof xy&&(e=e.o_),(t instanceof tv||t instanceof pv)&&(e instanceof tv||e instanceof pv)&&t.firestore===e.firestore&&t.path===e.path&&t.W_===e.W_}function bv(t,e){return t instanceof xy&&(t=t.o_),e instanceof xy&&(e=e.o_),t instanceof ev&&e instanceof ev&&t.firestore===e.firestore&&Fh(t.Z_,e.Z_)&&t.W_===e.W_}function _v(t){var e=t.b_(),n=ff(t.A_);return new Sv(t.A_,!!e.ignoreUndefinedProperties,n)}var wv=/^__.*__$/,Cv=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.tf=function(t,e){var n=[];return n.push(null!==this.en?new dh(t,this.data,this.en,e):new fh(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new gh(t,this.fieldTransforms)),n},t}(),Ev=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.tf=function(t,e){var n=[new dh(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new gh(t,this.fieldTransforms)),n},t}();function Ov(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ju()}}var Tv=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ff(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.df=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.wf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.df({path:n,l_:!1});return r.Ef(t),r},t.prototype.Tf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.df({path:n,l_:!1});return r.ff(),r},t.prototype.If=function(t){return this.df({path:void 0,l_:!0})},t.prototype.a_=function(t){return Fv(t,this.settings.methodName,this.settings.mf||!1,this.path,this.settings.h_)},t.prototype.contains=function(t){return void 0!==this.en.find(function(e){return t.j(e)})||void 0!==this.fieldTransforms.find(function(e){return t.j(e.field)})},t.prototype.ff=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ef(this.path.get(t))},t.prototype.Ef=function(t){if(0===t.length)throw this.a_("Document fields must not be empty");if(Ov(this.u_)&&wv.test(t))throw this.a_('Document fields cannot begin and end with "__"')},t}(),Sv=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||ff(t)}return t.prototype.Af=function(t,e,n,r){return void 0===r&&(r=!1),new Tv({u_:t,methodName:e,h_:n,path:$u.X(),l_:!1,mf:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function Iv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Af(o.merge||o.mergeFields?2:0,e,n,i);Nv("Data must be an object, but it was:",s,r);var a,u,c=Pv(r,s);if(o.merge)a=new eh(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Dv(e,f[h],n);if(!s.contains(d))throw new Ru(Pu.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Vv(l,d)||l.push(d)}a=new eh(l),u=s.fieldTransforms.filter(function(t){return a.un(t.field)})}else a=null,u=s.fieldTransforms;return new Cv(new _h(c),a,u)}function xv(t,e,n,r){var i=t.Af(1,e,n);Nv("Data must be an object, but it was:",i,r);var o=[],s=new wh;Uc(r,function(t,r){var a=Mv(e,t,n);r instanceof xy&&(r=r.o_);var u=i.Tf(a);if(r instanceof _y)o.push(a);else{var c=kv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new eh(o);return new Ev(s.hn(),a,i.fieldTransforms)}function jv(t,e,n,r,i,o){var s=t.Af(1,e,n),a=[Dv(e,r,n)],u=[i];if(o.length%2!=0)throw new Ru(Pu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Dv(e,o[c])),u.push(o[c+1]);for(var l=[],h=new wh,f=a.length-1;f>=0;--f)if(!Vv(l,a[f])){var d=a[f],p=u[f];p instanceof xy&&(p=p.o_);var g=s.Tf(d);if(p instanceof _y)l.push(d);else{var y=kv(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new eh(l);return new Ev(h.hn(),v,s.fieldTransforms)}function Av(t,e,n,r){return void 0===r&&(r=!1),kv(n,t.Af(r?4:3,e))}function kv(t,e){if(t instanceof xy&&(t=t.o_),Rv(t))return Nv("Unsupported field value:",e,t),Pv(t,e);if(t instanceof by)return function(t,e){if(!Ov(e.u_))throw e.a_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.a_(t._methodName+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.l_&&4!==e.u_)throw e.a_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=kv(o[i],e.If(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof xy&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dl(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Wu.fromDate(t);return{timestampValue:pl(e.serializer,n)}}if(t instanceof Wu){var r=new Wu(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pl(e.serializer,r)}}if(t instanceof Sy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Iy)return{bytesValue:gl(e.serializer,t.E_)};if(t instanceof tv){var i=e.t,o=t.firestore.A_;if(!o.isEqual(i))throw e.a_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ml(t.firestore.A_||e.t,t.Q_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.a_("Unsupported field value: "+yy(t))}(t,e)}function Pv(t,e){var n={};return qc(t)?e.path&&e.path.length>0&&e.en.push(e.path):Uc(t,function(t,r){var i=kv(r,e.wf(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Rv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wu||t instanceof Sy||t instanceof Iy||t instanceof tv||t instanceof by)}function Nv(t,e,n){if(!Rv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=yy(n);throw e.a_("an object"===r?t+" a custom object":t+" "+r)}}function Dv(t,e,n){if(e instanceof xy&&(e=e.o_),e instanceof Uy)return e.j_;if("string"==typeof e)return Mv(t,e);throw Fv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Lv=new RegExp("[~\\*/\\[\\]]");function Mv(t,e,n){if(e.search(Lv)>=0)throw Fv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Uy.bind.apply(Uy,Object(dn.g)([void 0],e.split("."))))).j_}catch(r){throw Fv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Fv(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ru(Pu.INVALID_ARGUMENT,(a+=". ")+t+u)}function Vv(t,e){return t.some(function(t){return t.isEqual(e)})}var Uv=function(){function t(t){this.Mu=t,this.Rf=new Map,this.mutations=[],this.Pf=!1,this.gf=null,this.yf=new Set}return t.prototype.Vf=function(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n=this;return Object(dn.d)(this,function(r){switch(r.label){case 0:if(this.pf(),this.mutations.length>0)throw new Ru(Pu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(dn.d)(this,function(u){switch(u.label){case 0:return n=ku(t),r=Ol(n.serializer)+"/documents",i={documents:e.map(function(t){return _l(n.serializer,t)})},[4,n.Vu("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Au(!!e.found);var n=wl(t,e.found.name),r=vl(e.found.updateTime),i=new _h({mapValue:{fields:e.found.fields}});return new Oh(n,r,i,{})}(t,e):"missing"in e?function(t,e){Au(!!e.missing),Au(!!e.readTime);var n=wl(t,e.missing),r=vl(e.readTime);return new Th(n,r)}(t,e):ju()}(n.serializer,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Au(!!e),a.push(e)}),a)]}})})}(this.Mu,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Th||t instanceof Oh?n.vf(t):ju()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.tf(t,this.rn(t))),this.yf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.tf(t,this.bf(t)))}catch(t){this.gf=t}this.yf.add(t.toString())},t.prototype.delete=function(t){this.write([new mh(t,this.rn(t))]),this.yf.add(t.toString())},t.prototype.commit=function(){return Object(dn.b)(this,void 0,void 0,function(){var t,e=this;return Object(dn.d)(this,function(n){switch(n.label){case 0:if(this.pf(),this.gf)throw this.gf;return t=this.Rf,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Yu.st(n);e.mutations.push(new bh(r,e.rn(r)))}),[4,function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r,i;return Object(dn.d)(this,function(o){switch(o.label){case 0:return n=ku(t),r=Ol(n.serializer)+"/documents",i={writes:e.map(function(t){return Il(n.serializer,t)})},[4,n.yu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Mu,this.mutations)];case 1:return n.sent(),this.Pf=!0,[2]}})})},t.prototype.vf=function(t){var e;if(t instanceof Oh)e=t.version;else{if(!(t instanceof Th))throw ju();e=Ku.min()}var n=this.Rf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ru(Pu.ABORTED,"Document version changed between two reads.")}else this.Rf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Rf.get(t.toString());return!this.yf.has(t.toString())&&e?ih.updateTime(e):ih.on()},t.prototype.bf=function(t){var e=this.Rf.get(t.toString());if(!this.yf.has(t.toString())&&e){if(e.isEqual(Ku.min()))throw new Ru(Pu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ih.updateTime(e)}return ih.exists(!0)},t.prototype.write=function(t){this.pf(),this.mutations=this.mutations.concat(t)},t.prototype.pf=function(){},t}(),qv=function(){function t(t,e,n,r){this.di=t,this.Mu=e,this.updateFunction=n,this.Ti=r,this.Sf=5,this.Si=new bf(this.di,"transaction_retry")}return t.prototype.run=function(){this.Df()},t.prototype.Df=function(){var t=this;this.Si.Bs(function(){return Object(dn.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(dn.d)(this,function(r){return t=new Uv(this.Mu),(e=this.Cf(t))&&e.then(function(e){n.di.Ri(function(){return t.commit().then(function(){n.Ti.resolve(e)}).catch(function(t){n.Nf(t)})})}).catch(function(t){n.Nf(t)}),[2]})})})},t.prototype.Cf=function(t){try{var e=this.updateFunction(t);return!Xu(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.Nf=function(t){var e=this;this.Sf>0&&this.xf(t)?(this.Sf-=1,this.di.Ri(function(){return e.Df(),Promise.resolve()})):this.Ti.reject(t)},t.prototype.xf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!lc(e)}return!1},t}(),Hv=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=Cu.UNAUTHENTICATED,this.clientId=Uu.D(),this.Ff=function(){},this.g=new hf,this.credentials.A(function(t){Tu("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Ff(t)),r.g.resolve()})}return t.prototype.getConfiguration=function(){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,qh:100})]}})})},t.prototype.Of=function(t){var e=this;this.Ff=t,this.g.promise.then(function(){return e.Ff(e.user)})},t.prototype.Mf=function(){if(this.di.Ci)throw new Ru(Pu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var e=new hf;return this.di.Ni(function(){return Object(dn.b)(t,void 0,void 0,function(){var t,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.kf?[4,this.kf.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.$f?[4,this.$f.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.R(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Rf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Bv(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r=this;return Object(dn.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),Tu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.Of(function(n){return t.di.Mi(function(){return Object(dn.b)(r,void 0,void 0,function(){return Object(dn.d)(this,function(t){switch(t.label){case 0:return[4,ep(e.Ou,n)];case 1:return t.sent(),[2]}})})})}),e.persistence.rc(function(){return t.terminate()}),t.$f=e,[2]}})})}function Wv(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r;return Object(dn.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),[4,Kv(t)];case 1:return n=i.sent(),Tu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.Of(function(n){return t.di.Mi(function(){return function(t,e){return Object(dn.b)(this,void 0,void 0,function(){var n,r;return Object(dn.d)(this,function(i){switch(i.label){case 0:return(n=ku(t)).di.Li(),Tu("RemoteStore","RemoteStore received new credentials"),r=Ip(n),n.Bu.add(3),[4,_p(n)];case 1:return i.sent(),r&&n.Ku.set("Unknown"),[4,n.ku.s_(e)];case 2:return i.sent(),n.Bu.delete(3),[4,bp(n)];case 3:return i.sent(),[2]}})})}(e.$h,n)})}),t.kf=e,[2]}})})}function Kv(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return t.$f?[3,2]:(Tu("FirestoreClient","Using default OfflineComponentProvider"),[4,Bv(t,new sy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}})})}function zv(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return t.kf?[3,2]:(Tu("FirestoreClient","Using default OnlineComponentProvider"),[4,Wv(t,new cy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.kf]}})})}function Gv(t){return Kv(t).then(function(t){return t.persistence})}function Qv(t){return Kv(t).then(function(t){return t.Ou})}function $v(t){return zv(t).then(function(t){return t.$h})}function Yv(t){return zv(t).then(function(t){return t.va})}function Xv(t){return Object(dn.b)(this,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return[4,zv(t)];case 1:return e=r.sent(),[2,((n=e.Lh).ta=yg.bind(null,e.va),n.sa=mg.bind(null,e.va),n)]}})})}function Jv(t,e,n){var r=this;void 0===n&&(n={});var i=new hf;return t.di.Ri(function(){return Object(dn.b)(r,void 0,void 0,function(){var r;return Object(dn.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ly({next:function(o){e.Ri(function(){return Gp(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ru(Pu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ru(Pu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Xp(jh(n.path),o,{includeMetadataChanges:!0,ha:!0});return zp(t,s)},[4,Xv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.di,e,n,i])]}})})}),i.promise}function Zv(t,e,n){var r=this;void 0===n&&(n={});var i=new hf;return t.di.Ri(function(){return Object(dn.b)(r,void 0,void 0,function(){var r;return Object(dn.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ly({next:function(n){e.Ri(function(){return Gp(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ru(Pu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Xp(n,o,{includeMetadataChanges:!0,ha:!0});return zp(t,s)},[4,Xv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.di,e,n,i])]}})})}),i.promise}var tm=function(){function t(t,e){this.q_=t,this.Lf=e,this.Bf=[],this.qf=!1,this.Uf=_v(t)}return t.prototype.set=function(t,e,n){this.Qf();var r=em(t,this.q_),i=wm(r.W_,e,n),o=Iv(this.Uf,"WriteBatch.set",r.Q_,i,null!==r.W_,n);return this.Bf=this.Bf.concat(o.tf(r.Q_,ih.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Qf();var o,s=em(t,this.q_);return e instanceof xy&&(e=e.o_),o="string"==typeof e||e instanceof Uy?jv(this.Uf,"WriteBatch.update",s.Q_,e,n,r):xv(this.Uf,"WriteBatch.update",s.Q_,e),this.Bf=this.Bf.concat(o.tf(s.Q_,ih.exists(!0))),this},t.prototype.delete=function(t){this.Qf();var e=em(t,this.q_);return this.Bf=this.Bf.concat(new mh(e.Q_,ih.on())),this},t.prototype.commit=function(){return this.Qf(),this.qf=!0,this.Bf.length>0?this.Lf(this.Bf):Promise.resolve()},t.prototype.Qf=function(){if(this.qf)throw new Ru(Pu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function em(t,e){if(t instanceof xy&&(t=t.o_),t.firestore!==e)throw new Ru(Pu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var nm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).q_=e,r}return Object(dn.c)(e,t),e.prototype.get=function(e){var n=this,r=em(e,this.q_),i=new $y(this.q_);return t.prototype.get.call(this,e).then(function(t){return new Wy(n.q_,i,r.Q_,t.K_,new dm(!1,!1),r.W_)})},e}(function(){function t(t,e){this.q_=t,this.Kf=e,this.Uf=_v(t)}return t.prototype.get=function(t){var e=this,n=em(t,this.q_),r=new vv(this.q_);return this.Kf.Vf([n.Q_]).then(function(t){if(!t||1!==t.length)return ju();var i=t[0];if(i instanceof Th)return new My(e.q_,r,n.Q_,null,n.W_);if(i instanceof Oh)return new My(e.q_,r,i.key,i,n.W_);throw ju()})},t.prototype.set=function(t,e,n){var r=em(t,this.q_),i=wm(r.W_,e,n),o=Iv(this.Uf,"Transaction.set",r.Q_,i,null!==r.W_,n);return this.Kf.set(r.Q_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=em(t,this.q_);return e instanceof xy&&(e=e.o_),o="string"==typeof e||e instanceof Uy?jv(this.Uf,"Transaction.update",s.Q_,e,n,r):xv(this.Uf,"Transaction.update",s.Q_,e),this.Kf.update(s.Q_,o),this},t.prototype.delete=function(t){var e=em(t,this.q_);return this.Kf.delete(e.Q_),this},t}()),rm=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){By(t=vy(t,qy));var n=om(t),r=t.b_(),i=new cy;return Hy(n,i,new ay(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){By(t=vy(t,qy));var e=om(t),n=t.b_(),r=new cy;return Hy(e,r,new uy(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.g_&&!t.y_)throw new Ru(Pu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new hf;return t.G_.Ni(function(){return Object(dn.b)(e,void 0,void 0,function(){var e;return Object(dn.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(dn.b)(this,void 0,void 0,function(){return Object(dn.d)(this,function(e){switch(e.label){case 0:return _f.Gs()?[4,_f.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Jd(t.A_,t.T_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.o_)},t}(),im=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Wf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof wu||(i.jf=e),i}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"A_",{get:function(){return this.o_.A_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.v_()),t)).merge,this.o_.p_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.v_().host&&Iu("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(dn.b)(e,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return[4,Gv(t)];case 1:return e=r.sent(),[4,$v(t)];case 2:return n=r.sent(),[2,(e.oc(!0),function(t){var e=ku(t);return e.Bu.delete(0),bp(e)}(n))]}})})})}(om(vy(this.o_,qy)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(dn.b)(e,void 0,void 0,function(){var e,n;return Object(dn.d)(this,function(r){switch(r.label){case 0:return[4,Gv(t)];case 1:return e=r.sent(),[4,$v(t)];case 2:return n=r.sent(),[2,(e.oc(!1),function(t){return Object(dn.b)(this,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return(e=ku(t)).Bu.add(0),[4,_p(e)];case 1:return n.sent(),e.Ku.set("Offline"),[2]}})})}(n))]}})})})}(om(vy(this.o_,qy)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&dy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Wf.enableMultiTabIndexedDbPersistence(this):this.Wf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Wf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new hf;return t.di.Ri(function(){return Object(dn.b)(e,void 0,void 0,function(){var e;return Object(dn.d)(this,function(r){switch(r.label){case 0:return e=Tg,[4,Yv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(om(vy(this.o_,qy)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ly(e);return t.di.Ri(function(){return Object(dn.b)(n,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){ku(t).Zu.add(e),e.next()},[4,Xv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.r_(),t.di.Ri(function(){return Object(dn.b)(n,void 0,void 0,function(){var e;return Object(dn.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){ku(t).Zu.delete(e)},[4,Xv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(om(t=vy(t,qy)),df(e)?e:{next:e})}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.jf)throw new Ru(Pu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new bm(this,gv(this.o_,t))}catch(t){throw lm(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new cm(this,yv(this.o_,t))}catch(t){throw lm(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new ym(this,function(t,e){if(t=vy(t,ky),hy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ev(t,null,function(t){return new Ih(Gu.X(),t)}(e))}(this.o_,t))}catch(t){throw lm(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new hf;return t.di.Ri(function(){return Object(dn.b)(n,void 0,void 0,function(){var n;return Object(dn.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return zv(t).then(function(t){return t.Mu})}(t)];case 1:return n=i.sent(),new qv(t.di,n,e,r).run(),[2]}})})}),r.promise}(om(t),function(n){return e(new nm(t,n))})}(this.o_,function(n){return t(new am(e,n))})},e.prototype.batch=function(){var t=this;return om(this.o_),new um(new tm(this.o_,function(e){return Jy(t.o_,e)}))},e}(xy);function om(t){return t.z_||sm(t),t.z_.Mf(),t.z_}function sm(t){var e=t.b_(),n=function(t,e,n){return new _u(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.A_,t.T_,e);t.z_=new Hv(t.R_,t.G_,n)}var am=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(dn.c)(e,t),e.prototype.get=function(t){var e=this,n=_m(t);return this.o_.get(n).then(function(t){return new pm(e.q_,t)})},e.prototype.set=function(t,e,n){var r=_m(t);return n?(fy("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=_m(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(dn.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=_m(t);return this.o_.delete(e),this},e}(xy),um=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.set=function(t,e,n){var r=_m(t);return n?(fy("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=_m(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(dn.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=_m(t);return this.o_.delete(e),this},e.prototype.commit=function(){return this.o_.commit()},e}(xy),cm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.U_=new Ly(e),r}return Object(dn.c)(e,t),e.Gf=function(t,n,r){if(t.length%2!=0)throw new Ru(Pu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new e(n,new tv(n.o_,r,new Yu(t)))},e.B_=function(t,n,r){return new e(n,new tv(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new bm(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new bm(this.firestore,gv(this.o_,t))}catch(t){throw lm(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof xy&&(t=t.o_),t instanceof tv&&mv(this.o_,t)},e.prototype.set=function(t,e){e=fy("DocumentReference.set",e);try{return function(t,e,n){t=vy(t,tv);var r=vy(t.firestore,qy),i=wm(t.W_,e,n);return Jy(r,Iv(_v(r),"setDoc",t.Q_,i,null!==t.W_,n).tf(t.Q_,ih.on()))}(this.o_,t,e)}catch(t){throw lm(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Yy(this.o_,t):Yy.apply(void 0,Object(dn.g)([this.o_,t,e],n))}catch(t){throw lm(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Jy(vy((t=this.o_).firestore,qy),[new mh(t.Q_,ih.on())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=hm(e),i=fm(e,function(e){return new pm(t.firestore,new Wy(t.firestore.o_,t.U_,e.Q_,e.K_,e.metadata,t.o_.W_))});return Xy(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=vy(t,tv);var e=vy(t.firestore,qy),n=om(e),r=new $y(e);return function(t,e){var n=this,r=new hf;return t.di.Ri(function(){return Object(dn.b)(n,void 0,void 0,function(){var n;return Object(dn.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o;return Object(dn.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=ku(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Bc.cs(t,e)})}(t,e)];case 1:return(r=s.sent())instanceof Oh?n.resolve(r):r instanceof Th?n.resolve(null):n.reject(new Ru(Pu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=Rf(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}})})},[4,Qv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.Q_).then(function(n){return new Wy(e,r,t.Q_,n,new dm(n instanceof Oh&&n.an,!0),t.W_)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){t=vy(t,tv);var e=vy(t.firestore,qy);return Jv(om(e),t.Q_,{source:"server"}).then(function(n){return Zy(e,t,n)})}(this.o_):function(t){t=vy(t,tv);var e=vy(t.firestore,qy);return Jv(om(e),t.Q_).then(function(n){return Zy(e,t,n)})}(this.o_)).then(function(t){return new pm(e.firestore,new Wy(e.firestore.o_,e.U_,t.Q_,t.K_,t.metadata,e.o_.W_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(xy);function lm(t,e,n){return t.message=t.message.replace(e,n),t}function hm(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!df(r))return r}return{}}function fm(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=df(t[0])?t[0]:df(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var dm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),pm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new cm(this.q_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return Qy(this.o_,t.o_)},e}(xy),gm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(pm),ym=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.U_=new Ly(e),r}return Object(dn.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,rv(this.o_,function(t,e,n){var r=e,i=Vy("where",t);return new iv(i,r,n)}(t,n,r)))}catch(t){throw lm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,rv(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=Vy("orderBy",t);return new ov(r,n)}(t,n)))}catch(t){throw lm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,rv(this.o_,function(t){return my("limit",t),new sv("limit",t,"F")}(t)))}catch(t){throw lm(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,rv(this.o_,function(t){return my("limitToLast",t),new sv("limitToLast",t,"L")}(t)))}catch(t){throw lm(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rv(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new av("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw lm(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rv(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new av("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw lm(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rv(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uv("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw lm(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rv(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uv("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw lm(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return bv(this.o_,t.o_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=vy(t,ev);var e=vy(t.firestore,qy),n=om(e),r=new $y(e);return function(t,e){var n=this,r=new hf;return t.di.Ri(function(){return Object(dn.b)(n,void 0,void 0,function(){var n;return Object(dn.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(dn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(dn.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,up(t,e,!0)];case 1:return r=c.sent(),i=new fg(e,r.Kc),o=i.bh(r.documents),s=i.Zn(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=Rf(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}})})},[4,Qv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.Z_).then(function(n){return new zy(e,r,t,n)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){t=vy(t,ev);var e=vy(t.firestore,qy),n=om(e),r=new $y(e);return Zv(n,t.Z_,{source:"server"}).then(function(n){return new zy(e,r,t,n)})}(this.o_):function(t){t=vy(t,ev);var e=vy(t.firestore,qy),n=om(e),r=new $y(e);return dv(t.Z_),Zv(n,t.Z_).then(function(n){return new zy(e,r,t,n)})}(this.o_)).then(function(t){return new mm(e.firestore,new zy(e.firestore.o_,e.U_,e.o_,t.J_))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=hm(e),i=fm(e,function(e){return new mm(t.firestore,new zy(t.firestore.o_,t.U_,t.o_,e.J_))});return Xy(this.o_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(xy),vm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new gm(this.q_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),e}(xy),mm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new ym(this.q_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map(function(e){return new gm(t.q_,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new vm(e.q_,t)})},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach(function(r){t.call(e,new gm(n.q_,r))})},e.prototype.isEqual=function(t){return Qy(this.o_,t.o_)},e}(xy),bm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new cm(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new cm(this.firestore,void 0===t?yv(this.o_):yv(this.o_,t))}catch(t){throw lm(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=vy(t.firestore,qy),r=yv(t),i=wm(t.W_,e);return Jy(n,Iv(_v(t.firestore),"addDoc",r.Q_,i,null!==t.W_,{}).tf(r.Q_,ih.exists(!1))).then(function(){return r})}(this.o_,t).then(function(t){return new cm(e.firestore,t)})},e.prototype.isEqual=function(t){return mv(this.o_,t.o_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(ym);function _m(t){return t instanceof xy&&(t=t.o_),vy(t,tv)}function wm(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Cm,Em=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Uy.bind.apply(Uy,Object(dn.g)([void 0],e))))||this}return Object(dn.c)(e,t),e.documentId=function(){return new e($u.et().J())},e.prototype.isEqual=function(t){return t instanceof xy&&(t=t.o_),t instanceof Uy&&this.o_.j_.isEqual(t.j_)},e}(xy),Om=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.serverTimestamp=function(){var t=new Cy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new _y("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ey("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Oy("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Ty("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(xy),Tm={Firestore:im,GeoPoint:Sy,Timestamp:Wu,Blob:Ny,Transaction:am,WriteBatch:um,DocumentReference:cm,DocumentSnapshot:pm,Query:ym,QueryDocumentSnapshot:gm,QuerySnapshot:mm,CollectionReference:bm,FieldPath:Em,FieldValue:Om,setLogLevel:function(t){Eu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new gn.a("firestore",function(t){return function(t,e){return new im(t,new qy(t,e),new rm)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Tm)))})(Cm=fn.a),Cm.registerVersion("@firebase/firestore","2.0.5");var Sm=n("XNiG"),Im=n("VRyK"),xm=n("qgXg"),jm=n("quSY"),Am=n("9ppp"),km=n("Ylt2");class Pm extends Sm.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Rm(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Am.a;if(this.isStopped||this.hasError?o=jm.a.EMPTY:(this.observers.push(t),o=new km.a(this,t)),r&&t.add(t=new an.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||xm.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Rm{constructor(t,e){this.time=t,this.value=e}}function Nm(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Pm(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Dm=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Lm=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Mm=n("EY2u");function Fm(t){return e=>0===t?Object(Mm.b)():e.lift(new Vm(t))}class Vm{constructor(t){if(this.total=t,this.total<0)throw new Lm}call(t,e){return e.subscribe(new Um(t,this.total))}}class Um extends en.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function qm(t=null){return e=>e.lift(new Hm(t))}class Hm{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Bm(t,this.defaultValue))}}class Bm extends en.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Wm(t=Gm){return e=>e.lift(new Km(t))}class Km{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new zm(t,this.errorFactory))}}class zm extends en.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Gm(){return new Dm}var Qm=n("SpAZ");function $m(t,e){const n=arguments.length>=2;return r=>r.pipe(t?di((e,n)=>t(e,n,r)):Qm.a,Fm(1),n?qm(e):Wm(()=>new Dm))}function Ym(t,e){return e?cn(()=>t,e):cn(()=>t)}var Xm=n("tf+s");const Jm=new r.q("angularfire2.auth.use-emulator"),Zm=new r.q("angularfire2.auth.settings"),tb=new r.q("angularfire2.auth.tenant-id"),eb=new r.q("angularfire2.auth.langugage-code"),nb=new r.q("angularfire2.auth.use-device-language"),rb=new r.q("angularfire.auth.persistence");let ib=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Ze.d(i),f=Object(Ze.h)(h),d=new Sm.a,p=Object(tn.a)(void 0).pipe(Object(an.b)(h.outsideAngular),cn(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(mt.a)(()=>Object(Ze.g)(t,i,e)),Object(mt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Ze.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Nm({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(tn.a)(null);else{p.pipe($m()).subscribe();const t=p.pipe(cn(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Nm({bufferSize:1,refCount:!1})),e=t=>new yt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(cn(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(cn(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ym(n),Object(Xm.a)(h.outsideAngular),Object(an.b)(h.insideAngular)),this.user=t.pipe(Ym(r),Object(Xm.a)(h.outsideAngular),Object(an.b)(h.insideAngular)),this.idToken=this.user.pipe(cn(t=>t?Object(_t.a)(t.getIdToken()):Object(tn.a)(null))),this.idTokenResult=this.user.pipe(cn(t=>t?Object(_t.a)(t.getIdTokenResult()):Object(tn.a)(null))),this.credential=Object(Im.a)(t,d,this.authState.pipe(di(t=>!t))).pipe(Object(mt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Xm.a)(h.outsideAngular),Object(an.b)(h.insideAngular))}return Object(Ze.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ze.c),r.Pb(Ze.b,8),r.Pb(r.B),r.Pb(r.z),r.Pb(Jm,8),r.Pb(Zm,8),r.Pb(tb,8),r.Pb(eb,8),r.Pb(nb,8),r.Pb(rb,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ze.c),Object(r.Pb)(Ze.b,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(Jm,8),Object(r.Pb)(Zm,8),Object(r.Pb)(tb,8),Object(r.Pb)(eb,8),Object(r.Pb)(nb,8),Object(r.Pb)(rb,8))},token:t,providedIn:"any"}),t})();function ob(t,e){return function(t,e=nn.b){return new yt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function sb(t,e){return ob(t,e).pipe(Object(mt.a)(t=>({payload:t,type:"query"})))}function ab(t,e){return sb(t,e).pipe(ri(void 0),ii(),Object(mt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function ub(t,e,n){return ab(t,n).pipe(ai((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return cb(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return cb(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cb(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),li(),Object(mt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function cb(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function lb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(Ze.e)(ib,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class hb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=ab(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(mt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ri(void 0),ii(),di(([t,e])=>e.length>0||!t),Object(mt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ai((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=lb(t);return ub(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return sb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(mt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(_t.a)(this.query.get(t)).pipe(Object(an.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new fb(this.ref.doc(t),this.afs)}}class fb{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=mb(n,e);return new hb(r,i,this.afs)}snapshotChanges(){return ob(this.ref,this.afs.schedulers.outsideAngular).pipe(ri(void 0),ii(),Object(mt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(mt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(_t.a)(this.ref.get(t)).pipe(Object(an.b)(this.afs.schedulers.insideAngular))}}class db{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ab(this.query,this.afs.schedulers.outsideAngular).pipe(Object(mt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),di(t=>t.length>0),this.afs.keepUnstableUntilFirst):ab(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ai((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=lb(t);return ub(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return sb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(mt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(_t.a)(this.query.get(t)).pipe(Object(an.b)(this.afs.schedulers.insideAngular))}}const pb=new r.q("angularfire2.enableFirestorePersistence"),gb=new r.q("angularfire2.firestore.persistenceSettings"),yb=new r.q("angularfire2.firestore.settings"),vb=new r.q("angularfire2.firestore.use-emulator");function mb(t,e=(t=>t)){return{query:e(t),ref:t}}let bb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Ze.d(o),this.keepUnstableUntilFirst=Object(Ze.h)(this.schedulers);const c=Object(Ze.g)(t,o,e);!yi.a.auth&&u&&Object(Ze.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Ze.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return Object(_t.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),Object(tn.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(tn.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=mb(n,e),o=this.schedulers.ngZone.run(()=>r);return new hb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new db(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new fb(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ze.c),r.Pb(Ze.b,8),r.Pb(pb,8),r.Pb(yb,8),r.Pb(r.B),r.Pb(r.z),r.Pb(gb,8),r.Pb(vb,8),r.Pb(Jm,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ze.c),Object(r.Pb)(Ze.b,8),Object(r.Pb)(pb,8),Object(r.Pb)(yb,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(gb,8),Object(r.Pb)(vb,8),Object(r.Pb)(Jm,8))},token:t,providedIn:"any"}),t})(),_b=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:pb,useValue:!0},{provide:gb,useValue:e}]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[bb]}),t})();var wb=n("w1tV");class Cb extends en.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Eb extends en.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ob=n("SeVD");function Tb(t,e,n,r,i=new Eb(t,n,r)){if(!i.closed)return e instanceof yt.a?e.subscribe(i):Object(Ob.a)(e)(i)}class Sb{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Ib(t,this.observables,this.project))}}class Ib extends Cb{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Tb(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class xb{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new jb(t,this.predicate))}}class jb extends en.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function Ab(t){return null==t}function kb(t){return"function"==typeof t.set}function Pb(t,e){return kb(e)?e:t.ref(e)}function Rb(t,e){if("string"==typeof t)return e.stringCase();if(kb(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Nb(t,e,n="on",r=nn.b){return new yt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(mt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(wb.a)())}function Db(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Lb(t,e){const{payload:n,prevKey:r,key:i}=e,o=Db(t,i),s=function(t,e){if(Ab(e))return 0;{const n=Db(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Mb(t){return(Ab(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Fb(t,e,n){return function(t,e,n){return Nb(t,"value","once",n).pipe(cn(r=>{const i=[Object(tn.a)(r)];return e.forEach(e=>i.push(Nb(t,e,"on",n))),Object(Im.a)(...i).pipe(ai(Lb,[]))}),li())}(t,e=Mb(e),n)}function Vb(t,e,n){const r=(e=Mb(e)).map(e=>Nb(t,e,"on",n));return Object(Im.a)(...r)}function Ub(t,e){return function(n,r){return Rb(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function qb(t,e){return function(){return Nb(t,"value","on",e)}}n("6Uf2");const Hb=new r.q("angularfire2.realtimeDatabaseURL"),Bb=new r.q("angularfire2.database.use-emulator");let Wb=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Ze.d(i),this.keepUnstableUntilFirst=Object(Ze.h)(this.schedulers);const a=o,u=Object(Ze.g)(t,i,e);!yi.a.auth&&s&&Object(Ze.j)(),this.database=Object(Ze.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Pb(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Ub(r,"update"),set:Ub(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Rb(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Fb(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Vb(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Nb(t,"value","on",e).pipe(Object(mt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Sb(t,n))}}(e),Object(mt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new xb(r))),Object(mt.a)(t=>t.actions));var r}(t,Vb(t,e).pipe(ai((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Fb(t,r,n).pipe(Object(mt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Pb(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>qb(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>qb(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(mt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ze.c),r.Pb(Ze.b,8),r.Pb(Hb,8),r.Pb(r.B),r.Pb(r.z),r.Pb(Bb,8),r.Pb(Jm,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ze.c),Object(r.Pb)(Ze.b,8),Object(r.Pb)(Hb,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(Bb,8),Object(r.Pb)(Jm,8))},token:t,providedIn:"any"}),t})(),Kb=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Wb]}),t})();class zb extends Sm.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Am.a;return this._value}next(t){super.next(this._value=t)}}var Gb=n("yCtX");const Qb={};class $b{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Yb(t,this.resultSelector))}}class Yb extends Cb{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Qb),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Tb(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Qb?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Xb(t){return new yt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(_t.a)(n):Object(Mm.b)()).subscribe(e)})}function Jb(t){return function(e){return 0===t?Object(Mm.b)():e.lift(new Zb(t))}}class Zb{constructor(t){if(this.total=t,this.total<0)throw new Lm}call(t,e){return e.subscribe(new t_(t,this.total))}}class t_ extends en.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function e_(t){return function(e){const n=new n_(t),r=e.lift(n);return n.caught=r}}class n_{constructor(t){this.selector=t}call(t,e){return e.subscribe(new r_(t,this.selector,this.caught))}}class r_ extends un.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new un.a(this);this.add(r);const i=Object(un.c)(n,r);i!==r&&this.add(i)}}}var i_=n("5+tZ");function o_(t,e){return Object(i_.a)(t,e,1)}var s_=n("vkgz");function a_(t){return e=>e.lift(new u_(t))}class u_{constructor(t){this.callback=t}call(t,e){return e.subscribe(new c_(t,this.callback))}}class c_ extends en.a{constructor(t,e){super(t),this.add(new jm.a(e))}}class l_{constructor(t,e){this.id=t,this.url=e}}class h_ extends l_{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class f_ extends l_{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class d_ extends l_{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class p_ extends l_{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class g_ extends l_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y_ extends l_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v_ extends l_{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class m_ extends l_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b_ extends l_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class __{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class w_{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class C_{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E_{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O_{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class T_{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S_{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const I_="primary";class x_{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function j_(t){return new x_(t)}function A_(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function k_(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function P_(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!R_(t[i],e[i]))return!1;return!0}function R_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function N_(t){return Array.prototype.concat.apply([],t)}function D_(t){return t.length>0?t[t.length-1]:null}function L_(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function M_(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(_t.a)(Promise.resolve(t)):Object(tn.a)(t)}function F_(t,e,n){return n?function(t,e){return P_(t,e)}(t.queryParams,e.queryParams)&&V_(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>R_(t[n],e[n]))}(t.queryParams,e.queryParams)&&U_(t.root,e.root)}function V_(t,e){if(!K_(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!V_(t.children[n],e.children[n]))return!1}return!0}function U_(t,e){return q_(t,e,e.segments)}function q_(t,e,n){if(t.segments.length>n.length)return!!K_(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!K_(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!U_(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!K_(t.segments,r)&&!!t.children.primary&&q_(t.children.primary,e,i)}}class H_{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=j_(this.queryParams)),this._queryParamMap}toString(){return $_.serialize(this)}}class B_{constructor(t,e){this.segments=t,this.children=e,this.parent=null,L_(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Y_(this)}}class W_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=j_(this.parameters)),this._parameterMap}toString(){return rw(this)}}function K_(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function z_(t,e){let n=[];return L_(t.children,(t,r)=>{r===I_&&(n=n.concat(e(t,r)))}),L_(t.children,(t,r)=>{r!==I_&&(n=n.concat(e(t,r)))}),n}class G_{}class Q_{parse(t){const e=new uw(t);return new H_(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+X_(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Z_(e)}=${Z_(t)}`).join("&"):`${Z_(e)}=${Z_(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const $_=new Q_;function Y_(t){return t.segments.map(t=>rw(t)).join("/")}function X_(t,e){if(!t.hasChildren())return Y_(t);if(e){const e=t.children.primary?X_(t.children.primary,!1):"",n=[];return L_(t.children,(t,e)=>{e!==I_&&n.push(`${e}:${X_(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=z_(t,(e,n)=>n===I_?[X_(t.children.primary,!1)]:[`${n}:${X_(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Y_(t)}/${e[0]}`:`${Y_(t)}/(${e.join("//")})`}}function J_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Z_(t){return J_(t).replace(/%3B/gi,";")}function tw(t){return J_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ew(t){return decodeURIComponent(t)}function nw(t){return ew(t.replace(/\+/g,"%20"))}function rw(t){return`${tw(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${tw(t)}=${tw(e[t])}`).join("")}`;var e}const iw=/^[^\/()?;=#]+/;function ow(t){const e=t.match(iw);return e?e[0]:""}const sw=/^[^=?&#]+/,aw=/^[^?&#]+/;class uw{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new B_([],{}):new B_([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new B_(t,e)),n}parseSegment(){const t=ow(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new W_(ew(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ow(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ow(this.remaining);t&&(n=t,this.capture(n))}t[ew(e)]=ew(n)}parseQueryParam(t){const e=function(t){const e=t.match(sw);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(aw);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=nw(e),i=nw(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ow(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=I_);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new B_([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class cw{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=lw(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=lw(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=hw(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return hw(t,this._root).map(t=>t.value)}}function lw(t,e){if(t===e.value)return e;for(const n of e.children){const e=lw(t,n);if(e)return e}return null}function hw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=hw(t,n);if(r.length)return r.unshift(e),r}return[]}class fw{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function dw(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class pw extends cw{constructor(t,e){super(t),this.snapshot=e,_w(this,t)}toString(){return this.snapshot.toString()}}function gw(t,e){const n=function(t,e){const n=new mw([],{},{},"",{},I_,e,null,t.root,-1,{});return new bw("",new fw(n,[]))}(t,e),r=new zb([new W_("",{})]),i=new zb({}),o=new zb({}),s=new zb({}),a=new zb(""),u=new yw(r,i,s,a,o,I_,e,n.root);return u.snapshot=n.root,new pw(new fw(u,[]),n)}class yw{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(mt.a)(t=>j_(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(mt.a)(t=>j_(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vw(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class mw{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=j_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=j_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bw extends cw{constructor(t,e){super(e),this.url=t,_w(this,e)}toString(){return ww(this._root)}}function _w(t,e){e.value._routerState=t,e.children.forEach(e=>_w(t,e))}function ww(t){const e=t.children.length>0?` { ${t.children.map(ww).join(", ")} } `:"";return`${t.value}${e}`}function Cw(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,P_(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),P_(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!P_(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),P_(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ew(t,e){return P_(t.params,e.params)&&function(t,e){return K_(t,e)&&t.every((t,n)=>P_(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Ew(t.parent,e.parent))}function Ow(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ow(t,e,r);return Ow(t,e)})}(t,e,n);return new fw(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Tw(e,t),t}{const n=new yw(new zb((r=e.value).url),new zb(r.params),new zb(r.queryParams),new zb(r.fragment),new zb(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ow(t,e));return new fw(n,i)}}var r}function Tw(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Tw(t.children[n],e.children[n])}function Sw(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Iw(t){return"object"==typeof t&&null!=t&&t.outlets}function xw(t,e,n,r,i){let o={};return r&&L_(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new H_(n.root===t?e:jw(n.root,t,e),o,i)}function jw(t,e,n){const r={};return L_(t.children,(t,i)=>{r[i]=t===e?n:jw(t,e,n)}),new B_(t.segments,r)}class Aw{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Sw(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Iw);if(r&&r!==D_(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kw{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Pw(t,e,n){if(t||(t=new B_([],{})),0===t.segments.length&&t.hasChildren())return Rw(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Iw(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Mw(a,u,e))return o;r+=2}else{if(!Mw(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new B_(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new B_(t.segments.slice(r.pathIndex),t.children),Rw(e,0,i)}return r.match&&0===i.length?new B_(t.segments,{}):r.match&&!t.hasChildren()?Nw(t,e,n):r.match?Rw(t,0,i):Nw(t,e,n)}function Rw(t,e,n){if(0===n.length)return new B_(t.segments,{});{const r=function(t){return Iw(t[0])?t[0].outlets:{[I_]:t}}(n),i={};return L_(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Pw(t.children[r],e,n))}),L_(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new B_(t.segments,i)}}function Nw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Iw(o)){const t=Dw(o.outlets);return new B_(r,t)}if(0===i&&Sw(n[0])){r.push(new W_(t.segments[e].path,n[0])),i++;continue}const s=Iw(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&Sw(a)?(r.push(new W_(s,Lw(a))),i+=2):(r.push(new W_(s,{})),i++)}return new B_(r,{})}function Dw(t){const e={};return L_(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Nw(new B_([],{}),0,t))}),e}function Lw(t){const e={};return L_(t,(t,n)=>e[n]=""+t),e}function Mw(t,e,n){return t==n.path&&P_(e,n.parameters)}class Fw{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Cw(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=dw(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),L_(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=dw(t),i=t.value.component?n.children:e;L_(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=dw(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new T_(t.value.snapshot))}),t.children.length&&this.forwardEvent(new E_(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Cw(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Vw(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Vw(t){Cw(t.value),t.children.forEach(Vw)}class Uw{constructor(t,e){this.routes=t,this.module=e}}function qw(t){return"function"==typeof t}function Hw(t){return t instanceof H_}const Bw=Symbol("INITIAL_VALUE");function Ww(){return cn(t=>function(...t){let e=void 0,n=void 0;return Object(ni.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(vt.a)(t[0])&&(t=t[0]),Object(Gb.a)(t,n).lift(new $b(e))}(...t.map(t=>t.pipe(Fm(1),ri(Bw)))).pipe(ai((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Bw)return t;if(r===Bw&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Hw(r))return r}return t},t)},Bw),di(t=>t!==Bw),Object(mt.a)(t=>Hw(t)?t:!0===t),Fm(1)))}let Kw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Jb(0,"router-outlet")},directives:function(){return[DC]},encapsulation:2}),t})();function zw(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Gw(r,Qw(e,r))}}function Gw(t,e){t.children&&zw(t.children,e)}function Qw(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function $w(t){const e=t.children&&t.children.map($w),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==I_&&(n.component=Kw),n}function Yw(t){return t.outlet||I_}class Xw{constructor(t){this.segmentGroup=t||null}}class Jw{constructor(t){this.urlTree=t}}function Zw(t){return new yt.a(e=>e.error(new Xw(t)))}function tC(t){return new yt.a(e=>e.error(new Jw(t)))}function eC(t){return new yt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class nC{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,I_).pipe(Object(mt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(e_(t=>{if(t instanceof Jw)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Xw)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,I_).pipe(Object(mt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(e_(t=>{if(t instanceof Xw)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new B_([],{[I_]:t}):t;return new H_(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(mt.a)(t=>new B_([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(tn.a)({});const n=[],r=[],i={};return L_(t,(t,o)=>{const s=e(o,t).pipe(Object(mt.a)(t=>i[o]=t));o===I_?n.push(s):r.push(s)}),tn.a.apply(null,n.concat(r)).pipe(ti(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?di((e,n)=>t(e,n,r)):Qm.a,Jb(1),n?qm(e):Wm(()=>new Dm))}(),Object(mt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){const s=function(t){return t.reduce((t,e)=>{const n=Yw(e);return t.has(n)?t.get(n).push(e):t.set(n,[e]),t},new Map)}(n);s.has(i)||s.set(i,[]);const a=n=>Object(_t.a)(n).pipe(o_(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(e_(t=>{if(t instanceof Xw)return Object(tn.a)(null);throw t}))),$m(t=>null!==t),e_(t=>{if(t instanceof Dm||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(tn.a)(new B_([],{}));throw new Xw(e)}throw t})),u=Array.from(s.entries()).map(([t,e])=>{const n=a(e);return t===i?n:n.pipe(Object(mt.a)(()=>null),e_(()=>Object(tn.a)(null)))});return Object(_t.a)(u).pipe(t=>t.lift(new $b(void 0)),$m(),Object(mt.a)(t=>t.find(t=>null!==t)))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Yw(r)!==o&&""!==r.path?Zw(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Zw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?tC(i):this.lineralizeSegments(n,i).pipe(Object(i_.a)(n=>{const i=new B_(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=rC(e,r,i);if(!s)return Zw(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?tC(l):this.lineralizeSegments(r,l).pipe(Object(i_.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(mt.a)(t=>(n._loadedConfig=t,new B_(r,{})))):Object(tn.a)(new B_(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=rC(e,n,r);if(!i)return Zw(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(i_.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>oC(t,e,n)&&Yw(n)!==I_)}(t,n,r)?{segmentGroup:iC(new B_(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&Yw(r)!==I_&&(n[Yw(r)]=new B_([],{}));return n}(r,new B_(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>oC(t,e,n))}(t,n,r)?{segmentGroup:iC(new B_(t.segments,function(t,e,n,r){const i={};for(const o of n)oC(t,e,o)&&!r[Yw(o)]&&(i[Yw(o)]=new B_([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(mt.a)(t=>new B_(o,t))):0===r.length&&0===s.length?Object(tn.a)(new B_(o,{})):this.expandSegment(n,i,r,s,I_,!0).pipe(Object(mt.a)(t=>new B_(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(tn.a)(new Uw(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(tn.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(i_.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(mt.a)(t=>(e._loadedConfig=t,t))):function(t){return new yt.a(e=>e.error(A_(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(tn.a)(new Uw([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(tn.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&qw(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!qw(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return M_(o)});return Object(tn.a)(i).pipe(Ww(),Object(s_.a)(t=>{if(!Hw(t))return;const e=A_(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(mt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(tn.a)(n);if(r.numberOfChildren>1||!r.children.primary)return eC(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new H_(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return L_(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return L_(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new B_(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function rC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||k_)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function iC(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new B_(t.segments.concat(e.segments),e.children)}return t}function oC(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}class sC{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class aC{constructor(t,e){this.component=t,this.route=e}}function uC(t,e,n){const r=t._root;return lC(r,e?e._root:null,n,[r.value])}function cC(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function lC(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=dw(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!K_(t.url,e.url);case"pathParamsOrQueryParamsChange":return!K_(t.url,e.url)||!P_(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ew(t,e)||!P_(t.queryParams,e.queryParams);case"paramsChange":default:return!Ew(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new sC(r)):(o.data=s.data,o._resolvedData=s._resolvedData),lC(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new aC(a.outlet.component,s))}else s&&hC(e,a,i),i.canActivateChecks.push(new sC(r)),lC(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),L_(o,(t,e)=>hC(t,n.getContext(e),i)),i}function hC(t,e,n){const r=dw(t),i=t.value;L_(r,(t,r)=>{hC(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new aC(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function fC(t,e){return null!==t&&e&&e(new O_(t)),Object(tn.a)(!0)}function dC(t,e){return null!==t&&e&&e(new C_(t)),Object(tn.a)(!0)}function pC(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(tn.a)(!0);const i=r.map(r=>Xb(()=>{const i=cC(r,e,n);let o;if(function(t){return t&&qw(t.canActivate)}(i))o=M_(i.canActivate(e,t));else{if(!qw(i))throw new Error("Invalid CanActivate guard");o=M_(i(e,t))}return o.pipe($m())}));return Object(tn.a)(i).pipe(Ww())}function gC(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Xb(()=>{const i=e.guards.map(i=>{const o=cC(i,e.node,n);let s;if(function(t){return t&&qw(t.canActivateChild)}(o))s=M_(o.canActivateChild(r,t));else{if(!qw(o))throw new Error("Invalid CanActivateChild guard");s=M_(o(r,t))}return s.pipe($m())});return Object(tn.a)(i).pipe(Ww())}));return Object(tn.a)(i).pipe(Ww())}class yC{}class vC{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=_C(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,I_),n=new mw([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},I_,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new fw(n,e),i=new bw(this.url,r);return this.inheritParamsAndData(i._root),Object(tn.a)(i)}catch(t){return new yt.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=vw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=z_(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===I_?-1:e.value.outlet===I_?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof yC))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new yC}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new yC;if((t.outlet||I_)!==r)throw new yC;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?D_(n).parameters:{};i=new mw(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,CC(t),r,t.component,t,mC(e),bC(e)+n.length,EC(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new yC;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||k_)(n,t,e);if(!r)throw new yC;const i={};L_(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new mw(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,CC(t),r,t.component,t,mC(e),bC(e)+o.length,EC(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=_C(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new fw(i,t)]}if(0===a.length&&0===c.length)return[new fw(i,[])];const l=this.processSegment(a,u,c,I_);return[new fw(i,l)]}}function mC(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bC(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function _C(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>wC(t,e,n)&&Yw(n)!==I_)}(t,n,r)){const i=new B_(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Yw(o)!==I_){const n=new B_([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Yw(o)]=n}return i}(t,e,r,new B_(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>wC(t,e,n))}(t,n,r)){const o=new B_(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(wC(t,n,a)&&!i[Yw(a)]){const n=new B_([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Yw(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new B_(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function wC(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function CC(t){return t.data||{}}function EC(t){return t.resolve||{}}function OC(t){return function(e){return e.pipe(cn(e=>{const n=t(e);return n?Object(_t.a)(n).pipe(Object(mt.a)(()=>e)):Object(_t.a)([e])}))}}class TC extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const SC=new r.q("ROUTES");class IC{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(mt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Uw(N_(r.injector.get(SC)).map($w),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(_t.a)(this.loader.load(t)):M_(t()).pipe(Object(i_.a)(t=>t instanceof r.v?Object(tn.a)(t):Object(_t.a)(this.compiler.compileModuleAsync(t))))}}class xC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jC,this.attachRef=null}}class jC{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new xC,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class AC{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function kC(t){throw t}function PC(t,e,n){return e.parse("/")}function RC(t,e){return Object(tn.a)(null)}let NC=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Sm.a,this.errorHandler=kC,this.malformedUriErrorHandler=PC,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RC,afterPreactivation:RC},this.urlHandlingStrategy=new AC,this.routeReuseStrategy=new TC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new H_(new B_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new IC(s,a,t=>this.triggerEvent(new __(t)),t=>this.triggerEvent(new w_(t))),this.routerState=gw(this.currentUrlTree,this.rootComponentType),this.transitions=new zb({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(di(t=>0!==t.id),Object(mt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),cn(t=>{let n=!1,r=!1;return Object(tn.a)(t).pipe(Object(s_.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cn(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(tn.a)(t).pipe(cn(t=>{const n=this.transitions.getValue();return e.next(new h_(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Mm.a:[t]}),cn(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(cn(t=>function(t,e,n,r,i){return new nC(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(mt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(s_.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(i_.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new vC(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(mt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(s_.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(s_.a)(t=>{const n=new g_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new h_(n,this.serializeUrl(r),i,o);e.next(a);const u=gw(r,this.rootComponentType).snapshot;return Object(tn.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Mm.a}),OC(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(s_.a)(t=>{const e=new y_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(mt.a)(t=>Object.assign(Object.assign({},t),{guards:uC(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(i_.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(tn.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(_t.a)(t).pipe(Object(i_.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(tn.a)(!0);const s=o.map(o=>{const s=cC(o,e,i);let a;if(function(t){return t&&qw(t.canDeactivate)}(s))a=M_(s.canDeactivate(t,e,n,r));else{if(!qw(s))throw new Error("Invalid CanDeactivate guard");a=M_(s(t,e,n,r))}return a.pipe($m())});return Object(tn.a)(s).pipe(Ww())}(t.component,t.route,n,e,r)),$m(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(i_.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(_t.a)(e).pipe(o_(e=>Object(_t.a)([dC(e.route.parent,r),fC(e.route,r),gC(t,e.path,n),pC(t,e.route,n)]).pipe(ti(),$m(t=>!0!==t,!0))),$m(t=>!0!==t,!0))}(r,o,t,e):Object(tn.a)(n)),Object(mt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(s_.a)(t=>{if(Hw(t.guardsResult)){const e=A_(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(s_.a)(t=>{const e=new v_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),di(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new d_(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),OC(t=>{if(t.guards.canActivateChecks.length)return Object(tn.a)(t).pipe(Object(s_.a)(t=>{const e=new m_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),cn(t=>{let n=!1;return Object(tn.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(i_.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(tn.a)(t);let o=0;return Object(_t.a)(n).pipe(o_(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(tn.a)({});const o={};return Object(_t.a)(i).pipe(Object(i_.a)(i=>function(t,e,n,r){const i=cC(t,e,r);return M_(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(s_.a)(t=>{o[i]=t}))),Jb(1),Object(i_.a)(()=>Object.keys(o).length===i.length?Object(tn.a)(o):Mm.a))}(t._resolve,t,e,r).pipe(Object(mt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),vw(t,n).resolve),null)))}(t.route,e,r,i)),Object(s_.a)(()=>o++),Jb(1),Object(i_.a)(e=>o===n.length?Object(tn.a)(t):Mm.a))}))}),Object(s_.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new d_(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(s_.a)(t=>{const e=new b_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),OC(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(mt.a)(t=>{const e=function(t,e,n){const r=Ow(t,e._root,n?n._root:void 0);return new pw(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(s_.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(mt.a)(t=>(new Fw(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(s_.a)({next(){n=!0},complete(){n=!0}}),a_(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new d_(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),e_(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Hw(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new d_(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new p_(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Jc){t.reject(Jc)}}var i;return Mm.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){zw(t),this.config=t.map($w),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return xw(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Aw(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return L_(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Aw(n,e,r)}(n);if(o.toRoot())return xw(e.root,new B_([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new kw(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new kw(t,t===e.root,0)}const r=Sw(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new kw(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Rw(s.segmentGroup,s.index,o.commands):Pw(s.segmentGroup,s.index,o.commands);return xw(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Hw(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Hw(t))return F_(this.currentUrlTree,t,e);const n=this.parseUrl(t);return F_(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new f_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.M),r.Pb(G_),r.Pb(jC),r.Pb(C),r.Pb(r.r),r.Pb(r.w),r.Pb(r.i),r.Pb(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),DC=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||I_,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new LC(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(jC),r.Ib(r.P),r.Ib(r.j),r.Qb("name"),r.Ib(r.h))},t.\u0275dir=r.Db({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class LC{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===yw?this.route:t===jC?this.childContexts:this.parent.get(t,e)}}class MC{}class FC{preload(t,e){return Object(tn.a)(null)}}let VC=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new IC(e,n,e=>t.triggerEvent(new __(e)),e=>t.triggerEvent(new w_(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(di(t=>t instanceof f_),o_(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(_t.a)(n).pipe(Object(Zr.a)(),Object(mt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(i_.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(NC),r.Pb(r.w),r.Pb(r.i),r.Pb(r.r),r.Pb(MC))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),UC=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof h_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof f_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof S_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new S_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(NC),r.Pb(F),r.Pb(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const qC=new r.q("ROUTER_CONFIGURATION"),HC=new r.q("ROUTER_FORROOT_GUARD"),BC=[C,{provide:G_,useClass:Q_},{provide:NC,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new NC(null,t,e,n,r,i,o,N_(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[G_,jC,C,r.r,r.w,r.i,SC,qC,[class{},new r.A],[class{},new r.A]]},jC,{provide:yw,useFactory:function(t){return t.routerState.root},deps:[NC]},{provide:r.w,useClass:r.J},VC,FC,class{preload(t,e){return e().pipe(e_(()=>Object(tn.a)(null)))}},{provide:qC,useValue:{enableTracing:!1}}];function WC(){return new r.y("Router",NC)}let KC=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[BC,$C(e),{provide:HC,useFactory:QC,deps:[[NC,new r.A,new r.I]]},{provide:qC,useValue:n||{}},{provide:v,useFactory:GC,deps:[u,[new r.p(b),new r.A],qC]},{provide:UC,useFactory:zC,deps:[NC,F,qC]},{provide:MC,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:FC},{provide:r.y,multi:!0,useFactory:WC},[YC,{provide:r.d,multi:!0,useFactory:XC,deps:[YC]},{provide:ZC,useFactory:JC,deps:[YC]},{provide:r.b,multi:!0,useExisting:ZC}]]}}static forChild(e){return{ngModule:t,providers:[$C(e)]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Pb(HC,8),r.Pb(NC,8))}}),t})();function zC(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new UC(t,e,n)}function GC(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function QC(t){return"guarded"}function $C(t){return[{provide:r.a,multi:!0,useValue:t},{provide:SC,multi:!0,useValue:t}]}let YC=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Sm.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(NC),r=this.injector.get(qC);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(tn.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(qC),n=this.injector.get(VC),i=this.injector.get(UC),o=this.injector.get(NC),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.r))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();function XC(t){return t.appInitializer.bind(t)}function JC(t){return t.bootstrapListener.bind(t)}const ZC=new r.q("Router Initializer");let tE=(()=>{class t{constructor(t,e){this.afs=t,this.firebase=e,this.productsCollection=this.afs.collection("products"),this.products=this.productsCollection.snapshotChanges().pipe(Object(mt.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,e}))),console.log(this.products)}insertImageDetails(t){console.log(t),this.productsCollection.add(t)}getData(){return this.products}getFourProduct(t){return t}getOnCatalog(t){return t.slice(0,9)}seeMoreFunction(t,e){return t}addProduct(t){this.productsCollection.add(t)}deleteProduct(t){this.productDoc=this.afs.doc("products/"+t.id),this.productDoc.delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(bb),r.Pb(Wb))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function eE(t,e){if(1&t&&(r.Lb(0,"a",29),r.Lb(1,"div",30),r.Jb(2,"div",31),r.Kb(),r.Lb(3,"div",32),r.Lb(4,"p",33),r.ic(5),r.Kb(),r.Lb(6,"p",34),r.ic(7),r.Kb(),r.Kb(),r.Kb()),2&t){const t=e.$implicit;r.Yb("href","/product/",t.id,"",r.dc),r.yb(2),r.fc("background-image: url(",t.image_1,")"),r.yb(3),r.jc(t.name),r.yb(2),r.kc("",t.price,"\u10da")}}function nE(t,e){if(1&t&&(r.Lb(0,"div",27),r.gc(1,eE,8,6,"a",28),r.Kb()),2&t){const t=r.Wb();r.yb(1),r.Xb("ngForOf",t.products)}}function rE(t,e){if(1&t&&(r.Lb(0,"a",31),r.Lb(1,"div",32),r.Jb(2,"div",33),r.Kb(),r.Lb(3,"div",34),r.Lb(4,"p",35),r.ic(5),r.Kb(),r.Lb(6,"p",36),r.ic(7),r.Kb(),r.Kb(),r.Kb()),2&t){const t=e.$implicit;r.Yb("href","/product/",t.id,"",r.dc),r.yb(2),r.fc("background-image: url(",t.image_1,")"),r.yb(3),r.jc(t.name),r.yb(2),r.kc("",t.price,"\u10da")}}function iE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",37),r.Sb("click",function(){return r.cc(t),r.Wb(2).seeMoreFunction()}),r.Lb(1,"a",38),r.ic(2,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),r.Kb(),r.Kb()}}function oE(t,e){if(1&t&&(r.Lb(0,"div",28),r.gc(1,rE,8,6,"a",29),r.gc(2,iE,3,0,"div",30),r.Kb()),2&t){const t=r.Wb();r.yb(1),r.Xb("ngForOf",t.products),r.yb(1),r.Xb("ngIf",t.products.length>6)}}function sE(t,e){1&t&&(r.Lb(0,"h1",39),r.ic(1,"\u10e1\u10d0\u10db\u10ec\u10e3\u10ee\u10d0\u10e0\u10dd\u10d3 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8 \u10d5\u10d4\u10e0 \u10db\u10dd\u10d8\u10eb\u10d4\u10d1\u10dc\u10d0."),r.Kb())}function aE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",26),r.Lb(1,"div",27),r.Sb("click",function(){return r.cc(t),r.Wb().selectFirst()}),r.Kb(),r.Kb()}if(2&t){const t=r.Wb();r.yb(1),r.fc("background-image: url(",t.product.image_1,");")}}function uE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",28),r.Lb(1,"div",29),r.Sb("click",function(){return r.cc(t),r.Wb().selectTwo()}),r.Kb(),r.Kb()}if(2&t){const t=r.Wb();r.yb(1),r.fc("background-image: url(",t.product.image_2,");")}}function cE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",26),r.Lb(1,"div",30),r.Sb("click",function(){return r.cc(t),r.Wb().selectThree()}),r.Kb(),r.Kb()}if(2&t){const t=r.Wb();r.yb(1),r.fc("background-image: url(",t.product.image_3,");")}}function lE(t,e){if(1&t&&(r.Lb(0,"a",33),r.Lb(1,"div",34),r.Jb(2,"div",35),r.Kb(),r.Lb(3,"div",36),r.Lb(4,"p",37),r.ic(5),r.Kb(),r.Lb(6,"p",38),r.ic(7),r.Kb(),r.Kb(),r.Kb()),2&t){const t=e.$implicit;r.Yb("href","/product/",t.id,"",r.dc),r.yb(2),r.fc("background-image: url(",t.image_1,")"),r.yb(3),r.jc(t.name),r.yb(2),r.kc("",t.price,"\u10da")}}function hE(t,e){if(1&t&&(r.Lb(0,"div",31),r.gc(1,lE,8,6,"a",32),r.Kb()),2&t){const t=r.Wb();r.yb(1),r.Xb("ngForOf",t.products)}}function fE(t,e){if(1&t&&(r.Lb(0,"option",50),r.ic(1),r.Kb()),2&t){const t=e.$implicit;r.Xb("ngValue",t.value),r.yb(1),r.jc(t.name)}}function dE(t,e){1&t&&(r.Lb(0,"div",51),r.ic(1,"\u10d2\u10d7\u10ee\u10dd\u10d5\u10d7 \u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10dd\u10d7 \u10db\u10dd\u10dc\u10d0\u10ea\u10d4\u10db\u10d4\u10d1\u10d8 \u10d0\u10ee\u10d0\u10da\u10d8 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8\u10e1\u10d7\u10d5\u10d8\u10e1"),r.Kb())}function pE(t,e){1&t&&(r.Lb(0,"div",52),r.ic(1,"\u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8 \u10ec\u10d0\u10e0\u10db\u10d0\u10e2\u10d4\u10d1\u10d8\u10d7 \u10d0\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d0"),r.Kb())}function gE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",57),r.Lb(1,"div",58),r.Jb(2,"div",59),r.Kb(),r.Lb(3,"div",60),r.Lb(4,"p",61),r.ic(5),r.Kb(),r.Lb(6,"p",62),r.ic(7),r.Kb(),r.Kb(),r.Lb(8,"div",31),r.Lb(9,"button",63),r.Sb("click",function(n){r.cc(t);const i=e.$implicit;return r.Wb(3).deleteProduct(n,i)}),r.ic(10,"\u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8\u10e1 \u10ec\u10d0\u10e8\u10da\u10d0"),r.Kb(),r.Lb(11,"a",64),r.ic(12,"\u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),r.Kb(),r.Kb(),r.Kb()}if(2&t){const t=e.$implicit;r.yb(2),r.fc("background-image: url(",t.image_1,")"),r.yb(3),r.jc(t.name),r.yb(2),r.kc("",t.price,"\u10da"),r.yb(4),r.Yb("href","/product/",t.id,"",r.dc)}}function yE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",53),r.gc(1,gE,13,6,"div",54),r.Lb(2,"div",55),r.Sb("click",function(){return r.cc(t),r.Wb(2).seeMoreFunction()}),r.Lb(3,"a",56),r.ic(4,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),r.Kb(),r.Kb(),r.Kb()}if(2&t){const t=r.Wb(2);r.yb(1),r.Xb("ngForOf",t.products)}}function vE(t,e){1&t&&(r.Lb(0,"h1",65),r.ic(1,"\u10e1\u10d0\u10db\u10ec\u10e3\u10ee\u10d0\u10e0\u10dd\u10d3 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8 \u10d5\u10d4\u10e0 \u10db\u10dd\u10d8\u10eb\u10d4\u10d1\u10dc\u10d0."),r.Kb())}function mE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div"),r.Lb(1,"div",3),r.Lb(2,"h1",4),r.ic(3,"\u10db\u10dd\u10d2\u10d4\u10e1\u10d0\u10da\u10db\u10d4\u10d1\u10d8\u10d7 - GMT Admin Panel"),r.Kb(),r.Lb(4,"div",5),r.Lb(5,"h1",6),r.ic(6,"\u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8\u10e1 \u10d0\u10e2\u10d5\u10d8\u10e0\u10d7\u10d5\u10d0"),r.Kb(),r.Lb(7,"form",7),r.Sb("ngSubmit",function(){r.cc(t);const e=r.Wb();return e.onSubmit(e.formTemplate.value)}),r.Lb(8,"div",8),r.Lb(9,"label",9),r.ic(10,"\u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8\u10e1 \u10e1\u10d0\u10ee\u10d4\u10da\u10d8:"),r.Kb(),r.Lb(11,"input",10),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().product.name=e}),r.Kb(),r.Kb(),r.Lb(12,"div",11),r.Lb(13,"label",9),r.ic(14,"\u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10d4\u10d7 \u10d0\u10e6\u10ec\u10d4\u10e0\u10d0:"),r.Kb(),r.Lb(15,"input",12),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().product.description=e}),r.Kb(),r.Kb(),r.Lb(16,"div",11),r.Lb(17,"label",9),r.ic(18,"\u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10d4\u10d7 \u10e4\u10d0\u10e1\u10d8 (\u10da\u10d0\u10e0\u10d8):"),r.Kb(),r.Lb(19,"input",13),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().product.price=e}),r.Kb(),r.Kb(),r.Lb(20,"div",11),r.Lb(21,"label",9),r.ic(22,"\u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10d4\u10d7 \u10d9\u10d0\u10e2\u10d4\u10d2\u10dd\u10e0\u10d8\u10d0 (\u10d0\u10d8\u10e0\u10e9\u10d8\u10d4\u10d7 \u10e9\u10d0\u10db\u10dd\u10dc\u10d0\u10d7\u10d5\u10d0\u10da\u10e8\u10d8):"),r.Kb(),r.Lb(23,"select",14),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().product.category=e}),r.Lb(24,"option",15),r.ic(25,"Select your option"),r.Kb(),r.gc(26,fE,2,2,"option",16),r.Kb(),r.Kb(),r.Lb(27,"div",11),r.Lb(28,"label",9),r.ic(29,"\u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10d4\u10d7 ImageUrl (firebase):"),r.Kb(),r.Lb(30,"input",17),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().product.image_1=e})("change",function(e){return r.cc(t),r.Wb().upload(e)}),r.Kb(),r.Kb(),r.Lb(31,"div",11),r.Lb(32,"label",9),r.ic(33,"\u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10d4\u10d7 SUB__ImageUrl (firebase):"),r.Kb(),r.Lb(34,"input",18),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().product.image_2=e})("change",function(e){return r.cc(t),r.Wb().upload_1(e)}),r.Kb(),r.Kb(),r.Lb(35,"div",11),r.Lb(36,"label",9),r.ic(37,"\u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10d4\u10d7 SUB__ImageUrl (firebase):"),r.Kb(),r.Lb(38,"input",19),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().product.image_3=e})("change",function(e){return r.cc(t),r.Wb().upload_2(e)}),r.Kb(),r.Kb(),r.Jb(39,"input",20),r.Kb(),r.gc(40,dE,2,0,"div",21),r.gc(41,pE,2,0,"div",22),r.Kb(),r.Kb(),r.Lb(42,"main",23),r.Lb(43,"div",24),r.Lb(44,"div",25),r.Lb(45,"div",26),r.ic(46,"\u10d9\u10d0\u10e2\u10d0\u10da\u10dd\u10d2\u10d8"),r.Kb(),r.Lb(47,"div",27),r.Lb(48,"input",28),r.Sb("change",function(e){return r.cc(t),r.Wb().textSearchOnChange(e)}),r.Kb(),r.Kb(),r.Lb(49,"div"),r.Lb(50,"div",29),r.Lb(51,"button",30),r.Lb(52,"div",31),r.Lb(53,"span",32),r.ic(54,"\u10d1\u10dd\u10da\u10dd\u10e1 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10e3\u10da\u10d8"),r.Kb(),r.Vb(),r.Lb(55,"svg",33),r.Jb(56,"path",34),r.Jb(57,"path",35),r.Kb(),r.Kb(),r.Kb(),r.Ub(),r.Lb(58,"div",36),r.Lb(59,"a",37),r.ic(60,"\u10d1\u10dd\u10da\u10dd\u10e1 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10e3\u10da\u10d8"),r.Kb(),r.Lb(61,"a",37),r.ic(62,"\u10e4\u10d0\u10e1\u10d4\u10d1\u10d8 \u10d9\u10da\u10d4\u10d1\u10d8\u10e1 \u10db\u10d8\u10ee\u10d4\u10d3\u10d5\u10d8\u10d7"),r.Kb(),r.Lb(63,"a",37),r.ic(64,"\u10e4\u10d0\u10e1\u10d4\u10d1\u10d8 \u10d6\u10e0\u10d3\u10d8\u10e1 \u10db\u10d8\u10ee\u10d4\u10d3\u10d5\u10d8\u10d7"),r.Kb(),r.Kb(),r.Kb(),r.Lb(65,"div",38),r.Lb(66,"p",39),r.ic(67,"\u10d9\u10d0\u10e2\u10d4\u10d2\u10dd\u10e0\u10d8\u10d4\u10d1\u10d8"),r.Kb(),r.Lb(68,"div",8),r.Lb(69,"a",40),r.Sb("click",function(){return r.cc(t),r.Wb().allProduct()}),r.Lb(70,"p",41),r.ic(71,"\u10e7\u10d5\u10d4\u10da\u10d0 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8"),r.Kb(),r.Kb(),r.Lb(72,"a",40),r.Sb("click",function(){return r.cc(t),r.Wb().searchForOffice()}),r.Lb(73,"p",42),r.ic(74,"\u10e1\u10d0\u10dd\u10e4\u10d8\u10e1\u10d4 \u10d0\u10d5\u10d4\u10ef\u10d8"),r.Kb(),r.Kb(),r.Lb(75,"a",40),r.Sb("click",function(){return r.cc(t),r.Wb().searchForHouse()}),r.Lb(76,"p",42),r.ic(77,"\u10e1\u10d0\u10ee\u10da\u10d8\u10e1 \u10d0\u10d5\u10d4\u10ef\u10d8"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(78,"div",38),r.Lb(79,"p",39),r.ic(80,"\u10e4\u10d0\u10e1\u10d8\u10e1 \u10d3\u10d8\u10d0\u10de\u10d0\u10d6\u10dd\u10dc\u10d8"),r.Kb(),r.Lb(81,"div",43),r.Jb(82,"input",44),r.Jb(83,"input",45),r.Lb(84,"div",46),r.Sb("click",function(){return r.cc(t),r.Wb().searchWithPrice()}),r.Jb(85,"img",47),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.gc(86,yE,5,1,"div",48),r.gc(87,vE,2,0,"ng-template",null,49,r.hc),r.Kb(),r.Kb(),r.Kb()}if(2&t){const t=r.bc(88),e=r.Wb();r.yb(7),r.Xb("formGroup",e.formTemplate),r.yb(4),r.Xb("ngModel",e.product.name),r.yb(4),r.Xb("ngModel",e.product.description),r.yb(4),r.Xb("ngModel",e.product.price),r.yb(4),r.Xb("ngModel",e.product.category),r.yb(3),r.Xb("ngForOf",e.categories),r.yb(4),r.Xb("ngModel",e.product.image_1),r.yb(4),r.Xb("ngModel",e.product.image_2),r.yb(4),r.Xb("ngModel",e.product.image_3),r.yb(2),r.Xb("ngIf",0==e.validIs),r.yb(1),r.Xb("ngIf",1==e.uploadValidated),r.yb(45),r.Xb("ngIf",(null==e.products?null:e.products.length)>0)("ngIfElse",t)}}function bE(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",66),r.Lb(1,"h1",9),r.ic(2,"\u10e8\u10d4\u10d8\u10e7\u10d5\u10d0\u10dc\u10d4\u10d7 \u10e3\u10dc\u10d8\u10d9\u10d0\u10da\u10e3\u10e0\u10d8 \u10d9\u10dd\u10d3\u10d8"),r.Kb(),r.Lb(3,"form",67),r.Sb("submit",function(){return r.cc(t),r.Wb().testFunction()}),r.Lb(4,"input",68),r.Sb("ngModelChange",function(e){return r.cc(t),r.Wb().enteredAuthKey=e}),r.Kb(),r.Lb(5,"button",69),r.ic(6,"Enter"),r.Kb(),r.Kb(),r.Kb()}if(2&t){const t=r.Wb();r.yb(4),r.Xb("ngModel",t.enteredAuthKey)}}const _E=[{path:"",component:(()=>{class t{constructor(t,e){this.productService=t,this.router=e}ngOnInit(){this.productService.getData().subscribe(t=>{this.products=t.slice(0,4)})}onSelect(t){this.router.navigate(["/product",t.id])}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(tE),r.Ib(NC))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-home"]],decls:46,vars:1,consts:[[1,"w-full","flex","items-center","md:justify-start","justify-center","flex","h-96","bg-auto","bg-center",2,"background-image","url(assets/images/wallpaper_1.png)"],[1,"container","flex","flex-col","items-center","md:items-start","md:justify-start","justify-center","font-semibold"],[1,"text-center","md:text-left"],[1,"text-white","text-center","md:text-left","md:text-5xl","text-3xl"],[1,"text-white","inline","rounded-b-md","text-center","md:text-left","md:text-5xl","text-3xl","border-b-8","border-white"],[1,"container","flex","justify-center","items-center","py-10","pb-5"],[1,"text-primary","text-xl","md:pr-6","font-semibold"],[1,"w-full","hidden","md:block","h-0.5","bg-primary"],["class","md:grid lg:grid-cols-4 md:grid-cols-2 container flex flex-col",4,"ngIf"],[1,"flex","justify-center","items-center","mt-4"],["href","/catalog",1,"border-2","px-3","py-1","border-primary","text-sm","text-primary","font-semibold","bg-white"],[1,"w-full","bg-primary","my-12","py-12"],[1,"container","flex","justify-around","items-center"],["src","assets/images/furniture_picture_png_1.png","alt","",1,"w-96","px-12","hidden","md:block"],[1,"px-12","flex-col","text-white","font-semibold"],[1,"text-2xl"],[1,"mt-2"],["href","/about",1,"border-b-2","mt-2","border-white","float-right"],[1,"text-primary","text-center","font-semibold","text-3xl","mt-20","mb-10"],[1,"container","font-semibold","grid","md:grid-cols-3"],[1,"flex-col","flex","items-center","justify-center","pt-6"],["src","assets/images/mdi_star.svg","alt","",1,"p-4","rounded-full","gmt_plans"],[1,"text-primary","mt-6"],["src","assets/images/mdi_clock-outline.svg","alt","",1,"p-4","rounded-full","gmt_plans"],["src","assets/images/mdi_account-check-outline.svg","alt","",1,"p-4","rounded-full","gmt_plans"],[1,"flex","justify-center","items-center","mt-8","py-8"],["href","#",1,"border-b-2","mt-2","border-primary","font-semibold","text-primary"],[1,"md:grid","lg:grid-cols-4","md:grid-cols-2","container","flex","flex-col"],["class","px-4 productCard py-3",3,"href",4,"ngFor","ngForOf"],[1,"px-4","productCard","py-3",3,"href"],[1,"w-50","h-48","bg-white","p-4","border-2","border-secondary"],[1,"h-full","bg-cover","bg-center"],[1,"bg-white","font-semibold","p-2","border-2","border-t-0","border-secondary","flex","justify-between"],[1,"text-primary","text-md"],[1,"text-cost","text-md"]],template:function(t,e){1&t&&(r.Lb(0,"main"),r.Lb(1,"div",0),r.Lb(2,"div",1),r.Lb(3,"div",2),r.Lb(4,"h1",3),r.ic(5,"\u10d0\u10d8\u10e0\u10e9\u10d8\u10d4\u10d7 \u10e3\u10db\u10d0\u10e6\u10da\u10d4\u10e1\u10d8"),r.Kb(),r.Lb(6,"h1",4),r.ic(7,"\u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8\u10e1 \u10d0\u10d5\u10d4\u10ef\u10d8"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(8,"div",5),r.Lb(9,"p",6),r.ic(10,"\u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d4\u10d1\u10d8"),r.Kb(),r.Jb(11,"div",7),r.Kb(),r.gc(12,nE,2,1,"div",8),r.Lb(13,"div",9),r.Lb(14,"a",10),r.ic(15,"\u10d9\u10d0\u10e2\u10d0\u10da\u10dd\u10d2\u10d8"),r.Kb(),r.Kb(),r.Lb(16,"div",11),r.Lb(17,"div",12),r.Jb(18,"img",13),r.Lb(19,"div",14),r.Lb(20,"h1",15),r.ic(21,"GMT-\u10d8\u10e1 \u10db\u10d7\u10d0\u10d5\u10d0\u10e0\u10d8 \u10db\u10d8\u10d6\u10d0\u10dc\u10d8\u10d0 \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8 \u10d3\u10d0 \u10d9\u10db\u10d0\u10e7\u10dd\u10e4\u10d8\u10da\u10d8 \u10db\u10dd\u10db\u10ee\u10db\u10d0\u10e0\u10d4\u10d1\u10d4\u10da\u10d8"),r.Kb(),r.Lb(22,"p",16),r.ic(23,'\u10d9\u10dd\u10db\u10de\u10d0\u10dc\u10d8\u10d0 \u201cGMT\u201d\u10d1\u10d0\u10d6\u10d0\u10e0\u10d6\u10d4 \u10e8\u10d4\u10db\u10dd\u10e1\u10e3\u10da\u10d8\u10d0 \u10dd\u10e0 \u10ec\u10d4\u10da\u10d6\u10d4 \u10db\u10d4\u10e2\u10d8\ufe0f\u10d0. \u10d2\u10e3\u10dc\u10d3\u10d8, \u10e0\u10dd\u10db\u10d4\u10da\u10d8\u10ea \u10e5\u10db\u10dc\u10d8\u10e1 "GMT" \u10d1\u10e0\u10d4\u10dc\u10d3\u10d8\u10e1 \u10e5\u10d5\u10d4\u10e8 \u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10e3\u10da \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10ea\u10d8\u10d0\u10e1, \u10ec\u10da\u10d4\u10d1\u10d8\u10e1 \u10db\u10d0\u10dc\u10eb\u10d8\u10da\u10d6\u10d4 \u10db\u10e3\u10e8\u10d0\u10dd\u10d1\u10d3\u10d0 \u10d8\u10db\u10de\u10dd\u10e0\u10e2\u10d8\u10e0\u10d4\u10d1\u10e3\u10da \u10d0\u10d5\u10d4\u10ef\u10d6\u10d4\ufe0f. \u10e1\u10ec\u10dd\u10e0\u10d4\u10d3 \u10d0\u10db \u10d2\u10d0\u10db\u10dd\u10ea\u10d3\u10d8\u10da\u10d4\u10d1\u10d8\u10e1 \u10e1\u10d0\u10e4\u10e3\u10eb\u10d5\u10d4\u10da\u10d6\u10d4 \u10d2\u10d0\u10e9\u10dc\u10d3\u10d0 \u10d8\u10d3\u10d4\u10d0 \u10d8\u10d2\u10d8\u10d5\u10d4 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10ea\u10d8\u10d0 \u10d2\u10d5\u10d4\u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d8\u10dc\u10d0 \u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd\u10e8\u10d8 \u10d3\u10d0 \u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8 \u10db\u10d0\u10e6\u10d0\u10da\u10d8 \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8 \u10e8\u10d4\u10d2\u10d5\u10d4\u10d7\u10d0\u10d5\u10d0\u10d6\u10d4\u10d1\u10d8\u10dc\u10d0 "GMT" \u10d8\u10e1 \u10db\u10dd\u10db\u10ee\u10db\u10d0\u10e0\u10d4\u10d1\u10da\u10d8\u10e1\u10d7\u10d5\u10d8\u10e1'),r.Kb(),r.Lb(24,"a",17),r.ic(25,"\u10d3\u10d0\u10ec\u10d5\u10e0\u10d8\u10da\u10d4\u10d1\u10d8\u10d7"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(26,"h1",18),r.ic(27,"\u10e1\u10d0\u10e3\u10d9\u10d4\u10d7\u10d4\u10e1\u10dd \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8"),r.Jb(28,"br"),r.ic(29,"GMT-\u10e8\u10d8"),r.Kb(),r.Lb(30,"div",19),r.Lb(31,"div",20),r.Jb(32,"img",21),r.Lb(33,"p",22),r.ic(34,"\u10e3\u10db\u10d0\u10e6\u10da\u10d4\u10e1\u10d8 \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8"),r.Kb(),r.Kb(),r.Lb(35,"div",20),r.Jb(36,"img",23),r.Lb(37,"p",22),r.ic(38,"\u10d3\u10e0\u10dd\u10e3\u10da\u10d8 \u10db\u10d8\u10ec\u10dd\u10d3\u10d4\u10d1\u10d0"),r.Kb(),r.Kb(),r.Lb(39,"div",20),r.Jb(40,"img",24),r.Lb(41,"p",22),r.ic(42,"\u10d9\u10db\u10d0\u10e7\u10dd\u10e4\u10d8\u10da\u10d8 \u10d9\u10da\u10d8\u10d4\u10dc\u10e2\u10d8"),r.Kb(),r.Kb(),r.Kb(),r.Lb(43,"div",25),r.Lb(44,"a",26),r.ic(45,"\u10d3\u10d0\u10ec\u10d5\u10e0\u10d8\u10da\u10d4\u10d1\u10d8\u10d7 \u10e9\u10d5\u10d4\u10dc\u10d6\u10d4"),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(12),r.Xb("ngIf",(null==e.products?null:e.products.length)>0))},directives:[R,k],styles:[".backgroundImg[_ngcontent-%COMP%]{background-image:url(furniture_picture_png_1.e364abb7734ae90ae841.png)}.productCard[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:all .4s ease}.productCard[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{border-color:#3097bf}.gmt_plans[_ngcontent-%COMP%]{background:#fff;box-shadow:0 0 10px rgba(48,151,191,.5)}"]}),t})()},{path:"catalog",component:(()=>{class t{constructor(t,e){this.productService=t,this.router=e,this.counter=0}ngOnInit(){this.productService.getData().subscribe(t=>{this.products=t.slice(0,9),this.unfilteredProducts=t})}seeMoreFunction(){this.counter++,this.productService.getData().subscribe(t=>{this.products=t.slice(0,9+9*this.counter),console.log(this.products)})}textSearchOnChange(t){let e=t.target.value;const n=this.unfilteredProducts.filter(t=>t.name.includes(e));this.products=n,console.log(this.products,e)}searchForOffice(){const t=this.unfilteredProducts.filter(t=>{if(null!=t.category)return t.category.includes("office")});this.products=t,console.log(t)}searchForHouse(){const t=this.unfilteredProducts.filter(t=>{if(null!=t.category)return t.category.includes("house")});this.products=t,console.log(t)}searchWithPrice(){let t=document.getElementById("price-from").value,e=document.getElementById("price-to").value;const n=this.unfilteredProducts.filter(n=>{if(null!=t&&null!=e)return n.price>=t&&n.price<=e});this.products=n}allProduct(){this.products=this.unfilteredProducts}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(tE),r.Ib(NC))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-catalog"]],decls:47,vars:2,consts:[[1,""],[1,"container","w-full","flex","flex-col","grid-cols-4","md:grid","py-8"],[1,"md:col-span-1","font-semibold","flex","justify-center","md:justify-start","flex-col","items-center","md:items-start"],[1,"text-primary","text-xl"],[1,"text-gray-600"],["placeholder","\u10eb\u10d4\u10d1\u10dc\u10d0...","type","search","name","","id","",1,"border-b-2","w-40","pt-2","font-semibold","text-md","focus:outline-none",3,"change"],["x-data","{show: false}","click.away","show = false",1,"mt-3","w-44"],["click","show = ! show",1,"block","bg-white","text-secondary","px-1","text-sm","pt-1","overflow-hidden","border-2","border-secondary"],[1,"flex"],[1,"text-md","font-semibold"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24",1,"fill-current","text-gray-200"],["d","M7 10l5 5 5-5z"],["d","M0 0h24v24H0z","fill","none"],["x-show","show",1,"mt-2","py-2","w-48","bg-white","font-semibold","shadow-xl"],["href","#",1,"block","px-4","py-2","text-secondary","hover:bg-primary","hover:text-white"],[1,"mt-4"],[1,"font-semibold","text-secondary","border-b-2","border-secondary","w-44"],[1,"flex-col","flex"],[1,"font-mtavruli","cursor-pointer",3,"click"],[1,"mt-1","text-primary","font-mtavruli"],[1,"mt-1","text-secondary","font-mtavruli"],[1,"flex","justify-between","flex-row","font-mtavruli","mt-1"],["placeholder","\u10d3\u10d0\u10dc","type","number","name","price-from","id","price-from",1,"border-2","border-secondary","bg-white","p-0.5","w-16","text-secondary","font-semibold"],["placeholder","\u10db\u10d3\u10d4","type","number","name","","id","price-to",1,"border-2","border-secondary","p-0.5","text-secondary","font-semibold","w-16"],[1,"p-1","border-2","cursor-pointer","border-secondary",3,"click"],["src","assets/images/mdi_check-bold_search.svg","alt","",1,""],["class","col-span-3 md:grid grid-cols-3 md:px-0 px-4",4,"ngIf","ngIfElse"],["noItems",""],[1,"col-span-3","md:grid","grid-cols-3","md:px-0","px-4"],["class","px-4 productCard py-3",3,"href",4,"ngFor","ngForOf"],["class","flex cursor-pointer col-span-3 mt-6 justify-center items-center",3,"click",4,"ngIf"],[1,"px-4","productCard","py-3",3,"href"],[1,"w-50","h-48","bg-white","p-4","border-2","border-secondary"],[1,"h-full","bg-cover","bg-center"],[1,"bg-white","font-semibold","p-2","border-2","border-t-0","border-secondary","flex","justify-between"],[1,"text-primary","text-md"],[1,"text-cost","text-md"],[1,"flex","cursor-pointer","col-span-3","mt-6","justify-center","items-center",3,"click"],[1,"border-2","px-3","py-1","border-primary","text-center","text-sm","text-white","bg-primary"],[1,"text-center","col-span-3","mt-5","w-full","text-xl","text-primary"]],template:function(t,e){if(1&t&&(r.Lb(0,"main",0),r.Lb(1,"div",1),r.Lb(2,"div",2),r.Lb(3,"div",3),r.ic(4,"\u10d9\u10d0\u10e2\u10d0\u10da\u10dd\u10d2\u10d8"),r.Kb(),r.Lb(5,"div",4),r.Lb(6,"input",5),r.Sb("change",function(t){return e.textSearchOnChange(t)}),r.Kb(),r.Kb(),r.Lb(7,"div"),r.Lb(8,"div",6),r.Lb(9,"button",7),r.Lb(10,"div",8),r.Lb(11,"span",9),r.ic(12,"\u10d1\u10dd\u10da\u10dd\u10e1 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10e3\u10da\u10d8"),r.Kb(),r.Vb(),r.Lb(13,"svg",10),r.Jb(14,"path",11),r.Jb(15,"path",12),r.Kb(),r.Kb(),r.Kb(),r.Ub(),r.Lb(16,"div",13),r.Lb(17,"a",14),r.ic(18,"\u10d1\u10dd\u10da\u10dd\u10e1 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10e3\u10da\u10d8"),r.Kb(),r.Lb(19,"a",14),r.ic(20,"\u10e4\u10d0\u10e1\u10d4\u10d1\u10d8 \u10d9\u10da\u10d4\u10d1\u10d8\u10e1 \u10db\u10d8\u10ee\u10d4\u10d3\u10d5\u10d8\u10d7"),r.Kb(),r.Lb(21,"a",14),r.ic(22,"\u10e4\u10d0\u10e1\u10d4\u10d1\u10d8 \u10d6\u10e0\u10d3\u10d8\u10e1 \u10db\u10d8\u10ee\u10d4\u10d3\u10d5\u10d8\u10d7"),r.Kb(),r.Kb(),r.Kb(),r.Lb(23,"div",15),r.Lb(24,"p",16),r.ic(25,"\u10d9\u10d0\u10e2\u10d4\u10d2\u10dd\u10e0\u10d8\u10d4\u10d1\u10d8"),r.Kb(),r.Lb(26,"div",17),r.Lb(27,"a",18),r.Sb("click",function(){return e.allProduct()}),r.Lb(28,"p",19),r.ic(29,"\u10e7\u10d5\u10d4\u10da\u10d0 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d8"),r.Kb(),r.Kb(),r.Lb(30,"a",18),r.Sb("click",function(){return e.searchForOffice()}),r.Lb(31,"p",20),r.ic(32,"\u10e1\u10d0\u10dd\u10e4\u10d8\u10e1\u10d4 \u10d0\u10d5\u10d4\u10ef\u10d8"),r.Kb(),r.Kb(),r.Lb(33,"a",18),r.Sb("click",function(){return e.searchForHouse()}),r.Lb(34,"p",20),r.ic(35,"\u10e1\u10d0\u10ee\u10da\u10d8\u10e1 \u10d0\u10d5\u10d4\u10ef\u10d8"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(36,"div",15),r.Lb(37,"p",16),r.ic(38,"\u10e4\u10d0\u10e1\u10d8\u10e1 \u10d3\u10d8\u10d0\u10de\u10d0\u10d6\u10dd\u10dc\u10d8"),r.Kb(),r.Lb(39,"div",21),r.Jb(40,"input",22),r.Jb(41,"input",23),r.Lb(42,"div",24),r.Sb("click",function(){return e.searchWithPrice()}),r.Jb(43,"img",25),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.gc(44,oE,3,2,"div",26),r.gc(45,sE,2,0,"ng-template",null,27,r.hc),r.Kb(),r.Kb()),2&t){const t=r.bc(46);r.yb(44),r.Xb("ngIf",(null==e.products?null:e.products.length)>0)("ngIfElse",t)}},directives:[R,k],styles:[".backgroundImg[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/gmtfirebaseproject.appspot.com/o/istockphoto-968086564-612x612.jpg?alt=media&token=e8932296-3090-4087-b1f8-bd78a06e8a9c)}.productCard[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:all .4s ease}.productCard[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{border-color:#3097bf}.gmt_plans[_ngcontent-%COMP%]{background:#fff;box-shadow:0 0 10px rgba(48,151,191,.5)}"]}),t})()},{path:"product/:id",component:(()=>{class t{constructor(t,e){this.route=t,this.productService=e,this.statusClass="not-active"}ngOnInit(){this.productService.getData().subscribe(t=>{this.products=t.slice(0,4)}),this.productService.getData().subscribe(t=>{let e=this.route.snapshot.paramMap.get("id"),n=t.filter(t=>t.id==e);this.product=n[0],console.log(this.product)})}selectFirst(){var t=document.getElementById("mainSelected");console.log("selected_3");var e=document.getElementById("proImg_1").style.backgroundImage;t.style.backgroundImage=e}selectTwo(){var t=document.getElementById("mainSelected");console.log("selected_2");var e=document.getElementById("proImg_2").style.backgroundImage;t.style.backgroundImage=e}selectThree(){var t=document.getElementById("mainSelected");console.log("selected_3");var e=document.getElementById("proImg_3").style.backgroundImage;t.style.backgroundImage=e}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(yw),r.Ib(tE))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-product"]],decls:41,vars:11,consts:[[1,"md:container","flex-col","px-4","flex","md:grid","font-semibold","grid-cols-3","mt-12","mb-2"],[1,"md:col-span-1","w-full","h-72","bg-primary"],["id","mainSelected","ng-style","myStyle",1,"w-full","h-full","bg-cover","bg-center"],[1,"md:col-span-2","justify-between","p-8","flex-col","md:grid","grid-cols-3","w-full","md:h-72","bg-primary_low"],[1,"flex-col","col-span-2","flex","justify-between"],[1,"text-primary","text-2xl"],[1,"text-secondary","text-sm"],[1,"text-primary","text-xl"],[1,"text-black","text-sm"],[1,"flex","items-center"],["src","assets/images/mdi_check-bold.svg","alt",""],[1,"ml-2","text-cost","text-sm"],[1,"flex-col","md:mt-0","mt-4"],[1,"py-5","bg-primary"],[1,"text-white","text-center","text-2xl"],[1,"p-2","bg-white"],[1,"text-primary","text-center"],[1,"md:container","px-4","flex","justify-start"],["class","p-1 cursor-pointer border-2 border-secondary",4,"ngIf"],["class","p-1 cursor-pointer border-2 border-secondary mx-2",4,"ngIf"],[1,"container","flex","justify-center","items-center","py-10","pb-5"],[1,"text-primary","text-xl","md:pr-6","font-semibold"],[1,"w-full","hidden","md:block","h-0.5","bg-primary"],["class","md:grid lg:grid-cols-4 md:grid-cols-2 container flex flex-col",4,"ngIf"],[1,"container","mb-12","flex","justify-center","items-center","py-10","pb-5"],["href","",1,"border-2","ml-5","px-3","py-1","border-primary","text-sm","text-primary","text-lg","font-semibold","bg-white"],[1,"p-1","cursor-pointer","border-2","border-secondary"],["id","proImg_1",1,"bg-cover","bg-center","w-20","h-12",3,"click"],[1,"p-1","cursor-pointer","border-2","border-secondary","mx-2"],["id","proImg_2",1,"bg-cover","bg-center","w-20","h-12",3,"click"],["id","proImg_3",1,"bg-cover","bg-center","w-20","h-12",3,"click"],[1,"md:grid","lg:grid-cols-4","md:grid-cols-2","container","flex","flex-col"],["class","px-4 productCard py-3",3,"href",4,"ngFor","ngForOf"],[1,"px-4","productCard","py-3",3,"href"],[1,"w-50","h-48","bg-white","p-4","border-2","border-secondary"],[1,"h-full","bg-cover","bg-center"],[1,"bg-white","font-semibold","p-2","border-2","border-t-0","border-secondary","flex","justify-between"],[1,"text-primary","text-md"],[1,"text-cost","text-md"]],template:function(t,e){1&t&&(r.Lb(0,"main"),r.Lb(1,"div",0),r.Lb(2,"div",1),r.Jb(3,"div",2),r.Kb(),r.Lb(4,"div",3),r.Lb(5,"div",4),r.Lb(6,"div"),r.Lb(7,"h1",5),r.ic(8),r.Kb(),r.Lb(9,"p",6),r.ic(10),r.Kb(),r.Kb(),r.Lb(11,"div"),r.Lb(12,"h1",7),r.ic(13,"\u10d0\u10e6\u10ec\u10d4\u10e0\u10d0:"),r.Kb(),r.Lb(14,"p",8),r.ic(15),r.Kb(),r.Kb(),r.Lb(16,"div"),r.Lb(17,"div",9),r.Jb(18,"img",10),r.Lb(19,"p",11),r.ic(20,"\u10ee\u10d4\u10da\u10db\u10d8\u10e1\u10d0\u10ec\u10d5\u10d3\u10dd\u10db\u10d8\u10d0"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(21,"div",12),r.Lb(22,"div",13),r.Lb(23,"h1",14),r.ic(24),r.Kb(),r.Kb(),r.Lb(25,"div",15),r.Lb(26,"h1",16),r.ic(27,"\u10d3\u10d0\u10d9\u10d0\u10d5\u10e8\u10d8\u10e0\u10d4\u10d1\u10d0"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(28,"div",17),r.gc(29,aE,2,3,"div",18),r.gc(30,uE,2,3,"div",19),r.gc(31,cE,2,3,"div",18),r.Kb(),r.Lb(32,"div",20),r.Lb(33,"p",21),r.ic(34,"\u10d8\u10ee\u10d8\u10da\u10d4\u10d7"),r.Kb(),r.Jb(35,"div",22),r.Kb(),r.gc(36,hE,2,1,"div",23),r.Lb(37,"div",24),r.Jb(38,"div",22),r.Lb(39,"a",25),r.ic(40,"\u10d9\u10d0\u10e2\u10d0\u10da\u10dd\u10d2\u10d8"),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(3),r.fc("background-image: url(",e.product.image_1,");"),r.yb(5),r.jc(e.product.name),r.yb(2),r.kc("\u10d9\u10dd\u10d3\u10d8: ",e.product.id,""),r.yb(5),r.jc(e.product.description),r.yb(9),r.kc("",e.product.price," \u10da\u10d0\u10e0\u10d8"),r.yb(5),r.Xb("ngIf",e.product.image_1),r.yb(1),r.Xb("ngIf",e.product.image_2),r.yb(1),r.Xb("ngIf",e.product.image_3),r.yb(5),r.Xb("ngIf",(null==e.products?null:e.products.length)>0))},directives:[R,k],styles:[".backgroundImg[_ngcontent-%COMP%]{background-image:url(furniture_picture_png_1.e364abb7734ae90ae841.png)}.productCard[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:all .4s ease}.productCard[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{border-color:#3097bf}.gmt_plans[_ngcontent-%COMP%]{background:#fff;box-shadow:0 0 10px rgba(48,151,191,.5)}"]}),t})()},{path:"about",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-about"]],decls:29,vars:0,consts:[[1,"relative","px-4","md:p-0","md:py-5","font-semibold","py-12"],[1,"absolute","hidden","md:block","top-0","left-0","bg-primary","z-10","w-2/5","h-full"],[1,"md:grid","container","relative","z-20","md:grid-cols-2","flex"],[1,"flex","items-center","hidden","md:flex"],[1,"text-white"],[1,"text-5xl"],[1,"text-md"],["src","assets/images/furniture_picture_png_1.png","alt","",1,"w-72","hidden","lg:block"],[1,"flex","text-center","md:text-left","items-center","justify-center"],[1,"text-primary","text-xl","font-md"],[1,"text-primary","text-sm","mt-2"],[1,"container","px-4","md:p-0","text-center","md:text-left","font-semibold","md:my-8"],[1,"text-primary","text-sm"],[1,"flex","justify-center","my-5"],["href","/",1,"border-2","px-3","mx-3","py-1","border-primary","text-sm","text-primary","font-semibold","bg-white"],["href","/catalog",1,"border-2","px-3","mx-3","py-1","border-primary","text-sm","text-primary","font-semibold","bg-white"]],template:function(t,e){1&t&&(r.Lb(0,"main"),r.Lb(1,"div",0),r.Jb(2,"div",1),r.Lb(3,"div",2),r.Lb(4,"div",3),r.Lb(5,"div",4),r.Lb(6,"h1",5),r.ic(7,"GMT"),r.Jb(8,"br"),r.ic(9,"FURNITURE"),r.Kb(),r.Lb(10,"p",6),r.ic(11,"\u10d7\u10e5\u10d5\u10d4\u10dc\u10d8 \u10d9\u10dd\u10db\u10e4\u10dd\u10e0\u10e2\u10d8"),r.Jb(12,"br"),r.ic(13,"\u10e9\u10d5\u10d4\u10dc\u10d8 \u10ec\u10d0\u10e0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0\u10d0"),r.Kb(),r.Kb(),r.Jb(14,"img",7),r.Kb(),r.Lb(15,"div",8),r.Lb(16,"div"),r.Lb(17,"h1",9),r.ic(18,"GMT-\u10d8\u10e1 \u10db\u10d7\u10d0\u10d5\u10d0\u10e0\u10d8 \u10db\u10d8\u10d6\u10d0\u10dc\u10d8\u10d0 \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8 \u10d3\u10d0 \u10d9\u10db\u10d0\u10e7\u10dd\u10e4\u10d8\u10da\u10d8 \u10db\u10dd\u10db\u10ee\u10db\u10d0\u10e0\u10d4\u10d1\u10d4\u10da\u10d8"),r.Kb(),r.Lb(19,"p",10),r.ic(20,'\u10d9\u10dd\u10db\u10de\u10d0\u10dc\u10d8\u10d0 \u201cGMT\u201d\u10d1\u10d0\u10d6\u10d0\u10e0\u10d6\u10d4 \u10e8\u10d4\u10db\u10dd\u10e1\u10e3\u10da\u10d8\u10d0 \u10dd\u10e0 \u10ec\u10d4\u10da\u10d6\u10d4 \u10db\u10d4\u10e2\u10d8\ufe0f\u10d0. \u10d2\u10e3\u10dc\u10d3\u10d8, \u10e0\u10dd\u10db\u10d4\u10da\u10d8\u10ea \u10e5\u10db\u10dc\u10d8\u10e1 "GMT" \u10d1\u10e0\u10d4\u10dc\u10d3\u10d8\u10e1 \u10e5\u10d5\u10d4\u10e8 \u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10e3\u10da \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10ea\u10d8\u10d0\u10e1, \u10ec\u10da\u10d4\u10d1\u10d8\u10e1 \u10db\u10d0\u10dc\u10eb\u10d8\u10da\u10d6\u10d4 \u10db\u10e3\u10e8\u10d0\u10dd\u10d1\u10d3\u10d0 \u10d8\u10db\u10de\u10dd\u10e0\u10e2\u10d8\u10e0\u10d4\u10d1\u10e3\u10da \u10d0\u10d5\u10d4\u10ef\u10d6\u10d4\ufe0f. \u10e1\u10ec\u10dd\u10e0\u10d4\u10d3 \u10d0\u10db \u10d2\u10d0\u10db\u10dd\u10ea\u10d3\u10d8\u10da\u10d4\u10d1\u10d8\u10e1 \u10e1\u10d0\u10e4\u10e3\u10eb\u10d5\u10d4\u10da\u10d6\u10d4 \u10d2\u10d0\u10e9\u10dc\u10d3\u10d0 \u10d8\u10d3\u10d4\u10d0 \u10d8\u10d2\u10d8\u10d5\u10d4 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10ea\u10d8\u10d0 \u10d2\u10d5\u10d4\u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d8\u10dc\u10d0 \u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd\u10e8\u10d8 \u10d3\u10d0 \u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8 \u10db\u10d0\u10e6\u10d0\u10da\u10d8 \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8 \u10e8\u10d4\u10d2\u10d5\u10d4\u10d7\u10d0\u10d5\u10d0\u10d6\u10d4\u10d1\u10d8\u10dc\u10d0 "GMT" \u10d8\u10e1 \u10db\u10dd\u10db\u10ee\u10db\u10d0\u10e0\u10d4\u10d1\u10da\u10d8\u10e1\u10d7\u10d5\u10d8\u10e1'),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(21,"div",11),r.Lb(22,"p",12),r.ic(23,'2018 \u10ec\u10d4\u10da\u10e1 \u10d3\u10d0\u10d5\u10d8\u10ec\u10e7\u10d4\u10d7 \u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d0 \u10e3\u10db\u10d0\u10e6\u10da\u10d4\u10e1\u10d8 \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d8\u10e1 \u10db\u10d0\u10e1\u10d0\u10da\u10d4\u10d1\u10d8\u10d7, \ufe0f\u10e0\u10d0\u10db\u10d0\u10ea \u10e1\u10d0\u10e8\u10e3\u10d0\u10da\u10d4\u10d1\u10d0 \u10db\u10dd\u10d2\u10d5\u10ea\u10d0 \u10d2\u10d0\u10e0\u10d0\u10dc\u10e2\u10d8\u10d8\u10d7 \u10e8\u10d4\u10d5\u10d7\u10d0\u10d5\u10d0\u10d6\u10dd\u10d7 \u10e9\u10d5\u10d4\u10dc\u10d8 \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10ea\u10d8\u10d0 \u10db\u10dd\u10db\u10ee\u10db\u10d0\u10e0\u10d4\u10d1\u10d4\u10da\u10e1. \ufe0f\u10e9\u10d5\u10d4\u10dc\u10d8 \u10eb\u10d8\u10e0\u10d8\u10d7\u10d0\u10d3\u10d8 \u10db\u10d8\u10d6\u10d0\u10dc\u10d8\u10d0 \u10d9\u10dd\u10db\u10de\u10d0\u10dc\u10d8\u10d0 "GMT" \u10d0\u10e1\u10dd\u10ea\u10d8\u10e0\u10d3\u10d4\u10d1\u10dd\u10d3\u10d4\u10e1 \u10db\u10d0\u10e6\u10d0\u10da \u10ee\u10d0\u10e0\u10d8\u10e1\u10ee\u10d7\u10d0\u10dc. \ufe0f\u10d0\u10db \u10d4\u10e2\u10d0\u10de\u10d6\u10d4 \u10e5\u10d0\u10e0\u10d7\u10e3\u10da \u10d1\u10d0\u10d6\u10d0\u10e0\u10d6\u10d4 \u10ec\u10d0\u10e0\u10db\u10dd\u10d3\u10d2\u10d4\u10dc\u10d8\u10da\u10d8 \u10d5\u10d0\u10e0\u10d7 \u10d4\u10e0\u10d7\u10d8 \u10e8\u10dd\u10e3\u10e0\u10e3\u10db\u10d8\u10d7. \ufe0f\u10e1\u10d0\u10d5\u10d0\u10ed\u10e0\u10dd \u10ea\u10d4\u10dc\u10e2\u10e0\u10d8 \u10e1\u10d0\u10d1\u10d0 \u201c\u10d7\u10dd\u10e0\u10dc\u10d8\u10d9\u10d4 \u10d4\u10e0\u10d8\u10e1\u10d7\u10d0\u10d5\u10d8\u10e1 5\u201d. 2 \u10e1\u10d0\u10e0\u10d7\u10e3\u10da\u10d8. 5 \u10d0 \u10e1\u10d4\u10e5\u10e2\u10dd\u10e0\u10d8'),r.Kb(),r.Lb(24,"div",13),r.Lb(25,"a",14),r.ic(26,"\u10db\u10d7\u10d0\u10d5\u10d0\u10e0\u10d6\u10d4 \u10d2\u10d0\u10d3\u10d0\u10e1\u10d5\u10da\u10d0"),r.Kb(),r.Lb(27,"a",15),r.ic(28,"\u10d9\u10d0\u10e2\u10d0\u10da\u10dd\u10d2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),r.Kb(),r.Kb(),r.Kb(),r.Kb())},styles:[""]}),t})()},{path:"contact",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-contact"]],decls:23,vars:0,consts:[[1,"container","w-full","flex","flex-col","grid-cols-2","md:grid","py-8"],[1,""],["src","assets/images/furniture_wallpaper_1.jpg","alt","",1,"w-100"],[1,"flex-col","text-sm","md:text-lg","w-full","bg-primary","p-7","md:grid","justify-between","flex"],[1,"flex-col","justify-start"],[1,"text-white","font-semibold"],[1,"text-white","pt-2"],[1,"flex-col","justify-center","flex"],[1,"text-white"],[1,"flex-col","justify-end","flex"],[1,"container","w-full"],["src",r.lc("https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2976.5615711880796!2d44.78585381481017!3d41.75154868130434!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x404472835085d923%3A0x1cdf97a283a0f308!2sSaba!5e0!3m2!1sen!2sge!4v1607207852226!5m2!1sen!2sge"),"width","100%","height","450","frameborder","0","aria-hidden","false","tabindex","0",1,"mb-8",2,"border","0"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Jb(2,"img",2),r.Kb(),r.Lb(3,"div",3),r.Lb(4,"div",4),r.Lb(5,"h2",5),r.ic(6,"\u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d8"),r.Kb(),r.Lb(7,"p",6),r.ic(8,"\u10d7\u10dd\u10e0\u10dc\u10d8\u10d9\u10d4 \u10d4\u10e0\u10dd\u10e1\u10d7\u10d0\u10d5\u10d8\u10e1 5 \u10dc\u10dd\u10db\u10d4\u10e0\u10d8 (\u10e1\u10d0\u10d5\u10d0\u10ed\u10e0\u10dd \u10ea\u10d4\u10dc\u10e2\u10e0\u10d8 \u201c\u10e1\u10d0\u10d1\u10d0\u201d) 2 \u10e1\u10d0\u10e0\u10d7\u10e3\u10da\u10d8 \u10db\u10d4-5 \u10d0 \u10e1\u10d4\u10e5\u10e2\u10dd\u10e0\u10d8"),r.Kb(),r.Kb(),r.Lb(9,"div",7),r.Lb(10,"h2",5),r.ic(11,"\u10dc\u10dd\u10db\u10d4\u10e0\u10d8"),r.Kb(),r.Lb(12,"p",8),r.ic(13,"+995 577 315 200"),r.Kb(),r.Lb(14,"p",8),r.ic(15,"+995 577 315 200"),r.Kb(),r.Kb(),r.Lb(16,"div",9),r.Lb(17,"h2",5),r.ic(18,"\u10db\u10d4\u10d8\u10da\u10d8"),r.Kb(),r.Lb(19,"p",8),r.ic(20,"giorgobianiggg@gmail.com"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(21,"div",10),r.Jb(22,"iframe",11),r.Kb())},styles:[""]}),t})()},{path:"panel",component:(()=>{class t{constructor(t,e,n){this.productService=t,this.afs=e,this.storage=n,this.isSubmitted=!1,this.formTemplate=new De({name:new Ne(""),description:new Ne(""),price:new Ne(""),category:new Ne(""),image_1:new Ne(""),image_2:new Ne(""),image_3:new Ne(""),image_4:new Ne("")}),this.product={name:"",description:"",price:null,category:null,image_1:null,image_2:null,image_3:null,image_4:null},this.categories=[{name:"\u10e1\u10d0\u10dd\u10e4\u10d8\u10e1\u10d4 \u10d0\u10d5\u10d4\u10ef\u10d8",value:"office"},{name:"\u10e1\u10d0\u10ee\u10da\u10d8\u10e1 \u10d0\u10d5\u10d4\u10ef\u10d8",value:"house"}],this.counter=0,this.selectedImage=null,this.selectedImage_2=null,this.selectedImage_3=null,this.authorized=!1,this.authKey="gmtcode1029",this.productService.getData().subscribe(t=>{this.products=t.slice(0,9),this.unfilteredProducts=t})}testFunction(t){console.log(this.enteredAuthKey),this.enteredAuthKey==this.authKey&&(this.authorized=!0)}ngOnInit(){this.resetForm()}upload(t){this.selectedImage=t.target.files[0],console.log(this.selectedImage)}upload_1(t){this.selectedImage_2=t.target.files[0],console.log(this.selectedImage_2)}upload_2(t){this.selectedImage_3=t.target.files[0],console.log(this.selectedImage_3)}onSubmit(t){if(this.isSubmitted=!0,this.formTemplate.valid){var e=`products/${this.selectedImage.name}_pirveli${(new Date).getTime()}`;const i=this.storage.ref(e);var n=`products/${this.selectedImage_2.name}_meore${(new Date).getTime()}`;const o=this.storage.ref(n);var r=`products/${this.selectedImage_3.name}_mesame_${(new Date).getTime()}`;const s=this.storage.ref(r);this.storage.upload(e,this.selectedImage).snapshotChanges().pipe(a_(()=>{i.getDownloadURL().subscribe(e=>{t.image_1=e,console.log(t),console.log(e)})})).subscribe(),this.storage.upload(n,this.selectedImage_2).snapshotChanges().pipe(a_(()=>{o.getDownloadURL().subscribe(e=>{t.image_2=e,console.log(t),console.log(e)})})).subscribe(),this.storage.upload(r,this.selectedImage_3).snapshotChanges().pipe(a_(()=>{s.getDownloadURL().subscribe(e=>{t.image_3=e,console.log(t),console.log(e),this.productService.insertImageDetails(t)})})).subscribe(),this.resetForm()}else this.validIs=!1,this.uploadValidated=!1}resetForm(){this.formTemplate.reset(),this.formTemplate.setValue({name:"",description:"",price:"",category:"",image_1:"",image_2:"",image_3:"",image_4:""}),this.isSubmitted=!1}seeMoreFunction(){this.counter++,this.productService.getData().subscribe(t=>{this.products=t.slice(0,9+9*this.counter),console.log(this.products)})}textSearchOnChange(t){let e=t.target.value;const n=this.unfilteredProducts.filter(t=>t.name.includes(e));this.products=n,console.log(this.products,e)}searchForOffice(){const t=this.unfilteredProducts.filter(t=>{if(null!=t.category)return t.category.includes("office")});this.products=t,console.log(t)}searchForHouse(){const t=this.unfilteredProducts.filter(t=>{if(null!=t.category)return t.category.includes("house")});this.products=t,console.log(t)}searchWithPrice(){let t=document.getElementById("price-from").value,e=document.getElementById("price-to").value;const n=this.unfilteredProducts.filter(n=>{if(null!=t&&null!=e)return n.price>=t&&n.price<=e});this.products=n}allProduct(){this.products=this.unfilteredProducts}deleteProduct(t,e){this.productService.deleteProduct(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(tE),r.Ib(bb),r.Ib(Yr))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-panel"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["class","loginDiv"],["loginDiv",""],[1,"h-100","container","py-5"],[1,"text-2xl","text-primary"],[1,"flex","justify-center","items-center","flex-col"],[1,"text-xl","text-primary"],["action","/panel",1,"py-5","w-1/2",3,"formGroup","ngSubmit"],[1,"flex-col","flex"],[1,"text-primary"],["formControlName","name","name","first","type","text",1,"text-primary","text-md","p-1","border-primary","border-2",3,"ngModel","ngModelChange"],[1,"flex-col","flex","mt-4"],["formControlName","description","name","second","type","text",1,"text-primary","text-md","p-1","border-primary","border-2",3,"ngModel","ngModelChange"],["formControlName","price","name","third","type","number",1,"text-primary","text-md","p-1","border-primary","border-2",3,"ngModel","ngModelChange"],["formControlName","category","name","fourth",1,"text-primary","cursor-pointer","text-md","p-2","border-primary","border-2",3,"ngModel","ngModelChange"],["disabled","","selected","","hidden",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","image_1","name","img1","type","file",1,"text-primary","text-md","p-1","border-primary","border-2",3,"ngModel","ngModelChange","change"],["formControlName","image_2","name","img2","type","file",1,"text-primary","text-md","p-1","border-primary","border-2",3,"ngModel","ngModelChange","change"],["formControlName","image_3","name","img3","type","file",1,"text-primary","text-md","p-1","border-primary","border-2",3,"ngModel","ngModelChange","change"],["type","submit","value","\u10d8\u10dc\u10e4\u10dd\u10e0\u10db\u10d0\u10ea\u10d8\u10d8\u10e1 \u10e8\u10d4\u10e7\u10d5\u10d0\u10dc\u10d0",1,"bg-primary","mt-4","cursor-pointer","p-2","text-white"],["class","text-red-500 text-md",4,"ngIf"],["class","text-green-500 text-md",4,"ngIf"],[1,""],[1,"container","w-full","flex","flex-col","grid-cols-4","md:grid","py-8"],[1,"md:col-span-1","font-semibold","flex","justify-center","md:justify-start","flex-col","items-center","md:items-start"],[1,"text-primary","text-xl"],[1,"text-gray-600"],["placeholder","\u10eb\u10d4\u10d1\u10dc\u10d0...","type","search","name","","id","",1,"border-b-2","w-40","pt-2","font-semibold","text-md","focus:outline-none",3,"change"],["x-data","{show: false}","click.away","show = false",1,"mt-3","w-44"],["click","show = ! show",1,"block","bg-white","text-secondary","px-1","text-sm","pt-1","overflow-hidden","border-2","border-secondary"],[1,"flex"],[1,"text-md","font-semibold"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24",1,"fill-current","text-gray-200"],["d","M7 10l5 5 5-5z"],["d","M0 0h24v24H0z","fill","none"],["x-show","show",1,"mt-2","py-2","w-48","bg-white","font-semibold","shadow-xl"],["href","#",1,"block","px-4","py-2","text-secondary","hover:bg-primary","hover:text-white"],[1,"mt-4"],[1,"font-semibold","text-secondary","border-b-2","border-secondary","w-44"],[1,"font-mtavruli","cursor-pointer",3,"click"],[1,"mt-1","text-primary","font-mtavruli"],[1,"mt-1","text-secondary","font-mtavruli"],[1,"flex","justify-between","flex-row","font-mtavruli","mt-1"],["placeholder","\u10d3\u10d0\u10dc","type","number","name","price-from","id","price-from",1,"border-2","border-secondary","bg-white","p-0.5","w-16","text-secondary","font-semibold"],["placeholder","\u10db\u10d3\u10d4","type","number","name","","id","price-to",1,"border-2","border-secondary","p-0.5","text-secondary","font-semibold","w-16"],[1,"p-1","border-2","cursor-pointer","border-secondary",3,"click"],["src","assets/images/mdi_check-bold_search.svg","alt","",1,""],["class","col-span-3 md:grid grid-cols-3 md:px-0 px-4",4,"ngIf","ngIfElse"],["noItems",""],[3,"ngValue"],[1,"text-red-500","text-md"],[1,"text-green-500","text-md"],[1,"col-span-3","md:grid","grid-cols-3","md:px-0","px-4"],["class","mx-4 productCard my-3",4,"ngFor","ngForOf"],[1,"flex","cursor-pointer","col-span-3","mt-6","justify-center","items-center",3,"click"],[1,"border-2","px-3","py-1","border-primary","text-center","text-sm","text-white","bg-primary"],[1,"mx-4","productCard","my-3"],[1,"w-50","h-48","bg-white","p-4","border-2","border-secondary"],[1,"h-full","bg-cover","bg-center"],[1,"bg-white","font-semibold","p-2","border-2","border-t-0","border-secondary","flex","justify-between"],[1,"text-primary","text-md"],[1,"text-cost","text-md"],[1,"bg-red-500","text-white",3,"click"],["target","_blank",1,"bg-yellow-500","text-center","text-white",3,"href"],[1,"text-center","col-span-3","mt-5","w-full","text-xl","text-primary"],[1,"justify-center","flex","flex-col","items-center","my-2"],[3,"submit"],["type","password","name","enteredAuthKey","id","",1,"text-primary","text-md","p-1","border-primary","border-2",3,"ngModel","ngModelChange"],["type","submit",1,"border-2","px-3","py-1","border-primary","md:mt-","md:ml-8","text-sm","text-white","bg-primary"]],template:function(t,e){if(1&t&&(r.gc(0,mE,89,13,"div",0),r.gc(1,bE,7,1,"ng-template",1,2,r.hc)),2&t){const t=r.bc(2);r.Xb("ngIf",1==e.authorized)("ngIfElse",t)}},directives:[R,Be,Yt,ze,It,$t,Qe,Jt,se,ae,he,k,Ve,He],styles:[".backgroundImg[_ngcontent-%COMP%]{background-image:url(furniture_picture_png_1.e364abb7734ae90ae841.png)}.productCard[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:all .4s ease}.productCard[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{border-color:#3097bf}.gmt_plans[_ngcontent-%COMP%]{background:#fff;box-shadow:0 0 10px rgba(48,151,191,.5)}.loginDiv[_ngcontent-%COMP%]{height:50vh}"]}),t})()}];let wE=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[KC.forRoot(_E)],KC]}),t})();const CE=function(t){return{active:t}};let EE=(()=>{class t{constructor(){}ngOnInit(){this.check=!0}open(t){this.check=!this.check}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-navbar"]],decls:26,vars:7,consts:[[1,"border-b-2","border-primary"],[1,"hidden","md:block","md:w-full","md:bg-primary","md:pt-1","hidden"],[1,"md:container","md:flex","md:justify-between"],[1,"text-white","text-sm"],[1,"container","py-3"],[1,"w-full","md:px-0","px-5","text-gray-700","bg-white","dark-mode:text-gray-200","dark-mode:bg-gray-800"],["x-data","{ open: false }",1,"flex","flex-col","max-w-screen-xl","mx-auto","md:items-center","md:justify-between","md:flex-row"],[1,"flex","flex-row","items-center","justify-between"],["href","/",1,"md:block","hidden"],["src","../assets/images/logo_png.png","alt","",1,"w-36"],["href","/home",1,"md:hidden"],["src","../assets/images/logo.png","alt","",1,"w-8"],[1,"md:hidden","rounded-lg","focus:outline-none","focus:shadow-outline",3,"ngClass","click"],["src","../assets/images/menu_bar.svg","alt",""],[1,"flex-col","items-center","flex-grow","pb-4","md:pb-0","md:flex","md:justify-end","md:flex-row"],["href","/",1,"py-2","mt-2","text-sm","font-semibold","md:mt-0","md:ml-8","text-secondary","hover:text-primary","border-primary","hover:border-2","transition"],["href","/about",1,"py-2","mt-2","text-sm","font-semibold","md:mt-0","md:ml-8","text-secondary","hover:text-primary"],["href","/contact",1,"py-2","mt-2","text-sm","font-semibold","md:mt-0","md:ml-8","text-secondary","hover:text-primary"],["href","/catalog",1,"border-2","px-3","py-1","border-primary","md:mt-","md:ml-8","text-sm","text-white","bg-primary"]],template:function(t,e){1&t&&(r.Lb(0,"header",0),r.Lb(1,"div",1),r.Lb(2,"div",2),r.Lb(3,"p",3),r.ic(4,"GMT - \u10d7\u10e5\u10d5\u10d4\u10dc\u10d8 \u10d9\u10dd\u10db\u10e4\u10dd\u10e0\u10e2\u10d8\u10e1 \u10d2\u10d0\u10e0\u10d0\u10dc\u10e2\u10d8"),r.Kb(),r.Lb(5,"p",3),r.ic(6,"+995 577 315 200"),r.Kb(),r.Kb(),r.Kb(),r.Lb(7,"div",4),r.Lb(8,"div",5),r.Lb(9,"div",6),r.Lb(10,"div",7),r.Lb(11,"a",8),r.Jb(12,"img",9),r.Kb(),r.Lb(13,"a",10),r.Jb(14,"img",11),r.Kb(),r.Lb(15,"button",12),r.Sb("click",function(t){return e.open(t)}),r.Jb(16,"img",13),r.Kb(),r.Kb(),r.Lb(17,"nav",14),r.Lb(18,"a",15),r.ic(19,"\u10db\u10d7\u10d0\u10d5\u10d0\u10e0\u10d8"),r.Kb(),r.Lb(20,"a",16),r.ic(21,"\u10e9\u10d5\u10d4\u10dc\u10e1 \u10e8\u10d4\u10e1\u10d0\u10ee\u10d4\u10d1"),r.Kb(),r.Lb(22,"a",17),r.ic(23,"\u10d9\u10dd\u10dc\u10e2\u10d0\u10e5\u10e2\u10d8"),r.Kb(),r.Lb(24,"a",18),r.ic(25,"\u10d9\u10d0\u10e2\u10d0\u10da\u10dd\u10d2\u10d8"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(15),r.Xb("ngClass",r.Zb(5,CE,e.open)),r.yb(2),r.Ab("hidden",e.check)("flex",!e.check))},directives:[j],styles:[""]}),t})(),OE=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-footer"]],decls:32,vars:0,consts:[[1,"w-full","bg-primary"],[1,"container","grid","md:grid-cols-3","flex","justify-center","md:justify-between","p-8"],[1,"text-left","hidden","md:block"],[1,"font-semibold","text-white","pb-3","text-xl"],[1,"text-white"],["href","#"],[1,"flex-col","flex","justify-center","items-center"],["src","assets/images/logo_whiteback.png","alt",""],[1,"text-white","text-center","font-semibold","text-xl","mt-2"],[1,"text-right","hidden","md:block"],[1,"text-center","text-white","opacity-75","py-4"]],template:function(t,e){1&t&&(r.Lb(0,"footer",0),r.Lb(1,"div",1),r.Lb(2,"div",2),r.Lb(3,"h1",3),r.ic(4,"\u10db\u10dd\u10db\u10e1\u10d0\u10ee\u10e3\u10e0\u10d4\u10d1\u10d0"),r.Kb(),r.Lb(5,"p",4),r.Lb(6,"a",5),r.ic(7,"\u10d3\u10d0\u10d6\u10db\u10d0\u10d3\u10d4\u10d1\u10d0"),r.Kb(),r.Kb(),r.Lb(8,"p",4),r.Lb(9,"a",5),r.ic(10,"\u10db\u10d8\u10e2\u10d0\u10dc\u10d0"),r.Kb(),r.Kb(),r.Lb(11,"p",4),r.Lb(12,"a",5),r.ic(13,"\u10d9\u10dd\u10dc\u10e4\u10d8\u10d3\u10d4\u10dc\u10ea\u10d8\u10d0\u10da\u10e3\u10e0\u10dd\u10d1\u10d0"),r.Kb(),r.Kb(),r.Kb(),r.Lb(14,"div",6),r.Jb(15,"img",7),r.Lb(16,"p",8),r.ic(17,"GMT"),r.Kb(),r.Kb(),r.Lb(18,"div",9),r.Lb(19,"h1",3),r.ic(20,"\u10d9\u10dd\u10db\u10de\u10d0\u10dc\u10d8\u10d0"),r.Kb(),r.Lb(21,"p",4),r.Lb(22,"a",5),r.ic(23,"\u10e9\u10d5\u10d4\u10dc \u10e8\u10d4\u10e1\u10d0\u10ee\u10d4\u10d1"),r.Kb(),r.Kb(),r.Lb(24,"p",4),r.Lb(25,"a",5),r.ic(26,"\u10d9\u10dd\u10dc\u10e2\u10d0\u10e5\u10e2\u10d8"),r.Kb(),r.Kb(),r.Lb(27,"p",4),r.Lb(28,"a",5),r.ic(29,"\u10d2\u10d0\u10db\u10dd\u10ec\u10d4\u10e0\u10d0"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(30,"p",10),r.ic(31,"2020 GMT, \u10e7\u10d5\u10d4\u10da\u10d0 \u10e3\u10e4\u10da\u10d4\u10d1\u10d0 \u10d3\u10d0\u10ea\u10e3\u10da\u10d8\u10d0"),r.Kb(),r.Kb())},styles:[""]}),t})(),TE=(()=>{class t{constructor(){this.title="gmt"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(r.Jb(0,"app-navbar"),r.Jb(1,"router-outlet"),r.Jb(2,"app-footer"))},directives:[EE,DC,OE],styles:[""]}),t})(),SE=(()=>{class t{}return t.\u0275mod=r.Gb({type:t,bootstrap:[TE]}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[tE],imports:[[gt,wE,Xe,Ze.a.initializeApp(i),_b,Jr,Kb,Je]]}),t})();Object(r.S)(),dt().bootstrapModule(SE).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);